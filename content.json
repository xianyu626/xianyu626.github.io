[{"title":"CF1072è®°å½•è´´","date":"2018-10-21T12:40:36.000Z","path":"2018/10/21/cf1072jilutie/","text":"è¿™åœºCFæ‰“å®Œå¿ƒæ€æœ‰ç‚¹å´©â€¦è®°å½•ä¸€ä¸‹ ï¼ˆT2å¡ä¸€å°æ—¶ ï¼Œ T3 FSTäº†è§£ä¸€ä¸‹ï¼Ÿï¼‰ å…ˆæ‰”ä¸ªæ¯”èµ›é“¾æ¥ T1ä¸ç®¡ T2Description T2é¢˜æ„æ˜¯ç»™ä¸¤ä¸ªé•¿åº¦ä¸º $n-1(n\\leq 10^5)$ çš„æ•°åˆ— $a,b$ ï¼Œå€¼åŸŸ $0$~$3$ è¦æ±‚æ„é€ ä¸€ä¸ªæ•°åˆ— $t$ æ»¡è¶³ï¼š $a[i]=t[i]|t[i+1]$ $b[i]=t[i]\\&amp;t[i+1]$ è‹¥æ— è§£åˆ™è¾“å‡º$NO$ Solution å…¶å®æ˜¯ä¸€ä¸ªæŒºç®€å•çš„DPï¼Œæ³¨æ„å€¼åŸŸåªæœ‰ä¸¤ä½äºŒè¿›åˆ¶ $f[i][j]$ è¡¨ç¤º $t$ æ•°ç»„å¡«åˆ°ç¬¬ $i$ ä¸ªä¸” $t_i=j$ æ˜¯å¦å¯è¡Œï¼Œç„¶ååœ¨è½¬ç§»çš„æ—¶å€™è®°å½•æ˜¯ä»å“ªé‡Œè½¬ç§»è¿‡æ¥çš„å°±å¥½äº†ã€‚è¾“å‡ºæ—¶ä»æœ€åä¸€ä½å€’ç€æ‰¾å›å»ã€‚ Code 123456789101112131415161718192021222324#include &lt;cstdio&gt;using namespace std;int n,a[101000],b[101000],f[101000][10],fa[101000][10];int ans[101000],res;int main(int argc, char const *argv[])&#123; scanf(\"%d\",&amp;n); for(int i=1;i&lt;n;i++) scanf(\"%d\",&amp;a[i]); for(int i=1;i&lt;n;i++) scanf(\"%d\",&amp;b[i]); f[1][0]=f[1][1]=f[1][2]=f[1][3]=1; for(int i=2;i&lt;=n;i++) for(int j=0;j&lt;=3;j++) for(int k=0;k&lt;=3;k++) if((a[i-1]==(j|k))&amp;&amp;(b[i-1]==(j&amp;k))) if(f[i-1][k]) f[i][j]=1,fa[i][j]=k; res=0; while(!f[n][res]&amp;&amp;res&lt;=3) res++; if(res==4) return puts(\"NO\"),0; puts(\"YES\"); for(int i=n;i;i--) ans[i]=res,res=fa[i][res]; for(int i=1;i&lt;=n;i++) printf(\"%d \",ans[i]); return 0;&#125; T3Description ç»™ä¸¤ä¸ªæ•° $a,b\\le 10^9$ è¦æ±‚æ„é€ ä¸¤ä¸ªæ•°åˆ—ï¼Œä½¿å…¶å’Œåˆ†åˆ«å°äºç­‰äº $a,b$ ä¸”æ•°åˆ—ä¸­çš„æ•°ä¸¤ä¸¤ä¸ç›¸åŒ ä½¿ä¸¤æ•°åˆ—é•¿åº¦å’Œæœ€å¤§ï¼Œç»™å‡ºæ–¹æ¡ˆ Solution è´ªå¿ƒä¸€ä¸‹ï¼Œå…ˆå°† $a+b$ æ‹†æˆ $1+2+â€¦+x$ + $y(x&lt;y)$çš„å½¢å¼ åç”¨è´ªå¿ƒåœ°æ€æƒ³å…ˆå°† $a$ å¡«å®Œï¼Œå†ç”¨å‰©ä¸‹çš„æ•°å»å¡« $b$ Attentionï¼š$b$ æ˜¯æœ‰å¯èƒ½å¡«ä¸æ»¡çš„ï¼ï¼ ä»£ç å†™çš„å¤ªä¹±ï¼Œå°±ä¸è´´äº† T4Description ç»™å‡ºä¸€ä¸ª $nÂ·n(n\\leq 2000)$ çš„å­—æ¯çŸ©é˜µï¼Œä» $(1,1)$ èµ°åˆ° $(n,n)$ ï¼Œåªèƒ½å‘ä¸‹æˆ–å‘å³èµ°ï¼Œæœ‰ $k$ æ¬¡æœºä¼šå°†ä¸€ä¸ªæ ¼å­ä¸Šçš„å­—æ¯æ”¹æˆ &#39;a&#39; æ±‚ä¸€ç§èµ°æ³•ä½¿å¾—è·¯å¾„æ‰€ç»è¿‡çš„å­—æ¯ä¸²çš„å­—å…¸åºæœ€å° Input 4 2 abcd bcde bcad bcde 5 3 bwwwz hrhdh sepsp sqfaf ajbvw Output aaabcde aaaepfafw Solution é¦–å…ˆå› ä¸ºæ˜¯å­—å…¸åºï¼Œæ‰€ä»¥æ”¹å‰é¢æ¯”æ”¹åé¢ä¼˜ç§€ï¼Œå…ˆDPæ±‚å‡ºæ‰€æœ‰èƒ½åœ¨æ”¹ $k$ æ¬¡åŠä»¥å†…èµ°åˆ°çš„ç‚¹ä½¿å¾—è·¯å¾„ä¸Šå…¨éƒ¨éƒ½æ˜¯&#39;a&#39; å¦‚ä¸‹å›¾ï¼Œé»‘è‰²çš„æ ¼å­æ˜¯æ”¹ $k$ æ¬¡èƒ½èµ°åˆ°çš„æœ€è¿œçš„ç‚¹ 1 æ˜¾ç„¶ï¼Œåœ¨çº¢çº¿ä»¥å‰çš„æ ¼å­ä¸€å®šä¸æ˜¯æœ€ä¼˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»çº¢çº¿ä¸Šçš„é»‘æ ¼å­å¼€å§‹å¹³è¡Œäºå¯¹è§’çº¿å‘ $(n,n)$ æ¨è¿›ï¼Œä»¥åˆ°å½“å‰æ–œçº¿ä¸ºæ­¢ç­”æ¡ˆæœ€ä¼˜çš„ç‚¹å‘å³å’Œä¸‹æ‹“å±•ï¼Œæ‰“ä¸Šæ ‡è®°ï¼Œç„¶åä»ä¸‹ä¸€æ¡æ–œçº¿æ‰“äº†æ ‡è®°çš„ç‚¹ä¸­é€‰å‡ºå­—æ¯æœ€å°çš„ç‚¹ç»§ç»­è¿›è¡Œæ ‡è®°ã€‚ Code 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;cstdio&gt;#include &lt;iostream&gt;#include &lt;cstring&gt;using namespace std;int n,K,line,f[2010][2010];int able[2010][2010]; //æ ‡è®°å‰é¢çš„è·¯å¾„æ˜¯æœ€ä¼˜çš„char g[2010][2010];string ans;int main(int argc, char const *argv[])&#123; scanf(\"%d%d\",&amp;n,&amp;K); for(int i=1;i&lt;=n;i++) scanf(\"%s\",g[i]+1); memset(f,0x3f,sizeof f); f[0][1]=0; for(int i=1;i&lt;=n;i++) for(int j=1;j&lt;=n;j++) f[i][j]=min(f[i-1][j],f[i][j-1])+(g[i][j]!='a'); //æ±‚å‡ºåˆ°æ¯ä¸ªç‚¹çš„æœ€å°æ›´æ”¹æ¬¡æ•° for(int i=1;i&lt;=n;i++) for(int j=1;j&lt;=n;j++) if(f[i][j]&lt;=K)&#123; line=max(i+j-1,line); //æ‰¾åˆ°æœ€è¿œçš„ä¸€æ¡æ–œçº¿ able[i+1][j]=able[i][j+1]=1; &#125; for(int i=1;i&lt;=line;i++) ans+='a'; able[1][1]=1; line++; int nowmin; while(line&lt;n*2)&#123; nowmin=1e9; for(int i=1,j;i&lt;=n;i++)&#123; j=line-i+1; if(j&lt;1||j&gt;n) continue; if(able[i][j]) nowmin=min(nowmin,(int)g[i][j]); &#125; ans+=nowmin; //æ‰¾å‡ºæ¯æ¡æ–œçº¿ä¸­çš„æœ€å°åˆæ³•å­—æ¯ï¼Œè®¡å…¥ç­”æ¡ˆ for(int i=1,j;i&lt;=n;i++)&#123; j=line-i+1; if(j&lt;0||j&gt;n) continue; if(nowmin==g[i][j]&amp;&amp;able[i][j]) able[i+1][j]=able[i][j+1]=1; &#125; line++; &#125; cout&lt;&lt;ans; return 0;&#125; å†™åœ¨æœ€å T2åˆšçœ‹åˆ°æ²¡æ³¨æ„åˆ°å€¼åŸŸåªæœ‰ä¸¤ä½äºŒè¿›åˆ¶æƒ³äº†åŠå¤©ï¼Œçœ‹åˆ°äº†ä¹‹ååˆæƒ³ç€è´ªå¿ƒæ„é€ ï¼Œä¸€ç‚¹éƒ½æ²¡æƒ³ç€è¦DPï¼Œèœèœèœ T3å¬åŒå­¦è®²çš„é¢˜æ„ï¼Œä¸çŸ¥é“æ‹†å‡ºæ¥æ•°åˆ—å’Œå¯ä»¥ä¸ç­‰äºé‚£ä¸ªæ•°ï¼Œå°±æŒ‚äº†ã€‚ã€‚ T4æœ€åäºŒåå¤šåˆ†é’Ÿå…¶å®åº”è¯¥è¦ç çš„å‡ºæ¥çš„ï¼Œè¿˜æ˜¯æŒ‚äº†ï¼Œå¿ƒæœ‰ç‚¹ä¹± å¿ƒæ€çœŸçš„æ˜¯ä¸ªå¤§é—®é¢˜ï¼Œè§çš„é¢˜ä¹Ÿå°‘ï¼ŒT2æ˜¾ç„¶çš„DPæ„£æ˜¯æ²¡çœ‹å‡ºæ¥ï¼Œåé¢å¿ƒæ€å°±å´©äº† æ€»è€Œè¨€ä¹‹ï¼Œèœæ˜¯åŸç½ª","tags":[{"name":"è´ªå¿ƒ","slug":"è´ªå¿ƒ","permalink":"http://blog.southe3n.cf/tags/è´ªå¿ƒ/"},{"name":"DP","slug":"DP","permalink":"http://blog.southe3n.cf/tags/DP/"}]},{"title":"CF1060E [ä¸Šä¸‹DP]","date":"2018-10-04T13:30:43.000Z","path":"2018/10/04/cf1060eshangxiadp/","text":"å…³é”®è¯ï¼šæ ‘å½¢DP ä¸Šä¸‹DP ç›¸å…³é¢˜ç›®ï¼š$CF1060E$ é¢˜æ„æœ‰ä¸€é¢— $n(n\\leq 200000)$ ä¸ªç‚¹çš„æ ‘,è¾¹æƒå‡ä¸º1 è‹¥ä¸¤ä¸ªç‚¹åœ¨æ ‘ä¸Šå…·æœ‰ä¸€ä¸ªç›¸åŒçš„ç›¸é‚»ç‚¹ï¼Œåˆ™åœ¨æ–°å›¾ä¸Šå»ºç«‹ä¸€æ¡é“¾æ¥è¿™ä¸¤ç‚¹çš„è¾¹æ¢å¥è¯è¯´è‹¥$u$å’Œ$a$åœ¨æ ‘ä¸Šæœ‰è¿è¾¹ï¼Œ$v$å’Œ$a$ä¹Ÿæœ‰è¿è¾¹ï¼Œåˆ™åœ¨æ–°å›¾ä¸Šå»ºç«‹è¾¹$(u,v)$ æ±‚åœ¨æ–°å›¾ä¸Šæ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·ç¦»ä¹‹å’Œ Solutionè€ƒè™‘æ¯ä¸ªç‚¹å¯¹*åœ¨åŸæ ‘å’Œæ–°å›¾ä¸Šçš„è·ç¦»å˜åŒ–ï¼Œè®¾åŸæ ‘è·ç¦»ä¸º$Len$ è‹¥$Len$ä¸ºå¶æ•°ï¼Œåˆ™åœ¨è·¯å¾„ä¸Šæ¯ä¸¤ç‚¹ä¹‹é—´éƒ½æœ‰ä¸€æ¡æ–°è¾¹ï¼Œæ–°è·ç¦»ä¸º$\\frac{Len}{2}$è‹¥$Len$ä¸ºå¥‡æ•°ï¼Œåˆ™åœ¨è·¯å¾„ä¸Šå¤šäº†ä¸€ä¸ªç‚¹è¦ä½¿ç”¨åŸæ ‘ä¸Šçš„è¾¹ï¼Œæ–°è·ç¦»ä¸º$\\frac{Len}{2}+1$ å› æ­¤ï¼Œè‹¥æˆ‘ä»¬å¯ä»¥çŸ¥é“ä»¥æ¯ä¸ªç‚¹ä¸ºèµ·ç‚¹çš„åˆ°æ‰€æœ‰ç‚¹çš„è·¯å¾„é•¿åº¦å’Œï¼Œä»¥åŠå…¶ä¸­é•¿åº¦ä¸ºå¥‡æ•°çš„è·¯å¾„çš„æ¡æ•°å°±å¯ä»¥ç»Ÿè®¡ç­”æ¡ˆäº† è€ƒè™‘å¦‚ä½•æ±‚è¿™ä¸¤ä¸ªä¸œè¥¿ï¼Œæƒ³åˆ°æ ‘å½¢DPä½†æ˜¯æ™®é€šçš„æ ‘å½¢DPæ˜¯ä»å¶èŠ‚ç‚¹åˆ°ä¸€ä¸ªå›ºå®šçš„æ ¹ç»Ÿè®¡ç­”æ¡ˆçš„ï¼Œè€Œè¿™é‡Œæˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯ä»¥æ¯ä¸ªç‚¹ä¸ºæ ¹çš„ç­”æ¡ˆ è¿™æ—¶å€™å°±éœ€è¦å¼•å…¥ä¸€ä¸ªå«ä¸Šä¸‹DPçš„ä¸œè¥¿ ä¼¼ä¹æ˜¯æœºæˆ¿ç‰¹ä¾›ï¼Ÿå‘æœºæˆ¿å¤§ä½¬ä½å¤´ï¼ å¯¹æ¯ä¸ªç‚¹è®°å½•ä¸‰ä¸ªå€¼ sumï¼šä»¥è¯¥ç‚¹ä¸ºèµ·ç‚¹çš„æ‰€æœ‰è·¯å¾„é•¿åº¦å’Œ s1: ä»¥è¯¥ç‚¹ä¸ºèµ·ç‚¹çš„é•¿åº¦ä¸ºå¥‡æ•°çš„è·¯å¾„æ¡æ•° s2: ä»¥è¯¥ç‚¹ä¸ºèµ·ç‚¹çš„é•¿åº¦ä¸ºå¶æ•°çš„è·¯å¾„æ¡æ•° ç„¶åæˆ‘ä»¬ç°åœ¨éœ€è¦ä»ä¸€ä¸ªç‚¹ $u$ å°†ç­”æ¡ˆè½¬ç§»æ‰å¦ä¸€ä¸ªç‚¹ $v$ï¼Œä¸”å®ƒä»¬åœ¨åŸæ ‘ä¸­æœ‰è¿è¾¹å‘ç°æ‰€æœ‰è·¯å¾„çš„é•¿åº¦å˜åŒ–éƒ½å–å†³äºè¾¹$(u,v)$æ˜¯è¢«åŒ…å«è¿›å»äº†è¿˜æ˜¯ä¸å†å–äº† åˆ°$v$ç‚¹åŠå…¶å­æ ‘çš„ç‚¹çš„è·¯å¾„å˜çŸ­äº†ï¼Œåˆ°å…¶ä½™ç‚¹çš„è·¯å¾„å˜é•¿äº†ï¼Œè€Œè·¯å¾„é•¿åº¦çš„å¥‡å¶æ€§åˆ™å¯¹æ¢äº†ä¸€ä¸‹1234sum[v]=sum[u]+size[u]-2*size[v];size[v]=size[u];s1[v]=s2[u];s2[v]=s1[u]; é‚£ä¹ˆäº‹æƒ…å°±å¥½åŠäº†å°†ä»¥æ¯ä¸ªç‚¹ä¸ºæ ¹çš„ç­”æ¡ˆç´¯åŠ ï¼Œç”±äºæ‰€æœ‰è·¯å¾„éƒ½è¢«ç®—äº†ä¸¤æ¬¡ï¼Œæœ€åå†é™¤ä»¥2å°±å¥½äº† ä¾æˆ‘ä¸ªäººçš„ç†è§£ï¼Œä¸Šä¸‹DPå°±æ˜¯åœ¨æ ‘ä¸Šå°†ä»¥ä¸åŒç‚¹ä¸ºæ ¹çš„ç­”æ¡ˆè¿›è¡Œè½¬ç§» åœ¨è½¬ç§»è¿‡ç¨‹ä¸­åªç”¨è€ƒè™‘è½¬ç§»çš„è¿™æ¡è¾¹å¯¹ç­”æ¡ˆçš„å½±å“å°±å¥½äº† ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#include &lt;cstdio&gt;const int N=210000;using namespace std;long long sum[N],ans;int s1[N],s2[N],size[N],n;int to[N&lt;&lt;1],nxt[N&lt;&lt;1],head[N],cnt;inline void add(int u,int v)&#123; to[++cnt]=v,nxt[cnt]=head[u]; head[u]=cnt;&#125;void dfs1(int u,int ff)&#123; size[u]=1; for(int i=head[u];i;i=nxt[i]) if(to[i]!=ff) &#123; dfs1(to[i],u); size[u]+=size[to[i]]; &#125;&#125;void dfs2(int u,int ff)&#123; s2[u]=1; for(int i=head[u],v=to[i];i;i=nxt[i],v=to[i])&#123; if(v==ff) continue; dfs2(v,u); sum[u]+=sum[v]+size[v]; s1[u]+=s2[v]; s2[u]+=s1[v]; &#125;&#125;void dfs3(int u,int ff)&#123; ans+=sum[u]+s1[u]; //å…ˆç›´æ¥ç´¯åŠ åŸå€¼ï¼Œåˆ°è¾“å‡ºæ—¶ç›´æ¥/4 for(int i=head[u],v=to[i];i;i=nxt[i],v=to[i])&#123; if(v==ff) continue; sum[v]=sum[u]+size[u]-2*size[v]; size[v]=size[u]; s1[v]=s2[u]; s2[v]=s1[u]; dfs3(v,u); &#125;&#125;int main(int argc, char const *argv[])&#123; scanf(\"%d\",&amp;n); for(int i=1,x,y;i&lt;n;i++)&#123; scanf(\"%d%d\",&amp;x,&amp;y); add(x,y), add(y,x); &#125; dfs1(1,0); //å¤„ç†å‡ºå­æ ‘å¤§å° dfs2(1,0); //ç”¨æ ‘å½¢DPç®—å‡ºä»¥1ä¸ºæ ¹æ—¶çš„ç­”æ¡ˆ dfs3(1,0); //å°†ç­”æ¡ˆè½¬ç§»åˆ°æ‰€æœ‰ç‚¹ä¸Š printf(\"%lld\\n\",ans/4); return 0;&#125;","tags":[{"name":"DP","slug":"DP","permalink":"http://blog.southe3n.cf/tags/DP/"}]},{"title":"CF1058E","date":"2018-09-25T12:15:32.000Z","path":"2018/09/25/cf1058e/","text":"å…³é”®è¯ï¼šäºŒè¿›åˆ¶ ç›¸å…³é¢˜ç›®ï¼š$CF1058E$ é¢˜æ„ç»™å®š$n(n\\leq 300000)$ä¸ªæ•°ï¼Œå€¼åŸŸ $1 \\sim 1e18$å®šä¹‰æ“ä½œä¸ºï¼Œå°†ä¸€ä¸ªæ•°è½¬æ¢æˆäºŒè¿›åˆ¶åï¼Œå¯ä»¥å°†å…¶å˜ä¸ºä»»ä½•ä¸å…¶1ä¸ªæ•°ç›¸åŒçš„æ•°ï¼ˆä½æ•°ä¸é™ï¼‰ æ±‚åŒºé—´ $(l,r)$ ä½¿åŒºé—´å†…çš„æ•°ç»ä»»æ„æ“ä½œåå¼‚æˆ–å’Œä¸º0çš„åŒºé—´æ•° Solutioné¦–å…ˆå‘ç°æ•°çš„å…·ä½“å€¼å¯¹ç­”æ¡ˆæ²¡æœ‰å½±å“ï¼Œæ‰€ä»¥å…ˆæŠŠæ•°å¤„ç†æˆ1çš„ä¸ªæ•° æ˜“å¾—1.ä¸€ä¸ªåŒºé—´å†…1ä¸ªæ•°å’Œä¸ºå¶æ•°2.ä¸”1çš„ä¸ªæ•°çš„æœ€å¤§å€¼ä¸å¤§äº1ä¸ªæ•°å’Œçš„è¯ è¿™ä¸ªåŒºé—´å°±æ˜¯åˆæ³•çš„ é¦–å…ˆè€ƒè™‘å¦‚æœåªæœ‰ç¬¬ä¸€ä¸ªæ¡ä»¶æ€ä¹ˆåŠç»´æŠ¤ä¸‰ä¸ªå‰ç¼€å’Œï¼š1çš„ä¸ªæ•°å’Œï¼Œå‰ç¼€å’Œä¸ºå¥‡æ•°çš„ä¸ªæ•°å’Œï¼Œå‰ç¼€å’Œä¸ºå¶æ•°çš„ä¸ªæ•°å’Œ ç„¶åæšä¸¾ä¸€ä¸‹å·¦ç«¯ç‚¹ï¼Œç”¨ä¸‰ä¸ªå‰ç¼€å’Œç®—ä¸€ä¸‹å½“å‰å·¦ç«¯ç‚¹å¯¹ç­”æ¡ˆçš„è´¡çŒ®å°±å¥½äº† ç­‰ç­‰ï¼Ÿï¼ä¼¼ä¹è¿˜æœ‰ä¸ªæ¡ä»¶2ï¼Ÿï¼Ÿ å†·é™åˆ†æ å‘ç°ä¸€ä¸ªæ•°1çš„ä¸ªæ•°æœ€å¤§åªæœ‰63ä¸ªï¼Œæœ€å°‘ä¹Ÿæœ‰1ä¸ª ä¼¼ä¹åªè¦åŒºé—´é•¿åº¦å¤§äº64ï¼Œç¬¬äºŒä¸ªæ¡ä»¶å°±ä¸€å®šæ»¡è¶³ï¼Ÿ é‚£å¯¹äºæ¯ä¸€ä¸ªå·¦ç«¯ç‚¹å‘å³æšä¸¾ä¸€ä¸‹å³ç«¯ç‚¹ï¼Œå•ç‹¬ç®—ä¸€ä¸‹ ç›´åˆ°åŒºé—´é•¿åº¦å¤§äº64å†ç”¨å‰é¢æ‰€è¯´çš„å‰ç¼€å’Œç®—ä¸€ä¸‹å‰©ä¸‹çš„è´¡çŒ®å°±å¥½äº†ã€‚ ä»£ç 12345678910111213141516171819202122232425262728293031#include &lt;cstdio&gt;#include &lt;algorithm&gt;const int N=300100;using namespace std;int n,a[N],sum[N],f[10][N];long long ans,x;int main(int argc, char const *argv[])&#123; scanf(\"%d\",&amp;n); for(int i=1;i&lt;=n;i++)&#123; scanf(\"%lld\",&amp;x); while(x) a[i]+=x&amp;1,x&gt;&gt;=1; &#125; for(int i=1;i&lt;=n;i++) &#123; sum[i]=sum[i-1]+a[i]; f[sum[i]&amp;1][i]=1; &#125; for(int i=1;i&lt;=n;i++)&#123; f[0][i]+=f[0][i-1]; f[1][i]+=f[1][i-1]; &#125; for(int l=1,r,maxn;l&lt;=n;l++)&#123; maxn=a[l]; for(r=l+1;r&lt;=n&amp;&amp;r-l+1&lt;=64;r++)&#123; maxn=max(a[r],maxn); if((sum[r]-sum[l-1])%2==0&amp;&amp;maxn*2&lt;=(sum[r]-sum[l-1])) ans++; &#125; ans+=f[sum[l-1]&amp;1][n]-f[sum[l-1]&amp;1][r-1]; &#125; printf(\"%lld\\n\",ans); return 0;&#125;","tags":[]},{"title":"é’è›™","date":"2018-09-24T01:15:09.000Z","path":"2018/09/24/qingwa/","text":"å…³é”®è¯ï¼šæ•°å­¦æœŸæœ› è°ƒå’Œçº§æ•° ç›¸å…³é¢˜ç›®ï¼š$Luogu39825$ åŒå­¦ç§äººé¢˜åº“é‡Œçš„ä¸€é“é¢˜ï¼Œæ•°å­¦æœŸæœ›å…¥é—¨é¢˜ é¢˜ç›®æè¿°ç°åœ¨æœ‰ä¸€åªé’è›™ï¼ˆCalled ZBY!ï¼‰ åœ¨ç¬¬$n$ä¸ªè·å¶ä¸Šï¼Œæ¯ä¸€æ¬¡ç­‰æ¦‚ç‡åœ°è·³åˆ°ç¬¬1æ ¼~å½“å‰æ‰€åœ¨è·å¶ä¸Šæ±‚ZBYè·³åˆ°ç¬¬1ä¸ªæ ¼å­ä¸Šçš„æ­¥æ•°æœŸæœ›ï¼Œä¿ç•™8ä½å°æ•° Solutionæˆ‘ä»¬ç”¨ f[i] è¡¨ç¤ºç¬¬iæ ¼è·³åˆ°ç¬¬1æ ¼çš„æ•°å­¦æœŸæœ›ï¼Œåˆ™æ˜“å¾— f[i]=1+\\Sigma_{j=1}^i f[j]*\\frac{1}{i}å˜ä¸€ä¸‹å½¢ i*f[i]=i+\\Sigma_{j=1}^{i-1}f[j]+f[i]ç„¶åå¯å¾— (i-1)*f[i]=i+\\Sigma_{j=1}^{i-1}f[j](i-1)*f[i-1]=i-1+\\Sigma_{j=1}^{i-1}f[j]ä¸Šä¸‹ä¸¤ä¸ªå¼å­ç›¸å‡,æˆ‘ä»¬ä¼šæƒŠå–œçš„å‘ç° f[i]-f[i-1]=\\frac{1}{i-1}è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªé€’æ¨å¼ f[n]=f[2]+\\Sigma_{i=2}^{n-1}\\frac{1}{i}ä¼¼ä¹åé¢è¿™éƒ¨åˆ†æ˜¯ä¸ªè°ƒå’Œçº§æ•°ï¼Ÿè°ƒå’Œçº§æ•° $\\Sigma_{i=1}^{n}\\frac{1}{i}$ è™½ç„¶æ˜¯å‘æ•£çš„ï¼Œä½†æ˜¯å½“nè¾ƒå¤§æ—¶,å¯ä»¥ç”¨ $ln(n)+æ¬§æ‹‰å¸¸æ•°$ æ¥æ±‚å…¶è¿‘ä¼¼å‰ç¼€å’Œ æ¬§æ‹‰å¸¸æ•°â‰ˆ$0.5772156649015328606$$f[2]=2$ Code123456789101112#include &lt;cstdio&gt;#include &lt;cmath&gt;using namespace std;double ans;long long n;int main(int argc, char const *argv[])&#123; scanf(\"%lld\",&amp;n); if(n&lt;=1e6) for(int i=2;i&lt;n;i++) ans+=1/(double)i; else ans=log(n-1)-1+0.5772156649015328606; printf(\"%.8lf\\n\",2+ans); return 0;&#125;","tags":[{"name":"æ•°å­¦æœŸæœ›","slug":"æ•°å­¦æœŸæœ›","permalink":"http://blog.southe3n.cf/tags/æ•°å­¦æœŸæœ›/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘çŸ©é˜µä¹˜æ³•","date":"2018-08-11T16:00:00.000Z","path":"2018/08/12/xuexibijijuzhenchengfa/","text":"å…¶å®æ˜¯çœ‹åˆ°çš„ä¸€ä¸ªæˆ‘è®¤ä¸ºè¿˜ç®—ä¼˜ç¾çš„çŸ©é˜µä¹˜æ³•æ¿å­ï¼Œè´´ä¸€ä¸‹å¤‡å¿˜ 12345678910111213141516171819202122232425struct matrix&#123; double m[101][101]; matrix(int flg=0)&#123; memset(m,0,sizeof m); if(flg) for(int i=0;i&lt;100;i++) m[i][i]=1; &#125;&#125;A;inline matrix operator * (const matrix &amp;A,const matrix &amp;B) &#123; matrix C(0); for(int i=0;i&lt;m;i++) for(int j=0;j&lt;m;j++) for(int k=0;k&lt;m;k++) C.m[i][j]+=A.m[i][k]*B.m[k][j]; return C;&#125;inline matrix pow(int x)&#123; matrix B(1),C=A; while(x)&#123; if(x&amp;1) B=B*C; C=C*C; x&gt;&gt;=1; &#125; return B;&#125;","tags":[]},{"title":"2018æš‘æœŸé›†è®­[7.26~8.10]","date":"2018-08-10T16:00:00.000Z","path":"2018/08/11/2018shuqijixun726810/","text":"æ”¾ä¸€äº›è¿™æ®µæ—¶é—´æ¨¡æ‹Ÿèµ›çš„é¢˜ ä¼¼ä¹å¾ˆå¤šé¢˜æˆ‘éƒ½å¿˜è®°äº†ï¼Ÿï¼ï¼Ÿ å°±å½“å¤ä¹ äº† å®Œå¤‡åŒ¹é…æ—¶é—´é™åˆ¶ï¼š2sç©ºé—´é™åˆ¶ï¼š256MB Descriptionæœ‰ä¸€ä¸ªä¸¤è¾¹ç‚¹é›†å¤§å°éƒ½æ˜¯$n$çš„äºŒåˆ†å›¾ã€‚ä»–æœ¬æ¥æ˜¯ä¸€ä¸ªå®Œå…¨äºŒåˆ†å›¾ï¼ˆå³æŠŠå›¾ä¸­çš„é¡¶ç‚¹åˆ†æˆä¸¤ä¸ªé›†åˆï¼Œä½¿å¾—ç¬¬ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰é¡¶ç‚¹éƒ½ä¸ç¬¬äºŒä¸ªé›†åˆä¸­çš„æ‰€æœ‰é¡¶ç‚¹ç›¸è¿ï¼‰ã€‚ æ¯æ¡è¾¹éƒ½æœ‰ä¸€ä¸ªè¾¹æƒã€‚å¯¹ä¸€ä¸ªåŒ¹é…ï¼Œåœ¨åŒ¹é…ä¸­è¾¹çš„è¾¹æƒçš„æ€»å’Œä¸ºè¿™ä¸ªåŒ¹é…çš„ä»·å€¼ã€‚ä½†æ˜¯ç”±äºæŸäº›åŸå› ï¼Œè¿™ä¸ªäºŒåˆ†å›¾ä¸­çš„$k$æ¡è¾¹ä¸è§äº†ã€‚ ä»–æƒ³çŸ¥é“ç°åœ¨è¿™ä¸ªäºŒåˆ†å›¾è¿˜æœ‰å‡ ç§å®Œå¤‡åŒ¹é…ï¼ˆå¦‚æœå›¾çš„æ‰€æœ‰é¡¶ç‚¹éƒ½ä¸æŸåŒ¹é…ä¸­çš„ä¸€æ¡è¾¹ç›¸å…³è”ï¼Œåˆ™ç§°æ­¤åŒ¹é…ä¸ºå®Œå¤‡åŒ¹é…)æ–¹æ¡ˆï¼Œå¹¶ä¸”æ‰€æœ‰å®Œå¤‡åŒ¹é…çš„ä»·å€¼çš„æ€»å’Œæ˜¯å¤šå°‘ã€‚ Inputç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ­£æ•´æ•°$n$ã€‚ æ¥ä¸‹æ¥æœ‰$n$è¡Œï¼Œæ¯è¡Œ$n$ä¸ªæ•´æ•°ï¼Œç¬¬$i$è¡Œç¬¬$j$ä¸ªæ•´æ•°$w_{i,j}$ï¼Œè¡¨ç¤ºç‚¹$i$å‘å¦ä¸€ä¸ªç‚¹é›†ä¸­çš„ç‚¹$j$è¾¹çš„æƒå€¼ã€‚æ³¨æ„ç‚¹ä»$0$å¼€å§‹æ ‡å·ã€‚ æ¥ä¸‹æ¥ä¸€è¡Œï¼Œä¸€ä¸ªæ­£æ•´æ•°$k$ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘æ¡è¾¹ä¸è§äº†ã€‚ æ¥ä¸‹æ¥$k$è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°$u,v$ï¼Œè¡¨ç¤ºç‚¹$u$å‘å¦ä¸€ä¸ªç‚¹é›†ä¸­çš„ç‚¹$v$è¾¹ä¸è§äº†ã€‚ Outputä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œç¬¬ä¸€ä¸ªæ•°ä¸ºå®Œå¤‡åŒ¹é…çš„ä¸ªæ•°ï¼Œç¬¬äºŒä¸ªæ•°ä¸ºæ‰€æœ‰å®Œå¤‡åŒ¹é…çš„ä»·å€¼æ€»å’Œï¼Œç”±äºæ•°å­—è¾ƒå¤§ï¼Œè¯·å¯¹$10^9+7$å–æ¨¡ã€‚ Sample Input 5 2 3 4 5 6 5 4 3 2 1 7 6 5 4 3 5 6 7 8 9 3 4 5 6 7 3 1 2 2 2 3 4 Sample Output60 1408 Hintå¯¹äº$100%$çš„æ•°æ®ï¼Œ$n\\leq 300$, $k\\leq 20$ , $0\\leq w_{i,j}\\leq 500$ã€‚ Solutionè¿™æ˜¯ä¸€é“è¦ç”¨åˆ°å®¹æ–¥åŸç†çš„é¢˜ å…ˆè€ƒè™‘ç¬¬ä¸€é—®ã€‚é¦–å…ˆå¦‚æœæ²¡æœ‰ä¸å¯é€‰çš„è¾¹ï¼Œé‚£ä¹ˆå®Œå¤‡åŒ¹é…æ•°å°±æ˜¯$n!$ ç„¶åæˆ‘ä»¬å¯ä»¥æƒŠå–œçš„åœ°å‘ç°$k$éå¸¸çš„å°ï¼Œåªæœ‰20ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹ä¸å¯é€‰åœ°è¾¹è¿›è¡Œ $2^k$ æ¬¡æšä¸¾ï¼Œæ ¹æ®å®¹æ–¥åŸç†ï¼Œå°†å¥‡æ•°æ¡ä¸å¯é€‰çš„è¾¹äº§ç”Ÿåœ°æ–¹æ¡ˆæ•°ä»æ€»æ–¹æ¡ˆæ•°ä¸­å‡å»ï¼Œå°†å¶æ•°æ¡çš„æ–¹æ¡ˆæ•°åŠ ä¸Š é‚£ä¹ˆè¿™ä¸ªæ–¹æ¡ˆæ•°è¯¥æ€ä¹ˆè®¡ç®—å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬ç°åœ¨æšä¸¾å‡º$sum$æ¡è¾¹ï¼Œç”±äºä¸€å…±éœ€è¦$n$æ¡è¾¹ï¼Œå…¶ä¸­$sum$æ¡è¾¹å·²ç»ç¡®å®šï¼Œé‚£ä¹ˆæ–¹æ¡ˆæ•°å°±æ˜¯$(n-sum)!$ ç¬¬äºŒé—®å…¶å®ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œé¦–å…ˆç®—å‡ºå…¨éƒ¨è¾¹å¯é€‰çš„æƒ…å†µä¸‹çš„æƒå€¼æ€»å’Œå†å°†æšä¸¾å‡ºçš„è¾¹æ ¹æ®æ•°é‡å¥‡å¶æ€§åœ¨ç­”æ¡ˆä¸­åŠ å‡ï¼Œè¦æ³¨æ„çš„æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸èƒ½æœ‰ä¸¤æ¡è¢«é€‰ä¸­çš„è¾¹æœ‰åŒä¸€ä¸ªé¡¶ç‚¹ Code1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;cstdio&gt;using namespace std;const int mod=1e9+7;int n,K,g[310][310],sum[2][310],x[25],y[25],u[25],v[25],vis[2][310];long long jc[310],ans1,ans2,Sigma,tmp;void dfs(int k,int Sum,int sigma,int num)&#123; if(k==K+1) &#123; ans1+=(Sum&amp;1)?mod-jc[n-Sum]:jc[n-Sum]; if(ans1&gt;=mod) ans1%=mod; tmp=(sigma*jc[n-Sum-1]%mod+num*jc[n-Sum]%mod)%mod; ans2+=(Sum&amp;1)?mod-tmp:tmp; if(ans2&gt;=mod) ans2%=mod; return; &#125; dfs(k+1,Sum,sigma,num); if(vis[0][u[k]]||vis[1][v[k]]) return; x[Sum+1]=u[k]; y[Sum+1]=v[k]; sigma+=g[u[k]][v[k]]-sum[0][u[k]]-sum[1][v[k]]; vis[0][u[k]]=1; vis[1][v[k]]=1; for(int i=1;i&lt;=Sum;i++) sigma+=g[x[i]][v[k]]+g[u[k]][y[i]]; dfs(k+1,Sum+1,sigma,num+g[u[k]][v[k]]); vis[0][u[k]]=0; vis[1][v[k]]=0;&#125;int main(int argc, char const *argv[])&#123; scanf(\"%d\",&amp;n); for(int i=0;i&lt;n;i++)&#123; for(int j=0;j&lt;n;j++) scanf(\"%d\",&amp;g[i][j]),sum[0][i]+=g[i][j],sum[1][j]+=g[i][j]; Sigma+=sum[0][i]; &#125; jc[0]=1; for(int i=1;i&lt;=n;i++) jc[i]=jc[i-1]*i%mod; scanf(\"%d\",&amp;K); for(int i=1;i&lt;=K;i++) scanf(\"%d%d\",&amp;u[i],&amp;v[i]); dfs(1,0,Sigma,0); printf(\"%lld %lld\\n\",ans1,ans2); return 0;&#125; å›¾ä¹¦åˆ—è¡¨æ—¶é—´é™åˆ¶ï¼š1sç©ºé—´é™åˆ¶ï¼š256MB Descriptionç°åœ¨å°Gä½œä¸ºå›¾ä¹¦ç®¡ç†å‘˜ï¼Œä»–çš„ç¬¬ä¸€ä»½å·¥ä½œæ˜¯é‡æ–°å®‰æ’ä¸€äº›å›¾ä¹¦ã€‚ä»–å¾—åˆ°äº†ä¸€å¼ åˆ—è¡¨ï¼Œæ¯ä¸ªè¡¨é¡¹å…·æœ‰ä»¥ä¸‹æ ¼å¼ï¼šCATEGORY1/CATEGORY 2/â€¦./CATEGORY n/BOOKNAMEè¿™è¡¨ç¤ºå›¾ä¹¦BOOKNAMEä½äºç›®å½•CATEGORY nä¸‹, ç›®å½•CATEGORY n ä½äºç›®å½•CATEGORY n-1ä¸‹ï¼Œç›®å½•CATEGORY n-1ä½äºç›®å½•CATEGORY n-2ä¸‹ï¼Œ ä»¥æ­¤ç±»æ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªè¡¨é¡¹æ˜¯ç”±æœ€åçš„ä¸€æœ¬å›¾ä¹¦ï¼Œä»¥åŠè¯¥å›¾ä¹¦æ‰€å±çš„è‹¥å¹²ç›®å½•æŒ‰ç…§å±‚çº§ä¾æ¬¡ç»„æˆçš„ã€‚æˆ‘ä»¬ç§°CATEGORY1ä¸ºä¸€çº§ç›®å½•ï¼Œè€ŒCATEGORY 2ä¸ºäºŒçº§ç›®å½•ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä¾‹å¦‚ï¼š MATH/GRAPH THEORY ART/HISTORY/JAPANESE HISTORY/JAPANESE ACIENT HISTORY ART/HISTORY/CHINESE HISTORY/THREE KINDOM/RESEARCHES ON LIUBEI ART/HISTORY/CHINESE HISTORY/CHINESE MORDEN HISTORY ART/HISTORY/CHINESE HISTORY/THREE KINDOM/RESEARCHES ON CAOCAO å°Gè®¤ä¸ºè¿™ä»½åˆ—è¡¨å¾ˆä¸å®¹æ˜“é˜…è¯»å’ŒæŸ¥æ‰¾ï¼Œäºæ˜¯ä»–å†³å®šæŒ‰ç…§ä»¥ä¸‹è§„åˆ™åˆ¶ä½œä¸€ä»½æ–°åˆ—è¡¨ï¼Œç”¨ç¼©è¿›æ¥ä½“ç°å›¾ä¹¦ä¸ç›®å½•ä¹‹é—´çš„å±‚çº§å…³ç³»ï¼š nçº§ç›®å½•ä¹‹å‰æœ‰$4\\times (n-1)$ä¸ªç©ºæ ¼çš„ç¼©è¿›ã€‚ ç›´æ¥éš¶å±äºnçº§ç›®å½•çš„å›¾ä¹¦å‰æœ‰$4\\times n$ä¸ªç©ºæ ¼çš„ç¼©è¿›ã€‚ ç›´æ¥éš¶å±äºç›®å½•Xç›®å½•ä¸å›¾ä¹¦æŒ‰ç…§å­—å…¸åºåˆ—åœ¨ç›®å½•Xä¹‹åï¼Œä½†æ‰€æœ‰ç›®å½•ä½äºæ‰€æœ‰å›¾ä¹¦ä¹‹å‰ã€‚ æ‰€æœ‰ä¸€çº§ç›®å½•æŒ‰ç…§å­—å…¸åºå…ˆååˆ—å‡ºã€‚ ä¾‹å¦‚ï¼Œä¸Šé¢çš„åˆ—è¡¨è½¬åŒ–åå°†å˜ä¸ºï¼š ART HISTORY CHINESE HISTORY THREE KINDOM RESEARCHES ON CAOCAO RESEARCHES ON LIUBEI CHINESE MORDEN HISTORY JAPANESE HISTORY JAPANESE ACIENT HISTORY MATH GRAPH THEORY è¯·å†™ä¸€ä¸ªç¨‹åºå¸®åŠ©å°Gå®Œæˆè¿™é¡¹å·¥ä½œã€‚ Inputè¾“å…¥åŸåˆ—è¡¨ï¼Œå…±åŒ…å«ä¸è¶…è¿‡30æœ¬å›¾ä¹¦ï¼Œä»¥ä¸€ä¸ªæ•°å­—0ç»“å°¾ã€‚æ¯è¡Œåˆ—å‡ºä¸€ä¸ªè¡¨é¡¹ï¼Œè¡¨é¡¹æ˜¯ä¸€ä¸ªç”±å¤§å†™å­—æ¯ã€æ•°å­—ã€â€œ/â€å’Œç©ºæ ¼æ„æˆçš„å­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸è¶…è¿‡100ã€‚ä¸€æœ¬å›¾ä¹¦å¯èƒ½åœ¨åˆ—è¡¨ä¸­å‡ºç°å¤šæ¬¡ï¼Œä½†åœ¨è½¬åŒ–åçš„åˆ—è¡¨ä¸­ï¼Œå®ƒåº”è¯¥åªå‡ºç°ä¸€æ¬¡ã€‚ä½†æ˜¯è‹¥åŒåçš„å›¾ä¹¦æˆ–ç›®å½•è‹¥åœ¨ä¸åŒçš„ç›®å½•ç»“æ„ä¸‹ï¼Œåˆ™è®¤ä¸ºä»–ä»¬æ˜¯ä¸ç›¸åŒçš„ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªå›¾ä¹¦æˆ–ç›®å½•ç”±ä»¥å®ƒçš„åå­—ä¸ºç»“å°¾çš„å‰ç¼€å”¯ä¸€ç¡®å®šã€‚ Outputè¾“å‡ºæ–°åˆ—è¡¨ã€‚æœ¬è¯•é¢˜é‡‡ç”¨é€å­—èŠ‚æ¯”è¾ƒï¼Œè¡Œæœ«è¯·å‹¿è¾“å‡ºå¤šä½™ç©ºæ ¼ï¼Œæ–‡æœ«ä»¥æ°å¥½ä¸€ä¸ªæ¢è¡Œç¬¦ç»“å°¾ã€‚ Sample Input B/A B/A B/B 0 A1/B1/B32/B7 A1/B/B2/B4/C5 A1/B1/B2/B6/C5 A1/B1/B2/B5 A1/B1/B2 A1/B1/B2/B1 A1/B3/B2 A3/B1 A0/A1 0 Sample Output B A B A0 A1 A1 B B2 B4 C5 B1 B2 B6 C5 B1 B5 B32 B7 B2 B3 B2 A3 B1 Solutionæ¨¡æ‹Ÿé¢˜ï¼Œå°†æ¯è¡Œæ•°æ®è¯»å…¥åï¼Œå…ˆåœ¨æ•´ä¸ªå­—ç¬¦ä¸²åé¢åŠ ä¸Šä¸€ä¸ªâ€™/â€˜æ–¹ä¾¿å¤„ç†ï¼Œæ¯æ¬¡åˆ°ä¸€ä¸ªâ€™/â€˜ï¼Œå°†å‰é¢çš„ä¸€ä¸²å­—ç¬¦å–å‡ºï¼Œæ ¹æ®å…¶æ˜¯å¦åœ¨è¡Œæœ«åˆ¤æ–­æ˜¯ç›®å½•è¿˜æ˜¯ä¹¦ç±ï¼Œå¹¶ä½œæ ‡è®°,ç„¶åè®°å½•åˆ°å­ç›®å½•åˆ—è¡¨ä¸­ï¼Œè®°å½•æ—¶æ³¨æ„åˆ¤é‡å¤ï¼Œåªæœ‰åœ¨å½“å‰å­ç›®å½•ä¸­æ²¡æœ‰çš„åç§°æ‰æ–°å»ºï¼Œå¦åˆ™ç›´æ¥è¿›å…¥å·²æœ‰çš„ç›®å½• å¯¹æ¯ä¸€ä¸ªç›®å½•æˆ‘ä»¬ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•å…¶å­ç›®å½•ï¼Œæœ€åä¼šå½¢æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæ³¨æ„ï¼Œä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰ä¸€çº§ç›®å½•å®šä¸ºä¸€ä¸ªè™šæ‹Ÿå‡ºæ¥çš„æ ¹ç›®å½•çš„å­ç›®å½• å°†æ‰€æœ‰æ•°æ®è¯»å®Œä¹‹åï¼Œå°†æ¯ä¸€ä¸ªå­ç›®å½•åˆ—è¡¨æŒ‰ç…§é¢˜ç›®è§„å®šçš„é¡ºåºè¿›è¡Œæ’åºï¼Œç„¶åä»è™šæ‹Ÿçš„æ ¹ç›®å½•å¼€å§‹dfsæŒ‰ç…§é¡ºåºè¾“å‡ºå°±å¯ä»¥äº† Code123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960#include &lt;cstdio&gt;#include &lt;string&gt;#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;cstring&gt;using namespace std;inline void read(string &amp;s)&#123; s.clear(); char ch=getchar(); while((ch&lt;'A'||ch&gt;'Z')&amp;&amp;(ch&lt;'0'||ch&gt;'9')&amp;&amp;ch!=' ') ch=getchar(); while(ch!='\\n'&amp;&amp;ch!='\\r') s+=ch,ch=getchar();&#125;string s[1600],st,now;int fa,lens,flg,cnt,son[1600][100],isbook[1600],is;int cmp(const int &amp;x,const int &amp;y)&#123; return isbook[x]==isbook[y]?s[x]&lt;s[y]:isbook[x]&lt;isbook[y];&#125;void dfs(int u,int dep)&#123; if(u)&#123; for(int i=1;i&lt;=4*(dep-1);i++) putchar(' '); cout&lt;&lt;s[u]&lt;&lt;endl; &#125; for(int i=1;i&lt;=son[u][0];i++) dfs(son[u][i],dep+1);&#125;int main(int argc, char const *argv[])&#123; read(st); while(st[0]!='0'||st.length()&gt;1)&#123; st+='/'; lens=st.size(); now.clear(); fa=0; for(int i=0;i&lt;lens;i++)&#123; if(st[i]=='/')&#123; flg=is=0; if(i==lens-1) is=1; for(int j=1;j&lt;=son[fa][0];j++)&#123; if(s[son[fa][j]]==now&amp;&amp;is==isbook[son[fa][j]])&#123; fa=son[fa][j]; flg=1; break; &#125; &#125; if(flg) &#123;now.clear();continue;&#125; s[++cnt]=now; son[fa][++son[fa][0]]=cnt; isbook[cnt]=is; fa=cnt; now.clear(); continue; &#125; now+=st[i]; &#125; read(st); &#125; for(int i=0;i&lt;=cnt;i++) sort(son[i]+1,son[i]+son[i][0]+1,cmp); dfs(0,0); return 0;&#125; é‡åŒ–äº¤æ˜“æ—¶é—´é™åˆ¶ï¼š1sç©ºé—´é™åˆ¶ï¼š128MB Description ç”±äºåŸé¢˜é¢å®åœ¨å¤ªç½—å—¦ï¼Œç¬”è€…ç¨å¾®ç®€åŒ–äº†ä¸€ä¸‹ ç»™å‡º$n$ä¸ªæ•°ï¼Œè¡¨ç¤º$n$å¤©ä¸­è‚¡ç¥¨çš„ä»·æ ¼ï¼Œæ¯å¤©å¯ä»¥ä¹°è¿›æˆ–å–å‡ºä¸€è‚¡ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆä¹Ÿä¸åšæ±‚$n$å¤©åçš„æœ€å¤§æ”¶ç›Š Inputæ¯ä¸ªæµ‹è¯•ç‚¹åŒ…å«è‹¥å¹²ç»„æ•°æ®ï¼Œä»¥EOFç»“å°¾ã€‚å¯¹äºæ¯ç»„æ•°æ®ï¼šç¬¬ä¸€è¡Œ1ä¸ªæ•´æ•°Nã€‚ç¬¬äºŒè¡ŒNä¸ªæ­£æ•´æ•°ï¼Œç›¸é‚»ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨1ä¸ªç©ºæ ¼éš”å¼€ï¼Œè¡¨ç¤ºæ¯ä¸€å¤©è‚¡ç¥¨çš„ä»·æ ¼ã€‚ Outputå¯¹äºæ¯ç»„æ•°æ®ï¼Œé¦–å…ˆæŒ‰æ ·ä¾‹æ‰€ç¤ºçš„æ ¼å¼â€œCase #k:â€è¾“å‡ºè¯¥ç»„æ•°æ®çš„ç¼–å·ï¼Œç„¶åè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºapplepiæœ€å¤§èƒ½å¤Ÿè·å¾—çš„åˆ©æ¶¦ã€‚ Sample Input 6 2 6 7 3 5 6 8 1 2 3 4 5 6 7 8 10 15831 47573 60015 51368 32460 34125 43074 75172 54014 93578 Sample Output Case #1: 8 Case #2: 16 Case #1: 161084 Hintå¯¹äº$50%$çš„æ•°æ®ï¼Œ$1\\leq N\\leq 1000$ã€‚å¯¹äº$100%$çš„æ•°æ®ï¼Œ$1\\leq N\\leq 100000$ï¼Œè‚¡ç¥¨ä»·æ ¼ä¸è¶…è¿‡$100000$ï¼Œæ¯ä¸ªæµ‹è¯•ç‚¹è‡³å¤šåŒ…å«$5$ç»„æ•°æ®ã€‚ Solution è€ƒåœºä¸Šæƒ³äº†åŠå¤©è´ªå¿ƒï¼Œæœ€åè¿˜æ˜¯åªæ‰“äº†50åˆ†çš„æš´åŠ›ï¼Œç»“æœå‘ç°åªæ˜¯è‡ªå·±çš„è´ªå¿ƒå§¿åŠ¿æ°´å¹³ä¸å¤Ÿå•Š æˆ‘ä»¬å…ˆé»˜è®¤æ¯å¤©éƒ½æ˜¯å–å‡ºçš„ï¼Œç„¶åç»´æŠ¤ä¸€ä¸ªå †ï¼Œå°†æ¯å¤©çš„ä»·æ ¼æ‰”ä¸¤ä¸ªè¿›å»ï¼Œæ—¢ç„¶è¦å–å‡ºï¼Œé‚£è‡ªç„¶å¾—æœ‰ç›¸åº”çš„ä¹°å…¥ï¼Œä¹Ÿå°±æ˜¯ä»å †ä¸­å–å‡ºä¸€ä¸ªä»·æ ¼ï¼Œæ¯å¤©å°†ç­”æ¡ˆåŠ ä¸Šå½“å¤©ä»·æ ¼å‡å»å–å‡ºçš„ä»·æ ¼ã€‚ç¬¬$n$å¤©åçš„ç­”æ¡ˆå°±æ˜¯è¾“å‡º é‚£ä¹ˆæ¥è¯æ˜ä¸€ä¸‹è¿™ä¸ªè´ªå¿ƒæ­£ç¡®æ€§ é¦–å…ˆåœ¨è´ªå¿ƒè¿‡ç¨‹ä¸­ä¸€ä¸ªå–å‡ºä¸€å®šå¯¹åº”ä¸€ä¸ªä¹°å…¥ï¼Œå¹¶ä¸”æ¯ä¸€æ—¶åˆ»å †ä¸­çš„ä»·æ ¼éƒ½æ˜¯åœ¨è¯¥æ—¶åˆ»ä»¥å‰çš„ï¼Œæ˜¯å¯ä»¥é€‰æ‹©çš„ã€‚è¿™æ ·å°±ç¬¦åˆäº†é¢˜æ„ é‚£ä¹ˆä¸ºä»€ä¹ˆè¿™æ ·è´ªå¿ƒæœ€ä¼˜å‘¢ï¼Ÿè¦ç†è§£è‹¥ä¸€å¤©çš„ä»·æ ¼æ²¡æœ‰ä»å †ä¸­å–å‡ºï¼Œåˆ™è¯¥å¤©çš„æ“ä½œæ—¶å–å‡ºï¼Œè‹¥å–å‡ºä¸€æ¬¡åˆ™æ˜¯ä¸æ“ä½œï¼Œè‹¥å–å‡ºä¸¤æ¬¡åˆ™æ˜¯ä¹°å…¥ è€Œæ¯æ¬¡ä¹°å…¥éƒ½æ˜¯ä»¥å½“å‰å¯é€‰çš„æœ€ä½ä»·æ ¼ä¹°å…¥çš„ï¼Œç­”æ¡ˆè‡ªç„¶æœ€ä¼˜äº† è¦æ³¨æ„ï¼Œç”±äºC++çš„ä¼˜å…ˆé˜Ÿåˆ—é»˜è®¤æ˜¯å¤§æ ¹å †ï¼Œç¨‹åºå®ç°æ—¶å‹å…¥çš„æ˜¯ä»·æ ¼çš„ç›¸åæ•°ï¼Œå’Œæè¿°ä¸å¤ªä¸€æ · Code1234567891011121314151617181920#include &lt;cstdio&gt;#include &lt;queue&gt;using namespace std;int x,T,n;long long ans;priority_queue&lt;int&gt;q;int main(int argc, char const *argv[])&#123; while(scanf(\"%d\",&amp;n)!=EOF)&#123; T++,ans=0; while(!q.empty()) q.pop(); for(int i=1;i&lt;=n;i++)&#123; scanf(\"%d\",&amp;x); q.push(-x),q.push(-x); ans+=x+q.top(); q.pop(); &#125; printf(\"Case #%d: %lld\\n\",T,ans); &#125; return 0;&#125; å°è±¡å’Œè€é¼ æ—¶é—´é™åˆ¶ï¼š1sç©ºé—´é™åˆ¶ï¼š128MB Description è¿˜æ˜¯é‚£å¥è¯ï¼ŒåŸé¢˜é¢å¥½ç½—å—¦å•Šï¼Œæ¥zipä¸€ä¸‹ ç»™å®šä¸€ä¸ª$n\\times m$çš„ç½‘æ ¼å›¾ï¼Œå·¦ä¸Šè§’ä¸º$(1,1)$ ï¼Œå³ä¸‹è§’ä¸º$(n,m)$ ï¼Œæ¯ä¸ªç‚¹ä¸Šå¯èƒ½æœ‰è‹¥å¹²åªè€é¼ ã€‚ ç°åœ¨è¦ä»æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿æ²¿é€”é‡åˆ°çš„è€é¼ æ•°é‡æœ€å°‘(â€œé‡åˆ°â€çš„å®šä¹‰æ˜¯åœ¨è·¯å¾„ä¸ŠæŸä¸€ç‚¹çš„å››è”é€šå¿«å†…ï¼Œç›¸åŒè€é¼ ä¸é‡å¤è®¡æ•°)ï¼Œèµ°çš„æ—¶å€™åªèƒ½å‘ä¸‹æˆ–å‘å³ã€‚ Inputç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼Œ$n$ å’Œ $m$ã€‚ æ¥ä¸‹æ¥ä¸€ä¸ª $n \\times m$ çš„çŸ©é˜µè¡¨ç¤ºåŠ¨ç‰©å›­çš„åœ°å›¾ã€‚å…¶ä¸­ a_{i,j} è¡¨ç¤ºç¬¬ i è¡Œç¬¬ j åˆ—ä¸Šè€é¼ çš„æ•°é‡ã€‚ è‹¥ $a_{i,j}=0$ åˆ™è¡¨ç¤ºå½“å‰ä½ç½®ä¸Šæ²¡æœ‰è€é¼ ï¼ˆ$(1,1)$ä¹Ÿå¯èƒ½å­˜åœ¨è€é¼ ï¼‰ã€‚ Outputè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè·¯çº¿æœ€å°çš„æ•°é‡æ˜¯å¤šå°‘ã€‚ Sample Input 3 9 0 0 1 0 0 0 0 0 1 1 1 1 1 1 1 0 1 0 1 0 0 1 0 0 1 0 0 Sample Output 9 Hintå¯¹äº $10%$ çš„æ•°æ®ï¼Œ$1\\leq N,M\\leq 5$ã€‚å¯¹äº $100%$ çš„æ•°æ®ï¼Œ$1\\leq N,M\\leq 1000$ ï¼Œ $0\\leq A_{i,j}\\leq 100$ã€‚ Solution ä¸€å¼€å§‹å†™äº†ä¸ªè®°æœå¦„æƒ³èƒ½è¿‡ï¼Œç»“æœå‘ç°è‡ªå·±å¤ªå¤©çœŸäº†ã€‚ã€‚ã€‚è¿˜å¥½DPå¹¶ä¸éš¾æƒ³ å•ç‹¬è€ƒè™‘æ¯ä¸€æ­¥é‡åˆ°çš„è€é¼ æ•°é‡ï¼Œå‘ç°åªæœ‰ä¸Šä¸€æ­¥èµ°ä¹‹å‰æ‰€å¤„çš„ä½ç½®æœ‰å¯èƒ½ä¸è¿™ä¸€æ­¥èµ°å®Œåæ‰€å¤„ä½ç½®ä¸Šé‡åˆ°çš„è€é¼ æœ‰é‡å¤ã€‚ é‚£ä¹ˆæˆ‘ä»¬ç”¨ $f[0..1][i][j]$ è¡¨ç¤ºä¸Šä¸€æ­¥æ˜¯å‘ä¸‹è¿˜æ˜¯å‘å³ï¼Œ$i,j$ è¡¨ç¤ºæ‰€å¤„ä½ç½®ï¼Œè¿™æ · $f[0][i][j]$ å°±ä» $f[i-1][j]$ ä¸¤ç§çŠ¶æ€è½¬ç§»è¿‡æ¥ï¼Œ $f[1][i][j]$ ä» $f[i][j-1]$ è½¬ç§»è¿‡æ¥ æ³¨æ„åˆå§‹å€¼å°† $f[0..1][1][1]$ éƒ½èµ‹æˆ $(1,1)$ èƒ½çœ‹åˆ°çš„è€é¼ æ•° Code12345678910111213141516171819202122#include &lt;cstdio&gt;#include &lt;algorithm&gt;#include &lt;cstring&gt;using namespace std;int n,m,a[1100][1100],f[2][1100][1100],tmp;int main(int argc, char const *argv[])&#123; scanf(\"%d%d\",&amp;n,&amp;m); for(int i=1;i&lt;=n;i++) for(int j=1;j&lt;=m;j++) scanf(\"%d\",&amp;a[i][j]); memset(f,0x3f,sizeof f); f[0][1][1]=f[1][1][1]=a[1][1]+a[1][2]+a[2][1]; for(register int i=1;i&lt;=n;i++) for(register int j=1;j&lt;=m;j++)&#123; tmp=a[i][j-1]+a[i][j+1]+a[i-1][j]+a[i+1][j]; if(i==1&amp;&amp;j==1) continue; f[0][i][j]=tmp+min(f[0][i-1][j]-a[i-1][j],f[1][i-1][j]-a[i-1][j]-a[i][j-1]); f[1][i][j]=tmp+min(f[0][i][j-1]-a[i][j-1]-a[i-1][j],f[1][i][j-1]-a[i][j-1]); &#125; printf(\"%d\\n\",min(f[0][n][m],f[1][n][m])); return 0;&#125; é‡å­æ¨¡å‹ æ—¶é—´é™åˆ¶ï¼š1sç©ºé—´é™åˆ¶ï¼š128MB Descriptionå° W æ‰€åœ¨å­¦æ ¡çš„ç‰©ç†å­¦æ°´å¹³å…¨å›½é—»åï¼Œå› æ­¤å¸å¼•æ¥äº†å¤§é‡æ°‘é—´ç§‘å­¦çˆ±å¥½è€…ã€‚æŸä¸€å¤©ï¼Œ ä¸€ä½è‡ªç§°èƒ½åšå‡ºè¯ºè´å°”å¥–çº§åˆ«æˆæœï¼Œé¢ è¦†äººç±»ç‰©ç†å­¦æ¡†æ¶çš„æ°‘é—´ç§‘å­¦çˆ±å¥½è€…æ‹¦ä½äº†å° Wï¼Œ å’Œå° W åˆ†äº«äº†ä¸€ç§å° W é—»æ‰€æœªé—»çš„é‡å­æ¨¡å‹ï¼š ä¸€ä¸ªé‡å­çš„çŠ¶æ€å¯ä»¥ç”¨ä¸€ä¸ªæœ‰åºä¸‰å…ƒç»„æ¥è¡¨ç¤ºï¼Œå¦‚æœè¯¥é‡å­çš„çŠ¶æ€æ˜¯$(x,y,z)$ï¼Œåˆ™èƒ½å¤Ÿå‘ç”Ÿå¦‚ä¸‹å…­ç§ä¹‹ä¸€çš„è·ƒè¿ï¼Œè½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼ˆå¦‚æœåŸçŠ¶æ€$(x,y,z)$æ»¡è¶³è¿™ç§è·ƒè¿å‘ç”Ÿçš„å‰ææ¡ä»¶çš„è¯ï¼‰ã€‚ å‰ææ¡ä»¶ è·ƒè¿åçŠ¶æ€ $z &lt; min(2y-x,x)$ æˆ–è€… $z &gt; max(2y-x,x)$ $(2y-x,y,z)$ $z &lt; min(2x-y,y)$ æˆ–è€… $z &gt; max(2x-y,y)$ $(x,2x-y,z)$ $y &lt; min(2z-x,x)$ æˆ–è€… $y &gt; max(2z-x,x)$ $(2z-x,y,z)$ $y &lt; min(2x-z,z)$ æˆ–è€… $y &gt; max(2x-z,z)$ $(x,y,2x-z)$ $x &lt; min(2y-z,z)$ æˆ–è€… $x &gt; max(2y-z,z)$ $(x,y,2y-z)$ $x &lt; min(2z-y,y)$ æˆ–è€… $x &gt; max(2z-y,y)$ $(x,2z-y,z)$ æ‰€æœ‰çš„é‡å­çš„åˆå§‹çŠ¶æ€éƒ½æ˜¯$(i,j,k)$ï¼Œä¸”æ€»æ»¡è¶³ $i+k=2Â·j$ ï¼Œç°åœ¨å¯¹äºä»»æ„çš„ä¸€ä¸ªçŠ¶æ€$(x,y,z)$ ï¼Œ å®šä¹‰ä¸‰å…ƒå‡½æ•° $dist(x,y,z) = (ğ‘–,ğ‘—,ğ‘˜)$ æœ€å°‘éœ€è¦ $ğ‘‘ğ‘–ğ‘ ğ‘¡(ğ‘¥,ğ‘¦,ğ‘§)$ æ¬¡è·ƒè¿å¯ä»¥å˜æˆçŠ¶æ€ $(ğ‘¥,ğ‘¦,ğ‘§)$ ã€‚è¿™ä½ æ°‘é—´ç§‘å­¦çˆ±å¥½è€…åŒæ—¶å£°ç§°ï¼Œå¦‚æœå°†ä¸€ä¸ªé‡å­ä¸€ç”Ÿä¸­æ‰€æœ‰è¾¾åˆ°è¿‡çš„çœ‹ä½œä¸€ä¸ªé›†åˆ S,é‚£ä¹ˆ S å°† æ»¡è¶³: $|S| = n$ $max(ğ‘‘ğ‘–ğ‘ ğ‘¡(ğ‘¥,ğ‘¦,ğ‘§)|(ğ‘¥,ğ‘¦,ğ‘§) âˆˆ ğ‘†) = ğ‘š$ ä»–æƒ³çŸ¥é“æœ‰å¤šå°‘ç§ä¸åŒçš„é›†åˆ S æ»¡è¶³ä¸Šè¿°æ¡ä»¶ã€‚ Input 5 ä¸ªä»¥ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼ši j k n m Outputå«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„é›†åˆ S æœ‰å¤šå°‘ç§ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œä½ åªè¦è¾“ å‡ºè¿™ä¸ªæ•°å­—å¯¹ 2016 å–æ¨¡çš„ç»“æœã€‚ Sample Input 1 2 3 2 1 1 2 3 3 2 Sample Output 2 4 Hintå¯¹äº $30%$ çš„æµ‹è¯•æ•°æ® $n,m \\leq 10$å¯¹äº $50%$ çš„æµ‹è¯•æ•°æ® $m,n \\leq 50$å¯¹äº $100%$ çš„æµ‹è¯•æ•°æ® $m,n \\leq 150$ ï¼Œ $âˆ’50 \\leq i,j,k \\leq 50$ Solutionæ‰¾ç‚¹å€¼ä»£è¿›å»ï¼Œå‘ç°å…¶å®æ¯ç§çŠ¶æ€ $(x,y,z)$ éƒ½åˆšå¥½ä¼šç¬¦åˆä¸‰ç§æ¡ä»¶(é™¤äº†$(x,y,z)$æ—¶ç­‰å·®æ•°åˆ—çš„æƒ…å†µ)ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä»»ä½•æ—¶åˆ»é‡å­éƒ½å¯ä»¥è·³è·ƒåˆ°ä¸‰ç§çŠ¶æ€ï¼Œå…¶ä¸­æœ‰ä¸€ç§ä¼šä¸å½“å‰çŠ¶æ€çš„ä¸Šä¸€çŠ¶æ€é‡å¤ é‚£ä¹ˆä¸€ä¸ªåˆå§‹çŠ¶æ€ $(i,j,k)$ çš„æ‰€æœ‰å¯åˆ°è¾¾çš„çŠ¶æ€å‘ˆç°ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘å½¢æ€ï¼Œé‚£å°±å¯ä»¥ç”¨æ ‘å½¢DPäº† é¦–å…ˆé¢˜ç›®è¦æ±‚çŠ¶æ€é›†åˆä¸­æœ‰ $n$ ç§çŠ¶æ€ï¼Œ å¹¶ä¸”å…¶ä¸­ä¸åˆå§‹çŠ¶æ€ $dist$ æœ€å¤§çš„ä¸º $m$ã€‚ä¹Ÿå°±æ˜¯è¯´è¦æ‰¾åˆ°åŒ…å«å®Œå…¨äºŒå‰æ ‘ä¸Š $n$ ä¸ªç‚¹çš„é›†åˆï¼Œ å¹¶ä¸”è‡³å°‘åŒ…å«ä¸€ä¸ªç¬¬ $m$ å±‚çš„ç‚¹ã€‚ ç”±äºæ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œæ‰€ä»¥åŒä¸€å±‚çš„èŠ‚ç‚¹éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒDPæ—¶æšä¸¾ç¬¬å‡ å±‚å°±å¯ä»¥äº† ç”¨ $f[i][j][0..1]$ è¡¨ç¤ºå½“å‰æšä¸¾åˆ°çš„ç»“ç‚¹å¤„åœ¨ç¬¬ $i$ å±‚ï¼Œé›†åˆä¸­å·²ç»æœ‰ $j$ ä¸ªç»“ç‚¹ï¼Œ $0..1$ è¡¨ç¤ºæ˜¯å¦å¯ä»¥åˆ°è¾¾ç¬¬ $m$ å±‚DPæ—¶ä»ä¸‹å¾€ä¸Šæšä¸¾å±‚æ•°ï¼Œæ¯æ¬¡ä»ä¸‹ä¸€å±‚è½¬ç§»è¿‡æ¥ ç„¶åæšä¸¾é›†åˆä¸­çš„æ€»èŠ‚ç‚¹ä¸ªæ•°å’Œå·¦å„¿å­é›†åˆä¸­çš„ç‚¹æ•°å°±å¯ä»¥äº† å‘ç°å…¶å® $i$ è¿™ä¸€ç»´å¯ä»¥æ»šåŠ¨æ‰ï¼Œé‚£å°±æ»šåŠ¨ä¸€ä¸‹å‘— Code123456789101112131415161718192021222324#include &lt;cstdio&gt;#include &lt;cstring&gt;const int mod=2016;using namespace std;int f[2][160][2],x,y,z,n,m,dep;int main(int argc, char const *argv[])&#123; scanf(\"%d%d%d%d%d\",&amp;x,&amp;y,&amp;z,&amp;n,&amp;m); f[m&amp;1][1][1]=f[m&amp;1][0][0]=1; for(int i=m-1;i&gt;=0;i--)&#123; dep=i&amp;1; //ç”¨äºæ»šåŠ¨æ•°ç»„ memset(f[dep],0,sizeof f[dep]); //æ»šåŠ¨æ—¶è®°å¾—åˆå§‹åŒ– for(int j=0;j&lt;=n;j++) for(int k=0;k&lt;j;k++)&#123; (f[dep][j][0]+=f[!dep][k][0]*f[!dep][j-k-1][0])%=mod; (f[dep][j][1]+=f[!dep][k][1]*f[!dep][j-k-1][0]%mod +f[!dep][k][1]*f[!dep][j-k-1][1]%mod +f[!dep][k][0]*f[!dep][j-k-1][1]%mod)%=mod; &#125; f[dep][0][0]=1; &#125; printf(\"%d\\n\",f[0][n][1]);//ç­”æ¡ˆä¸ºæ ¹èŠ‚ç‚¹ä¸‹çŠ¶æ€æ•°ä¸ºn,ä¸”èƒ½åˆ°è¾¾ç¬¬må±‚çš„æ–¹æ¡ˆæ•° return 0;&#125; abcdæ—¶é—´é™åˆ¶ï¼š1sç©ºé—´é™åˆ¶ï¼š128MB Descriptionæœ‰4ä¸ªé•¿åº¦ä¸º$N$çš„æ•°ç»„$a,b,c,d$ã€‚ç°åœ¨éœ€è¦ä½ é€‰æ‹©$N$ä¸ªæ•°æ„æˆæ•°ç»„$e$ï¼Œæ•°ç»„ $e$ æ»¡è¶³ $a_i \\leq e_i \\leq b_i$ä»¥åŠ \\Sigma_{i=1}^n e_i âˆ— c_i=0å¹¶ä¸”ä½¿å¾— \\Sigma_{i=1}^n e_i âˆ— d_iæœ€å¤§ã€‚ Inputè¾“å…¥æ–‡ä»¶åä¸º$abcd.in$ã€‚è¾“å…¥æ–‡ä»¶å…± $N+1$ è¡Œã€‚ç¬¬ 1 è¡ŒåŒ…å«1ä¸ªæ­£æ•´æ•°$N$ã€‚ç¬¬ $i+1$ è¡ŒåŒ…å«4ä¸ªæ•´æ•° $a[i],b[i],c[i],d[i]$ ã€‚ Outputè¾“å‡ºæ–‡ä»¶åä¸º $abcd.out$ ã€‚è¾“å‡ºå…±1è¡Œï¼ŒåŒ…å«1ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ‰€ç»™å‡ºå…¬å¼çš„æœ€å¤§å€¼ã€‚è¾“å…¥æ•°æ®ä¿è¯ä¸€å®šæœ‰è§£ã€‚ Sample Input 5 -1 1 2 5 -2 2 1 2 0 1 1 3 -2 -1 3 10 -2 2 3 9 10 1 10 1 7 -10 10 2 0 -10 10 2 2 -10 10 2 0 1 10 1 0 -10 10 2 0 10 10 2 0 1 10 1 0 -10 10 2 0 Sample Output 2 90 Hintå¯¹äº $100\\%$ çš„æ•°æ®ï¼Œ$N\\leq 200 , -25\\leq a[i]&lt;b[i]\\leq 25 , 1\\leq c[i]\\leq 20 , 0\\leq p[i]\\leq 100000$ ã€‚ Solutionä»¤ num[i]=e[i]-a[i] , åˆ™ 0â‰¤num[i]â‰¤b[i]-a[i] ï¼Œ \\Sigma e[i]*c[i]=\\Sigma (num[i]+a[i])*c[i] = 0\\Rightarrow \\Sigma num[i]*c[i] = \\Sigma (-a[i]*c[i])éœ€è¦æ±‚ \\Sigma e[i]*d[i] = \\Sigma num[i]*d[i] + \\Sigma a[i]*d[i] çš„æœ€å¤§å€¼ æ‰€ä»¥ $b[i]-a[i]$ æ˜¯ç‰©å“æ•°é‡é™åˆ¶ï¼Œnum[i] æ˜¯ i ç‰©å“çš„é€‰å–æ•°é‡ï¼Œc[i] æ˜¯ç‰©å“å¤§å°ï¼Œ$\\Sigma (-a[i]*c[i])$ æ˜¯èƒŒåŒ…å®¹é‡ï¼Œ$d[i]$ æ˜¯ç‰©å“ä»·å€¼ã€‚åŸé—®é¢˜å°±å˜æˆäº†å¤šé‡èƒŒåŒ…é—®é¢˜ã€‚ ç„¶åç”¨å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–ä¸€ä¸‹å°±å¯ä»¥Aæ‰æ­¤é¢˜ Code123456789101112131415161718#include &lt;cstdio&gt;#include &lt;algorithm&gt;using namespace std;int a[210],b[210],c[210],d[210],ans,n;int f[100010],v;int main(int argc, char const *argv[])&#123; scanf(\"%d\",&amp;n); for(int i=1;i&lt;=n;i++) scanf(\"%d%d%d%d\",&amp;a[i],&amp;b[i],&amp;c[i],&amp;d[i]), v-=a[i]*c[i],ans+=a[i]*d[i]; for(int i=1;i&lt;=v;i++) f[i]=-2e9; for(int i=1;i&lt;=n;i++) for(int j=v;j&gt;=0;j--) for(int k=0;k*c[i]&lt;=j&amp;&amp;k&lt;=b[i]-a[i];k++) f[j]=max(f[j],f[j-c[i]*k]+d[i]*k); printf(\"%d\\n\",f[v]+ans); return 0;&#125;","tags":[]},{"title":"ã€ç½‘ç»œæµ24é¢˜ã€‘å¤ªç©ºé£è¡Œè®¡åˆ’","date":"2018-07-27T07:35:49.000Z","path":"2018/07/27/wangluoliu24titaikongfeixingjihua/","text":"å…³é”®è¯ï¼šæœ€å¤§æƒé—­åˆå­å›¾ æœ€å°å‰² ç›¸å…³é¢˜ç›®ï¼š$Luogu2762$ $Loj6001$ Solutionè¿™é“é¢˜æ˜¯æ±‚ä¸€ä¸ªæœ€å¤§æƒé—­åˆå­å›¾ç„¶åå¯ä»¥è½¬åŒ–ä¸ºæœ€å°å‰²é—®é¢˜ï¼Œæ±‚ä¸€ä¸‹æœ€å¤§æµå°±å¯ä»¥äº† å…·ä½“ç»†èŠ‚ä¸è°ˆ æ¯”è¾ƒéº»çƒ¦çš„æ˜¯å¦‚ä½•æ±‚æ–¹æ¡ˆä¼¼ä¹æœ‰ç‚¹éš¾æƒ³æˆ‘ä»¬åœ¨æ®‹é‡ç½‘ç»œä¸­ä»æºç‚¹æ²¿ç€æ‰€æœ‰æœ‰æ®‹ä½™å®¹é‡çš„è¾¹éå†ï¼Œæ‰€æœ‰éå†åˆ°çš„ç‚¹æ‰€ä»£è¡¨çš„å®éªŒå’Œå™¨æéƒ½æ˜¯è¦ç”¨åˆ°çš„ ä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿé¦–å…ˆæ‰€æœ‰æºç‚¹çš„æœ‰æ®‹ä½™å®¹é‡çš„å‡ºè¾¹æ‰€æŒ‡å‘çš„å®éªŒè‚¯å®šæ˜¯è¦åšçš„ï¼Œè¿™æ ·å°±ä¼šéå†åˆ°è¿™äº›å®éªŒè¦ç”¨åˆ°çš„å™¨æï¼Œç„¶åè¿™äº›å™¨æçš„ä¸€éƒ¨åˆ†è´¹ç”¨å¯èƒ½ä¼šç”±æ²¡æœ‰éå†åˆ°çš„å®éªŒçš„ç›ˆåˆ©æ‰¿æ‹…è¿™æ—¶å°±ä¼šä»è¿™äº›å™¨æçš„åå‘è¾¹éå†åˆ°é‚£äº›å®éªŒï¼Œé‚£äº›å®éªŒéœ€è¦çš„å™¨æåˆä¼šè¢«éå†åˆ° ç„¶åå°±å¦‚æ­¤åå¤åå¤å’¯ï¼Œæœ€åæ‰€æœ‰è¢«éå†åˆ°çš„ç‚¹éƒ½æ˜¯éœ€è¦çš„ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667#include &lt;cstdio&gt;#include &lt;ctype.h&gt;#include &lt;algorithm&gt;using namespace std;inline int read(int &amp;x)&#123; x=0; int f=1; char ch=getchar(); while(!isdigit(ch))&#123;if(ch=='-') f=-1; ch=getchar();&#125; while(isdigit(ch)) x=(x&lt;&lt;3)+(x&lt;&lt;1)+ch-48, ch=getchar(); return ch!='\\r'&amp;&amp;ch!='\\n';&#125;int to[1000],nxt[1000],head[200],w[1000],s,t,dep[200],cunt[200];int cur[200],sum,maxflow,x,n,m,cnt=1,a[600],vis[110];inline void add(int u,int v,int val)&#123; to[++cnt]=v,w[cnt]=val, nxt[cnt]=head[u],head[u]=cnt;&#125;inline void link(int u,int v,int val)&#123; add(u,v,val),add(v,u,0);&#125;int dfs(int u,int maxflow)&#123; if(u==t) return maxflow; int flow=0; for(int i=cur[u];i;i=nxt[i])&#123; cur[u]=i; if(w[i]&amp;&amp;dep[to[i]]+1==dep[u])&#123; int now=dfs(to[i],min(w[i],maxflow-flow)); flow+=now; w[i]-=now; w[i^1]+=now; if(maxflow==flow) return flow; &#125; &#125; cur[u]=head[u]; if(--cunt[dep[u]]==0) dep[s]=n+m+2; cunt[++dep[u]]++; return flow;&#125;void dfs(int u)&#123; vis[u]=1; for(int i=head[u];i;i=nxt[i]) if(!vis[to[i]]&amp;&amp;w[i]) dfs(to[i]);&#125;int main(int argc, char const *argv[])&#123; read(n),read(m); s=n+m+1; t=s+1;cunt[0]=t; for(int i=1;i&lt;=n;i++)&#123; read(x),link(s,i,x),sum+=x; while(read(x)) link(i,x+n,2e9); link(i,x+n,2e9); &#125; for(int i=1;i&lt;=m;i++) read(a[i]),link(i+n,t,a[i]); while(dep[s]&lt;n+m+2) maxflow+=dfs(s,2e9); for(int i=1;i&lt;=n;i++) if(vis[i]) printf(\"%d \",&amp;i); puts(\"\"); for(int i=n+1;i&lt;=n+m;i++) if(vis[i]) printf(\"%d \",&amp;i-n); puts(\"\"); printf(\"%d\\n\",sum-maxflow); return 0;&#125;","tags":[{"name":"ç½‘ç»œæµ","slug":"ç½‘ç»œæµ","permalink":"http://blog.southe3n.cf/tags/ç½‘ç»œæµ/"}]},{"title":"[NOI2018]å½’ç¨‹","date":"2018-07-25T08:27:39.000Z","path":"2018/07/25/noi2018guicheng/","text":"å…³é”®è¯ï¼š $kruskal$é‡æ„æ ‘ï¼Œå€å¢ï¼Œæœ€çŸ­è·¯ ç›¸å…³é¢˜ç›®ï¼š$Luogu4768$ $Loj2718$ Solutioné¦–å…ˆé¢˜æ„è¦æ±‚å‡ºå‘ç‚¹èƒ½åˆ°è¾¾çš„ç‚¹ä¸­ä¸1å·ç‚¹çš„æœ€è¿‘è·ç¦»é‚£ä¹ˆæˆ‘ä»¬å…ˆç”¨ $dijstra$ æ±‚å‡ºåœ¨åŸå›¾ä¸­æ¯ä¸ªç‚¹ä¸1å·ç‚¹çš„æœ€çŸ­è·¯ è‡³äºä¸ºä»€ä¹ˆä¸ç”¨$spfa$ã€‚ã€‚ã€‚å‡ºé¢˜äººè¯­å½•â€”â€” å…³äºSPFAï¼Œå®ƒæ­»äº† ã€æ‰‹åŠ¨æ»‘ç¨½ã€‘ è¿™ä¸ªä¸è°ˆï¼Œæˆ‘ä»¬ç»§ç»­é‚£æ€ä¹ˆæ‰¾åœ¨æŸä¸€æ°´ä½ä¸å‡ºå‘ç‚¹è¿é€šçš„ç‚¹æœ‰é‚£äº›å•Šï¼Ÿä¸å‡ºå‘ç‚¹è¿é€šçš„è¦æ±‚æ˜¯è·¯å¾„ä¸Šæ‰€æœ‰è¾¹çš„æµ·æ‹”å‡é«˜äº$p$ è¿™ä¸ªéœ€è¦ç”¨åˆ°$kruskal$é‡æ„æ ‘,æˆ‘ä»¬æŒ‰ç…§è¾¹çš„æµ·æ‹”ä»å¤§åˆ°å°æ’åºï¼Œå»ºç«‹é‡æ„æ ‘å¯ä»¥å‘ç°å› ä¸ºæ˜¯å°æ ¹å †ï¼Œè‹¥æ ¹èŠ‚ç‚¹çš„æƒå€¼å¤§äº$p$ï¼Œåˆ™å®ƒçš„æ•´é¢—å­æ ‘åœ¨$p$çš„æ°´ä½ä¸‹éƒ½æ˜¯è¿é€šçš„ æˆ‘ä»¬å¯ä»¥ç”¨æ ‘ä¸Šå€å¢æ¥å¯»æ‰¾æƒå€¼å¤§äº$p$çš„æ·±åº¦æœ€å°çš„ç»“ç‚¹ï¼Œè¿™æ ·æ‰¾å‡ºæ¥çš„å­æ ‘å°±æ˜¯åŒ…å«å‡ºå‘ç‚¹çš„æœ€å¤§çš„è”é€šå— ç„¶åè‡³äºå¦‚ä½•ç»´æŠ¤ä¸€ä¸ªå­æ ‘ä¸­ $dis$ çš„æœ€å°å€¼ï¼Œå†™ä¸ª$dfs$å‘—ï¼Œé¡ºä¾¿è¿˜å¯ä»¥æŠŠå€å¢çš„åˆå§‹å€¼èµ‹äº† æ€»ç»“ä¸€ä¸‹ æ±‚æœ€çŸ­è·¯$\\Rightarrow$å»ºç«‹$kruskal$é‡æ„æ ‘$\\Rightarrow$ $dfs$ç»´æŠ¤å­æ ‘æœ€å°$dis$$\\Rightarrow$å€å¢æ±‚è§£ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102#include &lt;cstdio&gt;#include &lt;algorithm&gt;#include &lt;cstring&gt;#include &lt;queue&gt;#include &lt;ctype.h&gt;const int N=400010,M=1010000;using namespace std;int T,n,m,to[M],head[M],nxt[M],w[M],cnt,vis[N];int fa[N],f[N][21],tot;long long dis[N],sum[N];struct p1&#123; int u,v,a; inline bool operator &lt;(const p1 &amp;x)const &#123;return a&gt;x.a;&#125;&#125;e[N&lt;&lt;1];struct pai_r&#123; int val,id; inline bool operator &lt;(const pai_r &amp;x)const&#123;return val&gt; x.val;&#125;&#125;;inline void read(int &amp;x)&#123; x=0; int f=1; char ch=getchar(); while(!isdigit(ch)) &#123;if(ch=='-') f=-1;ch=getchar();&#125; while(isdigit(ch)) x=x*10+ch-48,ch=getchar(); x*=f;&#125;inline void read(int &amp;a,int &amp;b)&#123;read(a),read(b);&#125;inline void read(int &amp;a,int &amp;b,int &amp;c,int &amp;d)&#123;read(a,b),read(c,d);&#125;inline void clean_map()&#123;memset(head,0,sizeof head); cnt=0;&#125;//æ¸…é›¶è¾¹è¡¨inline void add(int u,int v,int l)&#123; to[++cnt]=v,w[cnt]=l; nxt[cnt]=head[u],head[u]=cnt;&#125; //åŸå›¾åŠ è¾¹inline void add(int u,int v)&#123; to[++cnt]=v,nxt[cnt]=head[u]; head[u]=cnt;&#125; //Kruskalé‡æ„æ ‘åŠ è¾¹priority_queue&lt;pai_r&gt;q;inline void dijstra()&#123; memset(dis,0x7f,sizeof dis); dis[1]=0; memset(vis,0,sizeof vis); q.push(&#123;0,1&#125;); while(!q.empty())&#123; int u=q.top().id; q.pop(); if(vis[u]) continue; vis[u]=1; for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(dis[v]&gt;dis[u]+w[i])&#123; dis[v]=dis[u]+w[i]; q.push(&#123;dis[v],v&#125;); &#125; &#125; &#125;&#125;int getf(int x)&#123;return x==fa[x]?x:fa[x]=getf(fa[x]);&#125;inline void kruskal()&#123; sort(e+1,e+m+1); clean_map(); tot=n; for(int i=1;i&lt;=n*2;i++) fa[i]=i; for(int i=1,u,v;i&lt;=m;i++)&#123; u=getf(e[i].u),v=getf(e[i].v); if(u==v) continue; w[++tot]=e[i].a; add(tot,u),add(u,tot); add(v,tot),add(tot,v); fa[u]=fa[v]=tot; &#125;&#125;void dfs(int u,int ff)&#123; sum[u]=dis[u]; f[u][0]=ff; for(int i=head[u];i;i=nxt[i])&#123; if(to[i]==ff) continue; dfs(to[i],u); sum[u]=min(sum[u],sum[to[i]]); &#125;&#125;int main(int argc, char const *argv[]) &#123; scanf(\"%d\",&amp;T); while(T--)&#123; read(n,m); clean_map(); for(int i=1,u,v,l,a;i&lt;=m;i++) read(u,v,l,a),add(u,v,l),add(v,u,l),e[i]=&#123;u,v,a&#125;; dijstra(); //æ±‚å‡ºæœ€çŸ­è·¯ kruskal(); //å»ºç«‹Kruskalé‡æ„æ ‘ç¡®ä¿å°æ ¹å †çš„æ€§è´¨ dfs(tot,0); //å¯»æ‰¾ä¸€æ£µå­æ ‘ä¸­disæœ€å°çš„ç‚¹ for(int i=1;i&lt;=20;i++) for(int j=1;j&lt;=tot;j++) f[j][i]=f[f[j][i-1]][i-1]; int q,k,s; long long lastans=0; read(q,k),read(s); for(int i=1,v,p;i&lt;=q;i++)&#123; read(v,p); v=(v+k*lastans-1)%n+1; p=(p+k*lastans)%(s+1); for(int i=20;i&gt;=0;i--) if(w[f[v][i]]&gt;p) v=f[v][i]; //å€å¢å‘ä¸Šè·³ï¼Œå¯»æ‰¾æ ¹ç»“ç‚¹æƒå€¼å¤§äºpçš„æœ€å¤§çš„å­æ ‘ printf(\"%lld\\n\",lastans=sum[v]); &#125; &#125; return 0;&#125;","tags":[{"name":"Kruskalé‡æ„æ ‘","slug":"Kruskalé‡æ„æ ‘","permalink":"http://blog.southe3n.cf/tags/Kruskalé‡æ„æ ‘/"},{"name":"å€å¢","slug":"å€å¢","permalink":"http://blog.southe3n.cf/tags/å€å¢/"},{"name":"æœ€çŸ­è·¯","slug":"æœ€çŸ­è·¯","permalink":"http://blog.southe3n.cf/tags/æœ€çŸ­è·¯/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘Kruskalé‡æ„æ ‘","date":"2018-07-22T02:05:58.000Z","path":"2018/07/22/xuexibijikruskalchonggoushu/","text":"æœ€åŸºæœ¬çš„ç”¨é€”å°±æ˜¯ç»´æŠ¤è¿é€šå›¾ä¸­è·¯å¾„æƒå€¼çš„æœ€å€¼é—®é¢˜ ç›¸å…³é¢˜ç›®ï¼š$ã€BZOJ3732ã€‘Network$ -ä¸»è¦æ€æƒ³æœ¬æ¥å¯¹äºä¸€ä¸ªè¿é€šå›¾ä¸­çš„è·¯å¾„æœ€å€¼ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯å»ºç«‹æœ€å°ç”Ÿæˆæ ‘ï¼Œç„¶åå¯¹ä¸¤ç‚¹åœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­çš„è·¯å¾„æš´åŠ›æ±‚æœ€å€¼æˆ–è€…ç”¨æ ‘å‰–åŠ çº¿æ®µæ ‘çš„æ–¹æ³• ä½†æ˜¯è¿™æ ·è¦ä¹ˆæ…¢ï¼Œè¦ä¹ˆå®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦è¿™æ—¶å€™å¯ä»¥ç”¨åˆ°ä¸€ç§å«Kruskalé‡æ„æ ‘çš„ç®—æ³• å®ç°æ–¹å¼æ˜¯åœ¨Kruskalè¿è¾¹æ—¶ä¸ç›´æ¥è¿è¾¹ï¼Œè€Œæ˜¯æ–°å»ºä¸€ä¸ªç‚¹æƒä¸ºè¯¥è¾¹è¾¹æƒçš„ç»“ç‚¹å°†è¿™æ¡è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹çš„æ•´é¢—å­æ ‘è¿åˆ°è¯¥èŠ‚ç‚¹ä¸Šä½œä¸ºå„¿å­ï¼Œå„ä¸ªå­æ ‘çš„æ ¹ç”¨å¹¶æŸ¥é›†ç»´æŠ¤ä¸€ä¸‹å°±å¯ä»¥äº† è¿™æ ·å»ºå‡ºæ¥çš„æ ‘å…·æœ‰ä¸€äº›æ€§è´¨ï¼š1. æ˜¯ä¸€ä¸ªå¤§æ ¹å †ï¼ˆå› ä¸ºKruskalè¿è¾¹æ—¶è¾¹æƒç”±å°åˆ°å¤§ï¼‰2. åŸæ ‘å’Œæ–°æ ‘ä¸¤ç‚¹é—´è·¯å¾„ä¸Šçš„è¾¹æƒ/ç‚¹æƒæœ€å¤§å€¼ç›¸ç­‰ç„¶åæŠŠæ€§è´¨1ï¼Œ2ç»¼åˆèµ·æ¥æˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼šåŸæ ‘ä¸Šä¸¤ç‚¹é—´è¾¹æƒæœ€å¤§å€¼ç­‰äºæ–°æ ‘ä¸Šä¸¤ç‚¹çš„lcaçš„ç‚¹æƒ åˆ©ç”¨è¿™ä¸ªæ€§è´¨å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ±‚è·¯å¾„æœ€å€¼äº† ä¸‹é¢æ˜¯ç¤ºæ„å›¾ 1 æ³¨æ„åœ¨æ–°æ ‘ä¸­çš„åœ†ç‚¹ä¸­çš„æ•°å­—è¡¨ç¤ºåŸæ ‘ä¸­çš„ç‚¹çš„ç¼–å·ï¼Œå®ƒä»¬æ˜¯æ²¡æœ‰ç‚¹æƒçš„ è€Œæ–¹ç‚¹ä»£è¡¨çš„å°±æ˜¯æ–°å»ºçš„ç‚¹ï¼Œå…¶ä¸­çš„æ•°å­—è¡¨ç¤ºçš„æ˜¯å…¶ç‚¹æƒ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061#include &lt;cstdio&gt;#include &lt;algorithm&gt;const int N=31000;using namespace std;struct node&#123;int u,v,w;&#125;e[N];int cmp(const node &amp;x,const node &amp;y)&#123;return x.w&lt;y.w;&#125;int n,m,k,fa[N],to[N&lt;&lt;1],nxt[N&lt;&lt;1],head[N],cnt,val[N],tot;int size[N],son[N],dep[N],top[N];inline void add(int u,int v)&#123; to[++cnt]=v,nxt[cnt]=head[u]; head[u]=cnt;&#125;int getf(int x)&#123;return fa[x]==x?x:fa[x]=getf(fa[x]);&#125;void dfs1(int u,int ff)&#123; size[u]=1; dep[u]=dep[ff]+1; fa[u]=ff; for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(v==ff) continue; dfs1(v,u); size[u]+=size[v]; if(size[v]&gt;size[son[u]]) son[u]=v; &#125;&#125;void dfs2(int u,int topp)&#123; top[u]=topp; if(son[u]) dfs2(son[u],topp); for(int i=head[u];i;i=nxt[i]) if(to[i]!=fa[u]&amp;&amp;to[i]!=son[u]) dfs2(to[i],to[i]);&#125;inline int lca(int u,int v)&#123; while(top[u]!=top[v])&#123; if(dep[top[u]]&lt;dep[top[v]]) swap(u,v); u=fa[top[u]]; &#125; if(dep[u]&gt;dep[v]) swap(u,v); return u;&#125;int main(int argc, char const *argv[]) &#123; scanf(\"%d%d%d\",&amp;n,&amp;m,&amp;k); for(int i=1;i&lt;=m;i++) scanf(\"%d%d%d\",&amp;e[i].u,&amp;e[i].v,&amp;e[i].w); for(int i=1;i&lt;=2*n-1;i++) fa[i]=i; tot=n; sort(e+1,e+m+1,cmp); for(int i=1;i&lt;=m;i++)&#123; int fx=getf(e[i].u),fy=getf(e[i].v); if(fx==fy) continue; val[++tot]=e[i].w; add(tot,fx),add(tot,fy); fa[fx]=fa[fy]=tot; &#125; dfs1(tot,0),dfs2(tot,tot); int x,y; while(k--)&#123; scanf(\"%d%d\",&amp;x,&amp;y); printf(\"%d\\n\",val[lca(x,y)]); &#125; return 0;&#125;","tags":[{"name":"Kruskalé‡æ„æ ‘","slug":"Kruskalé‡æ„æ ‘","permalink":"http://blog.southe3n.cf/tags/Kruskalé‡æ„æ ‘/"}]},{"title":"ã€ç½‘ç»œæµ24é¢˜ã€‘é¤å·¾è®¡åˆ’é—®é¢˜","date":"2018-07-20T09:31:00.000Z","path":"2018/07/20/wangluoliu24ticanjinjihuawenti/","text":"å…³é”®è¯ï¼šæœ€å°è´¹ç”¨æœ€å¤§æµ ç›¸å…³é¢˜ç›®ï¼š$Luogu1251$ Solutionè¿™é“é¢˜æ±‚çš„æ˜¯è§„å®šçŠ¶æ€ä¸‹çš„æœ€å°è´¹ç”¨ï¼Œå¯ä»¥æƒ³åˆ°ç”¨è´¹ç”¨æµ é¦–å…ˆè¿˜æ˜¯æ¥è®²å¦‚ä½•å»ºæ¨¡ï¼ˆæ¯•ç«Ÿç½‘ç»œæµä¹Ÿå°±æ˜¯ä¸ªå»ºæ¨¡ã€‚ã€‚ï¼‰ é¦–å…ˆè€ƒè™‘å¦‚ä½•æ»¡è¶³æ¯å¤©çš„é¤å·¾æ•°é‡è¿™ä¸€æœ€é‡è¦çš„é™åˆ¶æ¡ä»¶ï¼Œå¯ä»¥æƒ³åˆ°ä»æ¯ä¸€å¤©å‘æ±‡ç‚¹è¿ä¸€æ¡å®¹é‡ä¸º$r[i]$ï¼ˆç¬¬ $i$ å¤©æ‰€éœ€é¤å·¾æ•°é‡ï¼‰ï¼Œè´¹ç”¨ä¸º0 è·å–é¤å·¾çš„æ–¹å¼æœ‰ä¸‰ç§â€”â€”1. ä»¥å•ä»·$a$ä¹°æ–°çš„2. å°†æ—§é¤å·¾ä»¥å•ä»·$c$é€å»å¿«æ´—åº—ï¼Œ$b$å¤©åæ‰èƒ½ç”¨3. å°†æ—§é¤å·¾ä»¥å•ä»·$e$é€å»å¿«æ´—åº—ï¼Œ$d$å¤©åæ‰èƒ½ç”¨ æˆ‘ä¸€å¼€å§‹æ˜¯è¿™ä¹ˆæƒ³çš„ï¼šå¯¹äºä¹°æ–°çš„ï¼Œä»æºç‚¹å‘æ¯å¤©è¿ä¸€æ¡å®¹é‡$inf$è´¹ç”¨ä¸º$a$çš„è¾¹å¯¹äºå¿«æ´—åº—ï¼Œä»æ¯å¤©å‘$b$å¤©åè¿ä¸€æ¡å®¹é‡$inf$è´¹ç”¨$c$çš„è¾¹å¯¹äºå¿«æ´—åº—ï¼Œä»æ¯å¤©å‘$d$å¤©åè¿ä¸€æ¡å®¹é‡$inf$è´¹ç”¨$e$çš„è¾¹å¯¹äºé¤å·¾å¯ä»¥ç•™ç€ï¼Œä»æ¯å¤©å‘ç¬¬äºŒå¤©è¿ä¸€å¤©å®¹é‡$inf$è´¹ç”¨0çš„è¾¹ è¿™æ ·æ˜¾ç„¶æ˜¯é”™çš„ è¿™æ ·å»ºæ¨¡æ²¡æœ‰åˆ†å¼€æ—§é¤å·¾å’Œæ–°é¤å·¾ï¼Œå¹¶ä¸èƒ½ä¿è¯é€å»æ´—çš„æ˜¯å¦æ˜¯ç”¨è¿‡çš„ æ–°é¤å·¾æ‹¿å»æ´—å²‚ä¸å°¬å“‰ï¼Ÿ è€ƒè™‘æ‹†ç‚¹ï¼ŒæŠŠä¸€å¤©æ‹†æˆæ—§é¤å·¾å’Œæ–°é¤å·¾ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ç”¨$A$å’Œ$B$è¡¨ç¤º æ¯å¤©è¦ç”¨$r[i]$ä¸ªé¤å·¾ï¼Œåˆ†åˆ«ä»$B$å‘æ±‡ç‚¹ã€ä»æºç‚¹å‘$A$è¿å®¹é‡$r[i]$è´¹ç”¨0çš„è¾¹ï¼Œè¡¨ç¤ºç”¨$r[i]$æ¡æ–°é¤å·¾ï¼Œäº§ç”Ÿ$r[i]$æ¡æ—§é¤å·¾ å¯¹äºä¸‰ç§è·å–é¤å·¾æ–¹å¼ï¼Œä¹°æ–°çš„ï¼šä»æºç‚¹å‘$B$è¿ä¸€æ¡å®¹é‡$inf$è´¹ç”¨$a$çš„è¾¹å¿«æ´—åº—ï¼šä»å½“å¤©çš„$A$å‘$b$å¤©åçš„$B$è¿ä¸€æ¡å®¹é‡$inf$è´¹ç”¨$c$çš„è¾¹æ…¢æ´—åº—ï¼šåŒå¿«æ´—åº— ç„¶åç”±äºé¤å·¾å¯ä»¥æ”¾ç€ä¸ç®¡ï¼Œä»æ¯å¤©çš„$A$å‘ç¬¬äºŒå¤©çš„$A$è¿å®¹é‡$INF$è´¹ç”¨0çš„è¾¹ å°±å®Œäº†ã€‚ã€‚ï¼ˆä¸»è¦è¿˜æ˜¯ä¸€ä¸ªæ‹†ç‚¹æ¯”è¾ƒéš¾æƒ³ï¼Ÿï¼‰ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;algorithm&gt;const int E=210000,N=4100;using namespace std;int n,r[N],a,b,c,d,e,s,t;int head[N],to[E],w[E],f[E],nxt[E],cnt=1;int last[N],pre[N],maxflow[N],vis[N],q[E],he,tail;long long dis[N],ans;inline void add(int u,int v,int val,int cost)&#123; to[++cnt]=v,w[cnt]=val,f[cnt]=cost; nxt[cnt]=head[u],head[u]=cnt;&#125;inline void link(int u,int v,int val,int cost)&#123; add(u,v,val,cost); add(v,u,0,-cost);&#125;inline void spfa()&#123; memset(dis,0x3f,sizeof dis); dis[s]=0; memset(maxflow,0x3f,sizeof maxflow); memset(vis,0,sizeof vis); vis[s]=1; he=1,tail=0; q[++tail]=s; while(he&lt;=tail)&#123; int u=q[he]; he++; vis[u]=0; for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(w[i]&gt;0&amp;&amp;dis[v]&gt;dis[u]+f[i])&#123; pre[v]=u,last[v]=i; dis[v]=dis[u]+f[i]; maxflow[v]=min(maxflow[u],w[i]); if(!vis[v]) q[++tail]=v,vis[v]=1; &#125; &#125; &#125;&#125;int main(int argc, char const *argv[]) &#123; scanf(\"%d\",&amp;n); for(int i=1;i&lt;=n;i++) scanf(\"%d\",&amp;r[i]); scanf(\"%d%d%d%d%d\",&amp;a,&amp;b,&amp;c,&amp;d,&amp;e); s=2*n+1,t=2*n+2; for(int i=1;i&lt;=n;i++) link(s,i,r[i],0),link(s,i+n,2e9,a),link(i+n,t,r[i],0); //äº§ç”Ÿçš„æ—§é¤å·¾ æ–°ä¹°é¤å·¾ å‘æ±‡ç‚¹è¿è¾¹ä¿è¯æ¯å¤©é¤å·¾æ•°é‡æ°å¥½ä¸ºr[i] for(int i=1;i&lt;n;i++) link(i,i+1,2e9,0); //æŠŠæ—§é¤å·¾ç•™åˆ°ç¬¬äºŒå¤© for(int i=1;i&lt;=n-b;i++) link(i,i+b+n,2e9,c); //å¿«æ´—åº— for(int i=1;i&lt;=n-d;i++) link(i,i+d+n,2e9,e); //æ…¢æ´—åº— spfa(); while(dis[t]&lt;1e9)&#123; ans+=dis[t]*maxflow[t]; for(int u=t;u!=s;u=pre[u])&#123; w[last[u]]-=maxflow[t]; w[last[u]^1]+=maxflow[t]; &#125; spfa(); &#125; printf(\"%lld\\n\",ans); return 0;&#125;","tags":[{"name":"ç½‘ç»œæµ","slug":"ç½‘ç»œæµ","permalink":"http://blog.southe3n.cf/tags/ç½‘ç»œæµ/"}]},{"title":"ã€ç½‘ç»œæµ24é¢˜ã€‘[CTSC1999]å®¶å›­","date":"2018-07-19T14:40:02.000Z","path":"2018/07/19/wangluoliu24tictsc1999jiayuan/","text":"å…³é”®è¯ï¼šç½‘ç»œæœ€å¤§æµ æšä¸¾ç­”æ¡ˆ ç›¸å…³é¢˜ç›®ï¼š$Luogu2754$ SolutionEmmmmâ€¦è¿™é“é¢˜è®©æˆ‘ä»¬æ±‚çš„æ˜¯å¯è¡Œç­”æ¡ˆæœ€å°å€¼ï¼Œæ˜¾ç„¶æ˜¯å•è°ƒçš„è¿™æ—¶å€™å¯ä»¥æƒ³åˆ°äºŒåˆ†ç­”æ¡ˆ Butï¼ å…¶å®è¿™é“é¢˜é‡Œé¢æˆ‘ä»¬ç”¨é€ä¸ªæšä¸¾ç­”æ¡ˆå¯èƒ½ä¼šæ›´å¥½ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å…ˆæ¥çœ‹å¦‚ä½•å»ºæ¨¡ ç”±æºç‚¹å‘æ¯ä¸€ä¸ªæ—¶åˆ»çš„ åœ°çƒ å»ºä¸€æ¡å®¹é‡INFçš„è¾¹ ç”±æ¯ä¸€ä¸ªæ—¶åˆ»çš„ æœˆçƒ å‘æ±‡ç‚¹å»ºä¸€æ¡å®¹é‡ä¸ºINFçš„è¾¹ ç„¶åç”±äºå¯ä»¥åœ¨ä¸€ä¸ªç©ºé—´ç«™ç­‰å€™ä»æ¯ä¸€ä¸ªç©ºé—´ç«™çš„ä¸Šä¸€æ—¶åˆ»å‘è¿™ä¸€æ—¶åˆ»çš„å¯¹åº”èŠ‚ç‚¹è¿ä¸€æ¡å®¹é‡ä¸ºINFçš„è¾¹ ç„¶åè€ƒè™‘ä¹˜é£èˆ¹å¦‚ä½•è½¬ç§»ï¼Œå°±æ˜¯ä»æ¯ä¸€è‰˜é£èˆ¹çš„ä¸Šä¸€æ—¶åˆ»æ‰€åœ¨çš„ç©ºé—´ç«™å‘ç°åœ¨æ‰€å¤„ç©ºé—´ç«™è¿ä¸€æ¡å®¹é‡ä¸ºh[i]çš„è¾¹ æ³¨æ„æ³¨æ„ï¼æ¯ä¸€ä¸ªç©ºé—´ç«™ä»¥åŠåœ°çƒæœˆçƒçš„ä¸åŒæ—¶åˆ»åœ¨å»ºå‡ºæ¥çš„æ¨¡å‹ä¸­éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç»“ç‚¹ ç„¶åå°±æ˜¯åœ¨å›¾ä¸Šè·‘ä¸€è¾¹æœ€å¤§æµï¼Œæœ€å¤§æµå°±æ˜¯åœ¨å½“å‰æ—¶é—´å†…èƒ½è¿é€å¤šå°‘äºº æœ€åæ¥è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæšä¸¾ç­”æ¡ˆåè€Œä¼šæ›´å¿« ç”±äºæ¯ä¸€æ¬¡ç­”æ¡ˆå˜å¤§æ—¶åªéœ€è¦åŠ å…¥ä¸€äº›è¾¹å’Œä¸€äº›èŠ‚ç‚¹ï¼ŒDinicç®—æ³•æ¯æ¬¡å¢å¹¿åæ„å»ºå‡ºæ¥çš„æ®‹é‡ç½‘ç»œå°±å¯ä»¥å¾—åˆ°å……åˆ†åˆ©ç”¨ï¼Œ åœ¨ä¸Šä¸€æ—¶åˆ»çš„æ®‹é‡ç½‘ç»œçš„åŸºç¡€ä¸Šç»§ç»­å¾€ä¸‹åšå°±è¡Œäº†ã€‚ è‡³äºISAPç®—æ³•æ˜¯ä¸æ˜¯ä¹Ÿèƒ½è¿™æ ·â€œç»§æ‰¿â€æˆ‘æ¯”è¾ƒèœä¸å¤ªæ¸…æ¥šã€‚ã€‚ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;algorithm&gt;const int N=110000;using namespace std;int n,m,k,h[30],r[30],s[30][30];int to[N],head[N],nxt[N],w[N],cnt=1;int S,T,tot,id[30],pre,now,maxflow,flow,dep[N],cur[N];inline void add(int u,int v,int flow)&#123; to[++cnt]=v,nxt[cnt]=head[u], w[cnt]=flow,head[u]=cnt;&#125;inline void link(int u,int v,int maxflow)&#123; add(u,v,maxflow),add(v,u,0);&#125;int q[N],he,tail;inline int bfs()&#123; memset(dep,0,sizeof dep); he=1,tail=0; q[++tail]=S,dep[S]=1; while(he&lt;=tail)&#123; int u=q[he]; he++; for(int i=head[u];i;i=nxt[i]) if(w[i]&amp;&amp;!dep[to[i]])&#123; q[++tail]=to[i]; dep[to[i]]=dep[u]+1; if(to[i]==T) return 1; &#125; &#125; return 0;&#125;int dinic(int u,int maxflow)&#123; if(u==T) return maxflow; int k,flow=0; for(int i=cur[u];i;i=nxt[i])&#123; cur[u]=i; if(w[i]&amp;&amp;dep[to[i]]==dep[u]+1)&#123; k=dinic(to[i],min(maxflow-flow,w[i])); if(!k) dep[to[i]]=0; w[i]-=k; w[i^1]+=k; flow+=k; &#125; &#125; cur[u]=head[u]; return flow;&#125;int main(int argc, char const *argv[]) &#123; scanf(\"%d%d%d\",&amp;n,&amp;m,&amp;k); for(int i=1;i&lt;=m;i++)&#123; scanf(\"%d%d\",&amp;h[i],&amp;r[i]); for(int j=0;j&lt;r[i];j++) scanf(\"%d\",&amp;s[i][j]); &#125; for(int i=1;i&lt;=m;i++) for(int j=0;j&lt;r[i];j++) if(s[i][j]==0) s[i][j]=n+1; else if(s[i][j]==-1) s[i][j]=n+2; S=1,T=2,tot=2; for(int ans=0;ans&lt;=1000;ans++)&#123; for(int i=1;i&lt;=n+2;i++) id[i]=++tot; link(S,id[n+1],2e9); link(id[n+2],T,2e9); if(ans!=0)&#123; for(int i=1;i&lt;=n+2;i++) link(id[i]-n-2,id[i],2e9); for(int i=1;i&lt;=m;i++)&#123; now=id[s[i][ans%r[i]]]; pre=id[s[i][(ans-1)%r[i]]]-n-2; link(pre,now,h[i]); &#125; &#125; while(bfs()) while(flow=dinic(S,2e9)) maxflow+=flow; if(maxflow&gt;=k) return printf(\"%d\\n\",ans),0; &#125; puts(\"0\"); return 0;&#125; PSï¼šå…¶å®æˆ‘ä»£ç ä¸­åˆ¤æ— è§£ä¾æ®ç­”æ¡ˆæ˜¯å¦è¿‡å¤§å¹¶ä¸ä¸¥è°¨ï¼Œæœ€å¥½è¿˜æ˜¯ç”¨å¹¶æŸ¥é›†ç»´æŠ¤è¿é€šæ€§æ¥åˆ¤","tags":[{"name":"ç½‘ç»œæµ","slug":"ç½‘ç»œæµ","permalink":"http://blog.southe3n.cf/tags/ç½‘ç»œæµ/"}]},{"title":"ã€ç½‘ç»œæµ24é¢˜ã€‘è´Ÿè½½å¹³è¡¡é—®é¢˜","date":"2018-07-18T09:31:22.000Z","path":"2018/07/18/wangluoliu24tifuzaipinghengwenti/","text":"å…³é”®è¯ï¼šè´¹ç”¨æµ æ”¶æ”¯å¹³è¡¡ ç›¸å…³é¢˜ç›®ï¼š$Luogu4016$ è¯´å®åœ¨ç¬¬ä¸€æ¬¡å†™è´¹ç”¨æµï¼Œä¹‹å‰ä¹Ÿåªæ˜¯å¬äººå£èƒ¡å£èƒ¡ç”¨spfaè½¬ç§»ä¹‹ç±»çš„ï¼Œå†™çš„ä¸‘è¯·è§è°… Solutionè¿™é“é¢˜è®©æˆ‘ä»¬ä½¿æ‰€æœ‰ä»“åº“çš„è´§ç‰©éƒ½å¤„äºå¹³å‡å€¼ï¼Œä¸”è¦ä½¿æ¬è¿é‡æœ€å°ï¼Œå¯ä»¥æƒ³åˆ°æ˜¯ä¸€ä¸ªè´¹ç”¨æµ å…³å»ºè¿˜æ˜¯å¦‚ä½•å»ºæ¨¡é¦–å…ˆå¦‚ä½•ä¿è¯æ‰€æœ‰ä»“åº“æœ€åéƒ½å¤„äºå¹³å‡å€¼å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´å½“ç½‘ç»œè¾¾åˆ°æœ€å¤§æµæ—¶ï¼Œæ‰€æœ‰ä»“åº“éƒ½è¾¾åˆ°å¹³å‡å€¼æˆ‘ä»¬å¯¹æ¯ä¸ªä»“åº“è®¡ç®—å…¶ä¸å¹³å‡å€¼çš„åå·®è‹¥åå·®ä¸ºæ­£ï¼Œä¹Ÿå°±æ˜¯æœ‰ä½™ï¼Œåˆ™ä»æºç‚¹å‘å…¶è¿ä¸€æ¡å®¹é‡ä¸ºåå·®å€¼çš„è¾¹è‹¥åå·®ä¸ºè´Ÿï¼Œå³ä¸è¶³ï¼Œå°±ä»è¿™ä¸ªä»“åº“å‘æ±‡ç‚¹è¿ä¸€æ¡å®¹é‡ä¸ºåå·®å€¼çš„ç›¸åæ•°çš„è¾¹é‚£ä¹ˆå½“è¿™ä¸¤ç§è¾¹éƒ½å¤„äºæ»¡æµçŠ¶æ€æ—¶ï¼Œä»“åº“ä¸­çš„è´§ç‰©æ•°å°±ç¬¦åˆå¹³å‡å€¼è¿™ä¸ªæ¡ä»¶äº† åªèƒ½å‘ç›¸é‚»çš„ä¸¤ä¸ªä»“åº“è¿è¾“ï¼Œé‚£å°±å¯¹ç›¸é‚»çš„ä»“åº“è¿è¾¹ï¼Œä¸ºäº†è¾¾åˆ°ä¸Šè¿°çš„æ»¡æµçŠ¶æ€ï¼Œæ˜¾ç„¶ç›¸é‚»ä»“åº“æ‰€è¿çš„è¾¹å®¹é‡ä¸ºæ— é™å¤§ï¼Œå› ä¸ºè´§ç‰©æ€»é‡ä¸å˜ï¼Œä¸€å®šæ”¶æ”¯å¹³è¡¡ï¼Œæ‰€ä»¥èƒ½ä¿è¯æ»¡æµ é‚£ä¹ˆå†æ¥è€ƒè™‘è´¹ç”¨å•ä»·ç”±äºæºç‚¹å’Œæ±‡ç‚¹æ˜¯è™šæ„å‡ºæ¥çš„ç‚¹ï¼Œå®ƒä»¬çš„è¾¹è´¹ç”¨è‡ªç„¶ä¸º0è€Œç›¸é‚»ä»“åº“ä¹‹é—´æ¬è¿ä¼šäº§ç”Ÿä»£ä»·ï¼Œè´¹ç”¨ä¸º1 è¿™æ ·æœ€å°è´¹ç”¨æœ€å¤§æµçš„ç»“æœå°±æ˜¯ç­”æ¡ˆäº† æœ€ååœ¨ç½—å—¦å‡ å¥è´¹ç”¨æµçš„ç»†èŠ‚(å…¶å®æ˜¯æˆ‘è‡ªå·±å†™çš„æ—¶å€™æœ‰ç‚¹å°çº ç»“çš„åœ°æ–¹)1ã€åè¾¹çš„è´¹ç”¨ä¸ºåŸè´¹ç”¨çš„ç›¸åæ•°2ã€spfaè½¬ç§»çš„åŒæ—¶è®°å½•è·¯å¾„3ã€è½¬ç§»æ—¶åŒæ—¶è½¬ç§»è·¯å¾„æ€»è´¹ç”¨å’Œè·¯å¾„æœ€å¤§æµé‡ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;algorithm&gt;using namespace std;const int inf=2e9,N=1100;int n,a[110],sum,s,t,head[110],to[N],nxt[N],w[N],cnt=1,ans;int f[N],dis[110],maxflow[110],pre[110],last[110],vis[110];inline void add(int u,int v,int val,int cost)&#123; to[++cnt]=v; nxt[cnt]=head[u]; f[cnt]=cost; w[cnt]=val; head[u]=cnt;&#125;inline void link(int u,int v,int val,int cost)&#123; //ä¾æ¬¡ä¸ºå‡ºç‚¹ï¼Œå…¥ç‚¹ï¼Œå®¹é‡ï¼Œè´¹ç”¨å•ä»· add(u,v,val,cost); add(v,u,0,-cost);&#125;int q[1100000],l,r;inline void spfa()&#123; //é€šè¿‡spfaè½¬ç§»çŠ¶æ€ memset(dis,0x3f,sizeof dis); dis[s]=0; memset(maxflow,0x3f,sizeof maxflow); memset(vis,0,sizeof vis); vis[s]=1; r=0,l=1; q[++r]=s; while(l&lt;=r)&#123; int u=q[l]; l++,vis[u]=0; for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(dis[v]&gt;dis[u]+f[i]&amp;&amp;w[i])&#123; dis[v]=dis[u]+f[i]; maxflow[v]=min(maxflow[u],w[i]); pre[v]=u, last[v]=i; //è®°å½•è¿™æ¡æœ€å°è´¹ç”¨æœ€å¤§æµçš„è·¯å¾„ if(!vis[v]) q[++r]=v,vis[v]=1; &#125; &#125; &#125;&#125;int main(int argc, char const *argv[]) &#123; scanf(\"%d\",&amp;n); s=n+1,t=n+2; for(int i=1;i&lt;=n;i++) scanf(\"%d\",&amp;a[i]),sum+=a[i]; sum/=n; for(int i=1;i&lt;=n;i++) if(a[i]-sum&gt;0) link(s,i,a[i]-sum,0); else if(a[i]-sum&lt;0) link(i,t,sum-a[i],0); //å¯¹æ¯ä¸€ä¸ªä»“åº“ï¼Œè‹¥æœ‰ä½™ï¼Œåˆ™ä»æºç‚¹å‘è¯¥ç‚¹è¿è¾¹ï¼Œè‹¥ä¸è¶³ï¼Œåˆ™ç”±è¯¥ç‚¹å‘æ±‡ç‚¹è¿è¾¹ for(int i=2;i&lt;n;i++) link(i,i-1,inf,1),link(i,i+1,inf,1); link(1,2,inf,1),link(1,n,inf,1); link(n,n-1,inf,1),link(n,1,inf,1); //æ¯ä¸€ä¸ªä»“åº“éƒ½å¯ä»¥å‘å·¦å³ä¸¤ä¸ªç›¸é‚»çš„ä»“åº“è¿è¾“ï¼Œè´¹ç”¨å•ä»·ä¸ºä¸€ spfa(); while(dis[t]&lt;1e9)&#123; ans+=maxflow[t]*dis[t]; for(int u=t;u!=s;u=pre[u])&#123; w[last[u]]-=maxflow[t]; w[last[u]^1]+=maxflow[t]; &#125; spfa(); &#125; printf(\"%d\\n\",ans); return 0;&#125;","tags":[{"name":"ç½‘ç»œæµ","slug":"ç½‘ç»œæµ","permalink":"http://blog.southe3n.cf/tags/ç½‘ç»œæµ/"}]},{"title":"ã€ç½‘ç»œæµ24é¢˜ã€‘é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜","date":"2018-07-17T13:39:40.000Z","path":"2018/07/17/wangluoliu24tifeixingyuanpeiduifanganwenti/","text":"å…³é”®è¯ï¼šç½‘ç»œæœ€å¤§æµ äºŒåˆ†å›¾æœ€å¤§åŒ¹é… ç›¸å…³é¢˜ç›®ï¼š$Luogu2756$ é¢˜é¢å°±ä¸æ”¾äº†ã€‚ã€‚å¯ä»¥ç›´æ¥å»æ´›è°·çœ‹ Solutionå…¶å®æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾æœ€å¤§åŒ¹é…ï¼Œä½†æ˜¯æ¯•ç«Ÿæ˜¯ç½‘ç»œæµ24é¢˜ï¼Œé‚£å°±ç”¨ç½‘ç»œæµæ¥åšå‘—~å»ºå›¾çš„ä¸»è¦æ–¹æ³•æ˜¯æ·»åŠ æºç‚¹ $s$ å’Œæ±‡ç‚¹ $t$ç”±æºç‚¹å‘äºŒåˆ†å›¾å·¦éƒ¨åˆ†ç‚¹è¿å®¹é‡ä¸º1çš„è¾¹ï¼Œç”±å³éƒ¨åˆ†ç‚¹å‘æ±‡ç‚¹ä¹Ÿè¿å®¹é‡ä¸º1çš„è¾¹å¯¹äºæ¯ä¸€ä¸ªå¯åŒ¹é…çš„å…³ç³»ï¼Œåœ¨ä¸¤ç‚¹ä¹‹é—´è¿ä¸€æ¡è¾¹å°±å¯ä»¥äº†ï¼Œå®¹é‡å¯ä»¥ä¸ºINFä¹Ÿå¯ä»¥ä¸º1 ç„¶åå¯¹è¿™ä¸ªå›¾è·‘ä¸€è¾¹æœ€å¤§æµï¼Œæ€»æµé‡å°±æ˜¯æœ€å¤§åŒ¹é…æ•° æ³¨æ„è¿™é“é¢˜è¿˜éœ€è¦æˆ‘ä»¬è¾“å‡ºä¸€ç§æ–¹æ¡ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬æšä¸¾å·¦éƒ¨åˆ†å„ç‚¹çš„å‡ºè¾¹ï¼Œè‹¥ç›®æ ‡ç‚¹åœ¨å³éƒ¨åˆ†è€Œä¸”æ®‹ä½™å®¹é‡ä¸º0ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªåŒ¹é… ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#include &lt;cstdio&gt;#include &lt;algorithm&gt;#include &lt;cstring&gt;using namespace std;int n,m,x,y,head[110],s,t,cnt=1,to[11000],nxt[11000],w[11000];int cur[11000],dep[300],cunt[300],ans;inline void add(int u,int v,int val)&#123; to[++cnt]=v; nxt[cnt]=head[u]; head[u]=cnt; w[cnt]=val;&#125;int dfs(int u,int maxflow)&#123; if(u==t) return maxflow; int flow=0; for(int i=cur[u];i;i=nxt[i])&#123; cur[u]=i; if(w[i]&amp;&amp;dep[to[i]]+1==dep[u])&#123; int now=dfs(to[i],min(w[i],maxflow-flow)); flow+=now; w[i]-=now; w[i^1]+=now; if(maxflow==flow) return flow; &#125; &#125; cur[u]=head[u]; if(--cunt[dep[u]]==0) dep[s]=m+2; cunt[++dep[u]]++; return flow;&#125;int main(int argc, char const *argv[]) &#123; scanf(\"%d%d\",&amp;n,&amp;m); s=m+1,t=m+2; cunt[0]=m+2; for(int i=1;i&lt;=n;i++) add(s,i,1),add(i,s,0); for(int i=n+1;i&lt;=m;i++) add(i,t,1),add(t,i,0); scanf(\"%d%d\", &amp;x,&amp;y); while(x!=-1)&#123; add(x,y,1); add(y,x,0); scanf(\"%d%d\",&amp;x,&amp;y); &#125; memset(cur,0,sizeof cur); while(dep[s]&lt;m+2) ans+=dfs(s,1e9); printf(\"%d\\n\",ans); for(int i=1;i&lt;=n;i++) for(int j=head[i];j;j=nxt[j]) if(to[j]!=s&amp;&amp;to[j]!=t&amp;&amp;!w[j]) printf(\"%d %d\\n\",i,to[j]); return 0;&#125;","tags":[{"name":"ç½‘ç»œæµ","slug":"ç½‘ç»œæµ","permalink":"http://blog.southe3n.cf/tags/ç½‘ç»œæµ/"}]},{"title":"ã€å­¦ä¹ è®¡åˆ’ã€‘ç½‘ç»œæµ24é¢˜","date":"2018-07-17T13:31:55.000Z","path":"2018/07/17/xuexijihuawangluoliu24ti/","text":"Emmmm... å¯èƒ½è¦åšä¸€åšç½‘ç»œæµ24é¢˜ï¼Ÿï¼Ÿ æˆ‘æ€ä¹ˆæ„Ÿè§‰ä¸çœ‹é¢˜è§£æˆ‘ä¸€é“éƒ½åšä¸å‡ºæ¥å•Šå–‚ï¼Ÿï¼ æ•°å­¦å»ºæ¨¡èƒ½åŠ›æå·® ä¸‹é¢æ”¾ä¸€æ”¾é“¾æ¥ é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜æ”¶æ”¯å¹³è¡¡é—®é¢˜ã€CTSC1999ã€‘å®¶å›­é¤å·¾è®¡åˆ’é—®é¢˜å¤ªç©ºé£è¡Œè®¡åˆ’","tags":[{"name":"ç½‘ç»œæµ","slug":"ç½‘ç»œæµ","permalink":"http://blog.southe3n.cf/tags/ç½‘ç»œæµ/"}]},{"title":"NOIPæ¨¡æ‹Ÿèµ› Babystep","date":"2018-07-14T11:03:47.000Z","path":"2018/07/14/noipmonisaibabystep/","text":"å…³é”®è¯ï¼šç½‘æ ¼å›¾ å¹¶æŸ¥é›† å¯¹å¶å›¾ -ä¸€å¥è¯é¢˜æ„ç»™å‡ºä¸€ä¸ª $R\\times R$ çš„ç½‘æ ¼å›¾$(R\\leq 500)$ è¿›è¡Œ$N(N\\leq 2R^2-2R)$ æ¬¡æ“ä½œ Baby å¶å°”ä¼šç‚¸æ‰ç½‘æ ¼å›¾ä¸­çš„ä¸€æ¡è¾¹ $(u, v)$ã€‚ä¹‹åä»–ä¼šå°è¯•ä» $u$ èµ°åˆ° $v$ã€‚ å¦‚æœä»–æˆåŠŸåœ°ä» $u$ èµ°åˆ° $v$ï¼Œä»–ä¼šå¾ˆé«˜å…´ï¼›å¦åˆ™ä»–ä¼šæ‰¾äººæ‰“æ¶ã€‚ ä»ç¬¬äºŒæ¬¡çˆ†ç‚¸å¼€å§‹ï¼Œæ ¹æ® Baby æ­¤æ—¶å¿ƒæƒ…çš„ä¸åŒï¼ŒBaby ä¼šç‚¸æ‰ä¸åŒçš„è¾¹ã€‚ ä½ è¢«è¦æ±‚ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå¯¹äºæ¯æ¬¡çˆ†ç‚¸ï¼Œç»™å‡ºæ­¤æ—¶ Baby æ˜¯å¦è¿˜èƒ½ä» $u $ åˆ° $v$ã€‚ -è¾“å…¥æ ¼å¼ç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ•´æ•° $R$ï¼Œä»£è¡¨ç½‘æ ¼å›¾æ˜¯ $R\\times R$ çš„ã€‚ ç¬¬äºŒè¡Œï¼Œä¸€ä¸ªæ•´æ•° $N$ï¼Œä»£è¡¨æ“ä½œæ•°ã€‚ ç¬¬ä¸‰è¡Œï¼Œå››ä¸ªæ•´æ•° $x1,y1,x2,y2$ï¼Œæè¿°äº†ç¬¬ä¸€æ¬¡çˆ†ç‚¸çš„è¾¹ã€‚ ä»¥ä¸‹ $N-1$ è¡Œï¼Œæ¯è¡Œå››ä¸ªæ•´æ•° $x1,y1,x2,y2,x1â€™,y1â€™,x2â€™,y2â€™$ï¼Œåˆ†åˆ«æè¿° Baby é«˜å…´æ—¶ç‚¸çš„è¾¹å’Œ æƒ³æ‰¾äººæ‰“æ¶æ—¶ç‚¸çš„è¾¹ã€‚ Sample Input 2 2 1 1 1 2 1 1 2 1 1 2 2 2 Sample Output HAHA DAJIA -ä¸»è¦æ€è·¯é¦–å…ˆè¦æ¸…æ¥šä»€ä¹ˆæ˜¯ç½‘æ ¼å›¾ï¼ˆå…¶å®æ˜¯å› ä¸ºæˆ‘æœ¬æ¥å¹¶ä¸çŸ¥é“ã€‚ã€‚ã€‚ï¼‰è¯´ç™½äº†å°±æ˜¯ç‚¹å‘ˆçŸ©å½¢ï¼Œæ¯ä¸ªç‚¹å‘ä¸Šä¸‹å·¦å³å„ç‚¹è¿è¾¹çš„ä¸€ä¸ªå›¾åŠå…¶ä¸ä¸¥è°¨æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰å„è¾¹æ‰€å›´æˆçš„åŒºåŸŸä¸ºåŸŸ ï¼ˆå¦‚ä¸‹å›¾å°±æ˜¯ä¸€ä¸ªç½‘æ ¼å›¾ï¼Œä¸­é—´çš„å¤§æ•°å­—è¡¨ç¤ºçš„å°±æ˜¯åŸŸçš„ç¼–å·ï¼Œè¦æ³¨æ„æ•´ä¸ªç½‘æ ¼å›¾å¤–ä¹Ÿæ˜¯ä¸€ä¸ªåŸŸï¼‰ PMJWeH.png å¯¹äºè¿™é“é¢˜ï¼Œç”±äºæ˜¯å¼ºåˆ¶åœ¨çº¿çš„ï¼Œæˆ‘ä»¬å¦‚æœè¦ç”¨å¹¶æŸ¥é›†ç»´æŠ¤è¿é€šæ€§å°±å¿…é¡»è¦æŠŠåŸæœ¬çš„åˆ è¾¹è½¬åŒ–ä¸ºè¿è¾¹æˆ‘ä»¬å¯ä»¥å‘ç°å¦‚æœä¸€æ¡è¾¹ä¸¤ä¾§çš„åŸŸæ˜¯è¿é€šçš„ï¼Œå†åˆ è¾¹ä¹‹åï¼Œè¾¹ä¸¤ç«¯çš„ç‚¹å°±ä¸å†è¿é€šäº†é‚£ä¹ˆå°±å¯ä»¥åœ¨æ¯æ¬¡æ“ä½œæ—¶ï¼Œåˆ¤æ–­è¾¹ä¸¤ä¾§çš„åŸŸæ˜¯å¦è¿é€šï¼Œè‹¥è¿é€šï¼Œåˆ™è¾“å‡ºâ€DAJIAâ€å¦åˆ™å°†ä¸¤ä¸ªåŸŸè¿é€šï¼Œè¾“å‡ºâ€HAHAâ€ è¿™ä¸ªè¿é€šæ€§å¯ä»¥ç”¨å¹¶æŸ¥é›†ç»´æŠ¤ ä»£ç 123456789101112131415161718192021222324252627#include &lt;cstdio&gt;#include &lt;algorithm&gt;using namespace std;int n,R,fa[260000],id[510][510],last,cnt,x[2],xx[2],y[2],yy[2];int getf(int x)&#123;return fa[x]==x?x:fa[x]=getf(fa[x]);&#125;inline int merge(int x, int y)&#123; if(getf(x)==getf(y)) return 1; else return fa[fa[x]]=fa[y],0;&#125;int main() &#123; scanf(\"%d%d\",&amp;R,&amp;n); for(int i=1;i&lt;R;i++) for(int j=1;j&lt;R;j++) id[i][j]=++cnt, fa[cnt]=cnt; fa[++cnt]=cnt; for(int i=1;i&lt;=n;i++)&#123; scanf(\"%d%d%d%d\",&amp;x[0],&amp;y[0],&amp;xx[0],&amp;yy[0]); if(i&gt;1) scanf(\"%d%d%d%d\",&amp;x[1],&amp;y[1],&amp;xx[1],&amp;yy[1]); int tmp; if(x[last]==xx[last]) tmp=min(y[last],yy[last]), last=merge(x[last]==1?cnt:id[x[last]-1][tmp],x[last]==R?cnt:id[x[last]][tmp]); else tmp=min(x[last], xx[last]), last=merge(y[last]==1?cnt:id[tmp][y[last]-1],y[last]==R?cnt:id[tmp][y[last]]); puts(last?\"DAJIA\":\"HAHA\"); &#125; return 0;&#125;","tags":[{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"http://blog.southe3n.cf/tags/å›¾è®º/"},{"name":"å¹¶æŸ¥é›†","slug":"å¹¶æŸ¥é›†","permalink":"http://blog.southe3n.cf/tags/å¹¶æŸ¥é›†/"}]},{"title":"NOIPåè¿æµ‹D8T1-ç¥ç‚çš‡","date":"2018-07-09T11:32:21.000Z","path":"2018/07/09/noipshilianced8t1shenyanhuang/","text":"å…³é”®è¯ï¼šæ•°è®º æ¬§æ‹‰å‡½æ•° ç›¸å…³é¢˜ç›®ï¼šå‘ç°é¢˜æºBZOJ -ä¸€å¥è¯é¢˜æ„æ±‚æ­£æ•´æ•°å¯¹$(a,b)$ ï¼Œæ±‚æ»¡è¶³ $a+b\\leq n$ ä¸” $a+b\\mid ab$ çš„æ•°å¯¹ä¸ªæ•° ä¿è¯ç­”æ¡ˆä¸è¶…è¿‡$long~long$èŒƒå›´ $n\\leq 10^{14}$ Sample Input21 Sample Output11 -ä¸»è¦æ€è·¯è®¾$gcd(a,b)=d$ , $x=\\frac{a}{d}$ï¼Œ$y=\\frac{b}{d}$ åˆ™æœ‰$(x+y)d=a+b$ ä¸”$xyd^2=ab$ $\\Rightarrow (x+y)d\\mid xyd^2$ ï¼Œå°† $d$ çº¦å»ï¼Œä¸”ç”±äº $x,y$ äº’è´¨ï¼Œæ‰€ä»¥ $(x+y),xy$ äº’è´¨ å¯ä»¥å¾—åˆ° $x+y\\mid d$ æ‰€ä»¥ $x+y\\leq d$ åˆå› ä¸º $(x+y)d \\leq n$ $\\Rightarrow x+y\\leq \\sqrt{n}$ ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æŠŠæ—¶é—´å¤æ‚åº¦é™åˆ°äº† $O(\\sqrt{n})$ ,æ˜¾ç„¶æ˜¯ç¬¦åˆè¦æ±‚çš„ é‚£ä¹ˆæˆ‘ä»¬å†è€ƒè™‘æ¯ä¸€ä¸ª $x+y$ å¯¹ç­”æ¡ˆçš„è´¡çŒ®ï¼Œæ˜¾ç„¶ $1\\leq d\\leq \\frac{n}{x+y}$ ï¼Œåˆå› ä¸º $x+y\\mid d$ æ‰€ä»¥ $d$ æœ‰ $n/(x+y)/(x+y)$ ç§å–å€¼ é‚£ä¹ˆå†æ¥è€ƒè™‘ $x+y$ æœ‰å¤šå°‘ç§æ–¹æ¡ˆï¼Œç”±äº $x,y$ äº’è´¨ï¼Œæ‰€ä»¥ $x+y,x,y$ç›¸äº’äº’è´¨ï¼Œ å› æ­¤å…¶å®æ–¹æ¡ˆæ•°å°±æ˜¯ $\\phi(x+y)$ æˆ‘ä»¬åœ¨ $1..\\sqrt{n}$ çš„èŒƒå›´å†…æšä¸¾ $x+y$ çš„å€¼ æ‰€ä»¥æœ€ç»ˆç­”æ¡ˆä¸º$\\Sigma_{i=1}^{\\sqrt{n}} \\phi(i)*n/i/i$ ä»£ç 12345678910111213141516171819202122#include &lt;cstdio&gt;#include &lt;cmath&gt;using namespace std;long long n,ans,m;int euler[11000000];void Euler(int n) &#123; for(register int i=1; i&lt;=n; i++) euler[i]=i; for(register int i=2; i&lt;=n; i++) if(euler[i]==i) for(register int j=i; j&lt;=n; j+=i) euler[j]=euler[j]/i*(i-1);&#125;int main(int argc, char const *argv[])&#123; scanf(\"%lld\",&amp;n); m=sqrt(n); Euler(m); //æ±‚sqrt(n)ä»¥å†…çš„æ¬§æ‹‰å‡½æ•° for(int i=2;i&lt;=m;i++) ans+=euler[i]*(n/i/i); //å°†ç­”æ¡ˆç´¯åŠ  printf(\"%lld\\n\",ans); return 0;&#125;","tags":[{"name":"æ•°è®º","slug":"æ•°è®º","permalink":"http://blog.southe3n.cf/tags/æ•°è®º/"}]},{"title":"[NOIPåè¿æµ‹D2T3]æœ€è¿‘å…¬å…±ç¥–å…ˆ","date":"2018-07-08T10:39:42.000Z","path":"2018/07/08/noipshilianced2t3zuijingonggongzuxian/","text":"å…³é”®è¯ï¼šDFSåº çº¿æ®µæ ‘ ç›¸å…³é¢˜ç›®ï¼šä¼¼ä¹æ˜¯å†…éƒ¨OJï¼Ÿ -ä¸€å¥è¯é¢˜æ„ç»™å‡ºä¸€é¢—ä»¥1ä¸ºæ ¹ç»“ç‚¹ï¼Œæœ‰$N(N \\leq 100000)$ä¸ªç»“ç‚¹çš„æ ‘ï¼Œåˆå§‹æ‰€æœ‰ç»“ç‚¹éƒ½æ˜¯ç™½è‰²çš„ç°åœ¨è¦è¿›è¡Œ$M(M\\leq 200000)$æ¬¡æ“ä½œï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§ï¼š1. $Modify~v$ï¼šå°†ç»“ç‚¹$v$çš„é¢œè‰²ä¿®æ”¹ä¸ºé»‘è‰²2. $Query~v$ï¼šæ‰¾åˆ°ä¸€ä¸ªé»‘è‰²ç»“ç‚¹ $u$ ,ä½¿å¾—$u$å’Œ$v$çš„æœ€è¿‘å…¬å…±ç¥–å…ˆçš„æƒå€¼å°½å¯èƒ½å¤§ï¼Œè¾“å‡ºæœ€å¤§æƒå€¼ï¼Œè‹¥æ ‘ä¸­ä¸å­˜åœ¨é»‘è‰²ç»“ç‚¹ï¼Œè¾“å‡º-$1$ Sample Input 7 7 4 3 5 7 6 5 2 1 4 2 1 7 5 6 2 2 5 3 4 Query 1 Modify 2 Modify 4 Query 3 Modify 2 Modify 5 Query 6 Sample Output -1 7 4 -ä¸»è¦æ€è·¯å†·é™åˆ†æä¸€ä¸‹ï¼Œå‘ç°æ¯ä¸ªç‚¹è¢«æŸ“é»‘çš„æ—¶å€™ï¼Œæ‰€äº§ç”Ÿçš„è´¡çŒ®å°±æ˜¯å®ƒä¸å®ƒçš„æ‰€æœ‰ç¥–å…ˆä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç‚¹è¢«æ¶‚é»‘åï¼Œå®ƒä¼šä½¿å¾—å®ƒä¸å®ƒçš„ç¥–å…ˆå¯ä»¥ä½œä¸ºæŸ¥è¯¢æŸäº›ç»“ç‚¹æ—¶çš„ç­”æ¡ˆå¯¹äºæ¯ä¸€ä¸ªç¥–å…ˆï¼Œå¸¦æ¥çš„è´¡çŒ®æ˜¯è¿™ä¸ªç¥–å…ˆçš„é™¤åŒ…å«æ¶‚é»‘ç»“ç‚¹çš„å­æ ‘ä»¥å¤–çš„æ‰€æœ‰å…¶ä»–å­æ ‘è¿™äº›å­æ ‘ä¸­çš„æ¯ä¸€ä¸ªç‚¹éƒ½å¯ä»¥ä¸è¿™ä¸ªè¢«æ¶‚é»‘çš„ç‚¹ä½œå‡º$LCA$å³ä¸ºè¿™ä¸ªç¥–å…ˆ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ¶‚é»‘æ—¶å¯¹æ¯ä¸€ä¸ªèƒ½å½±å“åˆ°çš„ç‚¹çš„ç­”æ¡ˆæš´åŠ›ä¿®æ”¹ï¼Œæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ï¼Œç”±äºæˆ‘ä»¬æ¯ä¸€æ¬¡ä¿®æ”¹ä¿®æ”¹çš„éƒ½æ˜¯ä¸€æ•´æ£µå­æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°$DFS$åº+çº¿æ®µæ ‘ï¼Œæ¥ç»´æŠ¤åŒºé—´$MAX$å€¼ï¼Œä¹Ÿå°±æ˜¯ç­”æ¡ˆ ç„¶è€Œå¦‚æœæ¯æ¬¡æ¶‚é»‘å¯¹å…¶æ¯ä¸ªç¥–å…ˆéƒ½ä¿®æ”¹ï¼Œæ˜¾ç„¶ä¼šè¢«ä¸€æ¡é“¾å¡æ‰æˆ‘ä»¬å†è¿›è¡Œæ…Œå¼ åˆ†æï¼Œå‘ç°å…¶å®å¦‚æœä¸€ä¸ªç‚¹å·²ç»è¢«ä½œä¸ºç¥–å…ˆè¿‡äº†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨å†ç»§ç»­å¾€ä¸Šä¸Šä¿®æ”¹äº† å…·ä½“çš„è¯ç”»ä¸ªå›¾åº”è¯¥å°±å¯ä»¥ç†è§£äº† ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172#include &lt;cstdio&gt;#include &lt;cstring&gt;using namespace std;int head[110000],to[210000],nxt[210000],cnt,tot;int fa[110000],val[110000],sum[110000];int ans,n,m,v,size[110000],dfn[110000];int maxn[410000];inline int max(int x,int y)&#123;return x&gt;y?x:y;&#125;inline void add(int u,int v)&#123; to[++cnt]=v; nxt[cnt]=head[u]; head[u]=cnt;&#125;//åˆ’åˆ†DFSåºvoid dfs(int u,int ff)&#123; fa[u]=ff; size[u]=1; dfn[u]=++tot; for(int i=head[u];i;i=nxt[i]) if(to[i]!=ff) dfs(to[i],u),size[u]+=size[to[i]];&#125;void modify(int u,int l,int r,int x,int y,int val)&#123; if(x&lt;=l&amp;&amp;r&lt;=y)&#123;maxn[u]=max(maxn[u],val);return;&#125; int mid=l+r&gt;&gt;1; if(x&lt;=mid) modify(u&lt;&lt;1,l,mid,x,y,val); if(y&gt;mid) modify(u&lt;&lt;1|1,mid+1,r,x,y,val);&#125;int query(int u,int l,int r,int x)&#123; if(l==r) return maxn[u]; int mid=l+r&gt;&gt;1; if(x&lt;=mid) return max(maxn[u],query(u&lt;&lt;1,l,mid,x)); else return max(maxn[u],query(u&lt;&lt;1|1,mid+1,r,x));&#125;//=====================çº¿æ®µæ ‘===================================void update(int u,int son)&#123; if(!u) return; modify(1,1,n,dfn[u],dfn[u],val[u]); for(int i=head[u];i;i=nxt[i]) if(to[i]!=son&amp;&amp;to[i]!=fa[u]) modify(1,1,n,dfn[to[i]],dfn[to[i]]+size[to[i]]-1,val[u]); if(sum[u]) return; //å¦‚æœä¸€ä¸ªç‚¹å·²ç»åšè¿‡ç¥–å…ˆäº†ï¼Œä¿®æ”¹å®Œè¿™ä¸ªç‚¹å°±ä¸éœ€è¦å‘ä¸Šè·³äº† sum[u]=1; //æ ‡è®°ä½œä¸ºç¥–å…ˆ update(fa[u],u);&#125;int main(int argc, char const *argv[])&#123; scanf(\"%d%d\",&amp;n,&amp;m); for(int i=1;i&lt;=n;i++) scanf(\"%d\",&amp;val[i]);; for(int i=1,x,y;i&lt;n;i++) scanf(\"%d%d\",&amp;x,&amp;y),add(x,y),add(y,x); dfs(1,0); char opt[20]; memset(maxn,-1,sizeof maxn); while(m--)&#123; scanf(\"%s%d\",opt,&amp;v); if(opt[0]=='Q')&#123; printf(\"%d\\n\",query(1,1,n,dfn[v])); &#125;else&#123; modify(1,1,n,dfn[v],dfn[v]+size[v]-1,val[v]); update(fa[v],v); &#125; &#125; return 0;&#125;","tags":[{"name":"çº¿æ®µæ ‘","slug":"çº¿æ®µæ ‘","permalink":"http://blog.southe3n.cf/tags/çº¿æ®µæ ‘/"},{"name":"DFSåº","slug":"DFSåº","permalink":"http://blog.southe3n.cf/tags/DFSåº/"}]},{"title":"[USACO07DEC]è§‚å…‰å¥¶ç‰›","date":"2018-07-05T10:34:57.000Z","path":"2018/07/05/usaco07decguanguangnainiu/","text":"å…³é”®è¯ï¼šäºŒåˆ†ç­”æ¡ˆ åˆ¤è´Ÿç¯ ç›¸å…³é¢˜ç›®ï¼š$Luogu2868$ -Nå¥è¯é¢˜æ„ æ‡’å¾—æ¦‚æ‹¬ï¼Œç›´æ¥æ‹‰é¢˜é¢ã€‚ã€‚è¿˜æ˜¯ä¸å·æ‡’äº† ç»™å‡ºä¸€å¼ $L(L\\leq 1000)$ä¸ªç‚¹ï¼Œ$P(P\\leq 5000)$æ¡è¾¹çš„æœ‰å‘å›¾æœ‰ç‚¹æƒå’Œè¾¹æƒï¼Œè¦æ±‚æ‰¾å‡ºä¸€ä¸ªç¯ï¼Œä½¿å…¶ ç‚¹æƒå’Œ/è¾¹æƒå’Œ å€¼æœ€å¤§ -ä¸»è¦æ€è·¯Emmmmæˆ‘ä»¬è®¾ä¸€ä¸ªç¯çš„ç‚¹æƒå’Œä¸º$sum(f[v])$,è¾¹æƒå’Œ$sum(t[e])$ç­”æ¡ˆ$ans=max(sum(f[v])/sum(t[e]))$ç§»ä¸€ä¸‹é¡¹ å¾—$sum(ansÂ·t[e])-sum(f[v])=0$é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹è¿™ä¸ª$ans$è¿›è¡ŒäºŒåˆ†äº†å¯¹äºæ¯ä¸€ä¸ª$mid$å»ºç«‹ä¸€å¼ æ–°å›¾ï¼Œæ¯æ¡è¾¹çš„å€¼$t_{new}[i]=t[i]Â·mid-f[to[i]]$ä»¥æ¯ä¸€ä¸ªç‚¹ä¸ºèµ·ç‚¹è·‘ä¸€é$dfs$-$SPFA$åˆ¤æ–­æœ‰æ²¡æœ‰è´Ÿç¯å°±å¯ä»¥äº†å¦‚æœæœ‰è´Ÿç¯ï¼Œé‚£ä¹ˆå½“å‰$mid$å°±æ˜¯å¯ä»¥è¾¾åˆ°çš„ï¼Œ$l=mid$åä¹‹$r=mid$ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041#include &lt;cstdio&gt;using namespace std;int n,m,to[5100],nxt[5100],head[1100],w[5100];int val[1100],vis[1100],cnt;double wa[5100],dis[1100];int spfa(int u) &#123; vis[u]=1; for(int i=head[u];i;i=nxt[i]) &#123; int v=to[i]; if(dis[v]&gt;dis[u]+wa[i]) &#123; dis[v]=dis[u]+wa[i]; if(vis[v]||spfa(v)) &#123;vis[u]=0;return 1;&#125; &#125; &#125; vis[u]=0; return 0; &#125;inline void add(int u, int v,int val)&#123; to[++cnt]=v; nxt[cnt]=head[u]; w[cnt]=val; head[u]=cnt;&#125;int main(int argc, char const *argv[])&#123; scanf(\"%d%d\",&amp;n,&amp;m); for(int i=1;i&lt;=n;i++) scanf(\"%d\",&amp;val[i]); for(int i=1,x,y,z;i&lt;=m;i++) scanf(\"%d%d%d\",&amp;x,&amp;y,&amp;z),add(x,y,z); double l=0,r=100007,mid; while(r-l&gt;0.000001)&#123; int flg=0; mid=(l+r)/2; for(int i=1;i&lt;=cnt;i++) wa[i]=w[i]*mid-val[to[i]]; //å»ºæ–°å›¾ for(int i=1;i&lt;=n;i++) if(spfa(i)) &#123;l=mid; flg=1;break;&#125; if(!flg) r=mid; &#125; printf(\"%.2lf\\n\",l); return 0;&#125;","tags":[{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"http://blog.southe3n.cf/tags/å›¾è®º/"},{"name":"äºŒåˆ†ç­”æ¡ˆ","slug":"äºŒåˆ†ç­”æ¡ˆ","permalink":"http://blog.southe3n.cf/tags/äºŒåˆ†ç­”æ¡ˆ/"}]},{"title":"[2018æ¹–å—çœé˜Ÿé›†è®­]circular","date":"2018-06-28T12:27:16.000Z","path":"2018/06/28/2018hunanshengduijixuncircular/","text":"å…³é”®è¯ï¼šè´ªå¿ƒ åˆ†ç±»è®¨è®º ç›¸å…³é¢˜ç›®ï¼š$BZOJ5397$ -å†™åœ¨å‰é¢Emmmmâ€¦å…¶å®æ˜¯æ¨¡æ‹Ÿçœé€‰è€ƒè¯•é¢˜ï¼Œæˆ‘å±…ç„¶å¥‡è¿¹èˆ¬åœ°èƒ½Aé¢˜äº†ï¼Ÿï¼ -ä¸€å¥è¯é¢˜æ„ä»–æœ‰ä¸€ä¸ªé•¿åº¦ä¸º$M$çš„ç¯,ç¯ä¸Šæœ‰$M$ä¸ªç­‰è·ç¦»çš„ç‚¹, æŒ‰é¡ºæ—¶é’ˆé¡ºåºä¾æ¬¡æ ‡å·ä¸º$0,1,â€¦,Mâˆ’1$ç¯ä¸Šæœ‰$N$ä¸ªçº¿æ®µ$(a_i,b_i)(1 \\leq i \\leq N)$,éœ€è¦æ³¨æ„çš„æ˜¯$(a_i,b_i)$æ‰€æŒ‡çš„çº¿æ®µæ˜¯ä»ç‚¹$a_i$é¡ºæ—¶é’ˆå»¶ä¼¸åˆ°$b_i$çš„çº¿æ®µå¸Œæœ›çŸ¥é“æœ€å¤šèƒ½é€‰å¤šå°‘ä¸ªä¸ç›¸äº¤çš„çº¿æ®µ, æ³¨æ„çº¿æ®µçš„ç«¯ç‚¹æ˜¯å…è®¸é‡åˆçš„ -ä¸»è¦æ€è·¯å¾ˆæ˜¾ç„¶$b_i \\leq a_i$çš„çº¿æ®µ(å³ç»•è¿‡$0$ç‚¹çš„çº¿æ®µ)æœ€å¤šåªä¼šè¢«é€‰ä¸€ä¸ªé‚£ä¹ˆæˆ‘ä»¬ä¸è€ƒè™‘è¿™æ ·çš„çº¿æ®µï¼Œå¯¹æ‰€æœ‰$a_i \\leq b_i$çº¿æ®µè¿›è¡Œè´ªå¿ƒè¿™æ—¶å€™æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªè´ªå¿ƒå‡ºæ¥çš„ç­”æ¡ˆè¿™æ—¶å€™å†æ¥è€ƒè™‘ç»•è¿‡$0$ç‚¹çš„çº¿æ®µï¼Œæ˜¾ç„¶è¿™æœ€å¤šåªä¼šä½¿ç­”æ¡ˆ+$1$å› æ­¤åœ¨è¿™äº›çº¿æ®µä¸­é€‰å–ä¸€ä¸ª$b_i$æœ€å°ä¸”åœ¨å½“å‰è´ªå¿ƒå‡ºæ¥çš„çº¿æ®µçš„å³ç«¯ç‚¹ä¹‹åçš„çº¿æ®µä»¥è¿™ä¸ªçº¿æ®µä¸ºèµ·ç‚¹å†è¿›è¡Œä¸€æ¬¡è´ªå¿ƒï¼Œæœ€åé€‰å–è¿™ä¸¤ç§æƒ…å†µä¸­ç­”æ¡ˆå¤§çš„é‚£ä¸ªå³å¯ å…·ä½“çš„è´ªå¿ƒç­–ç•¥å°±æ˜¯å°†æ‰€æœ‰çº¿æ®µæŒ‰å³ç«¯ç‚¹ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œå·¦ç«¯ç‚¹ä¸ºç¬¬äºŒå…³é”®å­—æ’åº ä¼˜å…ˆé€‰å³ç«¯ç‚¹è¶Šå·¦ä¸”æ»¡è¶³å½“å‰è´ªå¿ƒåˆ°çš„æœ€ç»ˆå³ç«¯ç‚¹çš„çº¿æ®µ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;struct node&#123;int x,y;&#125;a[110000];int cmp(node x,node y)&#123; return x.y==y.y?x.x&gt;y.x:x.y&lt;y.y;&#125;int n,m,now,ans,ans1;int main(int argc, char const *argv[])&#123; freopen(\"c.in\",\"r\",stdin); freopen(\"c.out\",\"w\",stdout); scanf(\"%d%d\",&amp;m,&amp;n); for(int i=1;i&lt;=n;i++)&#123; scanf(\"%d%d\",&amp;a[i].x,&amp;a[i].y); if(a[i].x&gt;a[i].y) a[i].y+=m; &#125; sort(a+1,a+n+1,cmp); int tmp=0; for(int i=1;i&lt;=n;i++) if(a[i].x&gt;=now) if(a[i].y&lt;m) now=a[i].y,ans++; else &#123; now=a[i].y;ans++; tmp=i; break; &#125; if(now-m&gt;a[1].x) ans--; if(!tmp) return printf(\"%d\\n\",ans),0; ans1=1; now=a[tmp].y-m; for(int i=1;i&lt;=n;i++) if(a[i].x&gt;=now&amp;&amp;a[i].y&lt;=a[tmp].x) now=a[i].y,ans1++; if(ans1&gt;ans) ans=ans1; printf(\"%d\\n\",ans); return 0;&#125;","tags":[{"name":"è´ªå¿ƒ","slug":"è´ªå¿ƒ","permalink":"http://blog.southe3n.cf/tags/è´ªå¿ƒ/"}]},{"title":"[CTSC2008]ç½‘ç»œç®¡ç†","date":"2018-06-26T10:12:03.000Z","path":"2018/06/26/ctsc2008wangluoguanli/","text":"å…³é”®è¯ï¼šå¸¦ä¿®ä¸»å¸­æ ‘ æ ‘é“¾å‰–åˆ† ç›¸å…³é¢˜ç›®ï¼š$Luogu4175$ $BZOJ1146$ -ä¸€å¥è¯é¢˜æ„ç»™å‡ºä¸€æ£µæ ‘èŠ‚ç‚¹æ•°ä¸º$N$ï¼Œæ¯ä¸ªç‚¹æœ‰ä¸€ä¸ªæƒå€¼ï¼Œè¦æ±‚æ”¯æŒä¸¤ç§æ“ä½œï¼š 1.æ±‚ç»“ç‚¹$u$ä¸$v$ä¹‹é—´è·¯å¾„ä¸Šç¬¬$k$å¤§çš„æƒå€¼ 2.ä¿®æ”¹æŸä¸€ç»“ç‚¹ä¸Šçš„æƒå€¼å…±$Q$æ¬¡æ“ä½œæ•°æ®èŒƒå›´:$N,Q\\leq 80000$,æƒå€¼$\\leq 10^8$ã€‚ -ä¸»è¦æ€è·¯å¯¹äºä¸€æ£µæ ‘ä¸Šçš„è·¯å¾„è¿›è¡Œæ“ä½œé¦–å…ˆæˆ‘ä»¬å¯ä»¥æƒ³åˆ°æ ‘é“¾å‰–åˆ†è€Œæ ‘é“¾å‰–åˆ†éœ€è¦ä¸€ä¸ªå¯ä»¥ç»´æŠ¤åŒºé—´ä¿¡æ¯çš„æ•°æ®ç»“æ„æ¥è¾…åŠ©é‚£ä¹ˆå¯¹äºåŠ¨æ€åŒºé—´ç¬¬$K$å¤§æ˜¾ç„¶å¯ä»¥ä½¿ç”¨å¸¦ä¿®ä¸»å¸­æ ‘çš„æ–¹æ³• æˆ‘ä»¬é¦–å…ˆå°†æ ‘è¿›è¡Œå‰–åˆ†ï¼Œå•ç‚¹ä¿®æ”¹æ—¶ä¿®æ”¹æ¯ä¸€æ£µåŒ…å«ç‚¹$u$çš„æƒå€¼çº¿æ®µæ ‘è·¯å¾„æŸ¥è¯¢æ—¶å…ˆåˆ©ç”¨æ ‘é“¾å‰–åˆ†å°†è·¯å¾„åˆ†å‰²ä¸ºå¤šæ¡$dfs$åºè¿ç»­çš„é‡é“¾è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¦æŸ¥è¯¢çš„åŒºé—´äº†ï¼Œå¯¹æ‰€æœ‰åœ¨æ ‘çŠ¶æ•°ç»„æ„ä¹‰ä¸‹åŒ…å«åœ¨è¿™äº›åŒºé—´é‡Œçš„æƒå€¼çº¿æ®µæ ‘è¿›è¡ŒæŸ¥è¯¢ï¼Œå°±å¯ä»¥æ±‚å‡ºè¿™æ¡è·¯å¾„ä¸Šçš„ç¬¬$K$å¤§äº† è·¯å¾„æŸ¥è¯¢çš„å…·ä½“å®ç° åˆ©ç”¨ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è®°å½•éœ€è¦åŠ ä¸Šå’Œå‡å»çš„çº¿æ®µæ ‘çš„ç»“ç‚¹åºå· æ¯ä¸€æ¬¡åˆ¤æ–­å½“å‰æ‰€å¤„æƒå€¼åŒºé—´çš„å³å­åŒºé—´çš„æƒå€¼æ€»ä¸ªæ•°æ˜¯å¦å¤§äºæˆ‘ä»¬æ‰€æ±‚çš„$K$ è‹¥å¤§äºç­‰äºåˆ™è¯´æ˜æ‰€æ±‚æƒå€¼åœ¨å³åŒºé—´ï¼Œå‘å³åŒºé—´æŸ¥è¯¢ è‹¥å°äºåˆ™$k$-=$rsize$,å‘å·¦åŒºé—´æŸ¥è¯¢ æ³¨æ„åœ¨å‘ä¸‹å±‚åŒºé—´æŸ¥è¯¢æ—¶å°†ä¸¤ä¸ªæ•°ç»„æ‰€å­˜çš„ç»“ç‚¹åºå·æ›´æ–° ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110#include &lt;cstdio&gt;#include&lt;memory&gt;#include &lt;cstring&gt;using namespace std;const int N=90000;int to[N&lt;&lt;1],nxt[N&lt;&lt;1],head[N],cnt,a[N],root[N],n,q;int id[N],val[N],dep[N],size[N],fa[N],top[N],son[N],dfn;int l1,l2,q1[N],q2[N];inline void add(int u,int v)&#123; to[++cnt]=v; nxt[cnt]=head[u]; head[u]=cnt;&#125;void dfs1(int u,int ff)&#123; dep[u]=dep[ff]+1; size[u]=1; fa[u]=ff; for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(v==ff) continue; dfs1(v,u); size[u]+=size[v]; if(size[v]&gt;size[son[u]]) son[u]=v; &#125;&#125;void dfs2(int u,int topp)&#123; top[u]=topp; id[u]=++dfn; val[dfn]=a[u]; if(son[u]) dfs2(son[u],topp); for(int i=head[u];i;i=nxt[i]) if(to[i]!=fa[u]&amp;&amp;to[i]!=son[u]) dfs2(to[i],to[i]);&#125;inline void query(int x,int y)&#123; l1=l2=0; while(top[x]!=top[y])&#123; if(dep[top[x]]&lt;dep[top[y]]) swap(x,y); for(int i=id[top[x]]-1;i&gt;0;i-=i&amp;-i) q1[++l1]=root[i]; for(int i=id[x];i&gt;0;i-=i&amp;-i) q2[++l2]=root[i]; x=fa[top[x]]; &#125; if(dep[x]&gt;dep[y]) swap(x,y); for(int i=id[x]-1;i&gt;0;i-=i&amp;-i) q1[++l1]=root[i]; for(int i=id[y];i&gt;0;i-=i&amp;-i) q2[++l2]=root[i];&#125;//============================æ ‘é“¾å‰–åˆ†===========================struct &#123; int tot,size[N&lt;&lt;8],lson[N&lt;&lt;8],rson[N&lt;&lt;8]; void ins(int &amp;u,int k,int l,int r,int value)&#123; if(!u) u=++cnt; size[u]+=value; if(l==r) return; int mid=l+r&gt;&gt;1; if(k&lt;=mid) ins(lson[u],k,l,mid,value); else ins(rson[u],k,mid+1,r,value); &#125; int query(int l,int r,int k)&#123; if(l==r) return l; int rsize=0,mid=l+r&gt;&gt;1; for(int i=1;i&lt;=l1;i++) rsize-=size[rson[q1[i]]]; for(int i=1;i&lt;=l2;i++) rsize+=size[rson[q2[i]]]; //å°†æ‰€æœ‰æœ‰å…³æƒå€¼çº¿æ®µæ ‘å½“å‰ç»“ç‚¹ä¸Šçš„ä¿¡æ¯æ•´åˆ if(k&gt;rsize)&#123; for (int i=1;i&lt;=l1;i++) q1[i]=lson[q1[i]]; for (int i=1;i&lt;=l2;i++) q2[i]=lson[q2[i]]; return query(l,mid,k-rsize); //å‘å·¦åŒºé—´æŸ¥æ‰¾ &#125; else&#123; for (int i=1;i&lt;=l1;i++) q1[i]=rson[q1[i]]; for (int i=1;i&lt;=l2;i++) q2[i]=rson[q2[i]]; return query(mid+1,r,k); //å‘å³åŒºé—´æŸ¥æ‰¾ &#125; &#125;&#125;t;//=============================å¸¦ä¿®ä¸»å¸­æ ‘============================int main(int argc, char const *argv[])&#123; scanf(\"%d%d\",&amp;n,&amp;q); for(int i=1;i&lt;=n;i++) scanf(\"%d\",&amp;a[i]); for(int i=1,x,y;i&lt;n;i++) scanf(\"%d%d\",&amp;x,&amp;y),add(x,y),add(y,x); dfs1(1,0); dfs2(1,1); for(int i=1;i&lt;=n;i++) for(int j=id[i];j&lt;=n;j+=j&amp;-j) t.ins(root[j],val[id[i]],0,1e8,1); int k,x,y; while(q--)&#123; scanf(\"%d%d%d\",&amp;k,&amp;x,&amp;y); if(k==0)&#123; for(int i=id[x];i&lt;=n;i+=i&amp;-i) t.ins(root[i],val[id[x]],0,1e8,-1), t.ins(root[i],y,0,1e8,1); val[id[x]]=y; &#125;else&#123; query(x,y); int tmp=0; for(int i=1;i&lt;=l1;i++) tmp-=t.size[q1[i]]; for(int i=1;i&lt;=l2;i++) tmp+=t.size[q2[i]]; if(tmp&lt;k) &#123;puts(\"invalid request!\");continue;&#125; printf(\"%d\\n\",t.query(0,1e8,k)); &#125; &#125; return 0;&#125; PS:æˆ‘å±…ç„¶åšå®Œè¿™é“é¢˜æ‰æ˜ç™½ç¬¬$K$å¤§å’Œç¬¬$K$å°çš„æ­£ç¡®æ„ä¹‰ï¼Ÿï¼-_-","tags":[{"name":"ä¸»å¸­æ ‘","slug":"ä¸»å¸­æ ‘","permalink":"http://blog.southe3n.cf/tags/ä¸»å¸­æ ‘/"},{"name":"æ ‘å‰–","slug":"æ ‘å‰–","permalink":"http://blog.southe3n.cf/tags/æ ‘å‰–/"}]},{"title":"[CQOI2011]åŠ¨æ€é€†åºå¯¹","date":"2018-06-25T01:52:40.000Z","path":"2018/06/25/cqoi2011dongtainixudui/","text":"å…³é”®è¯ï¼šä¸»å¸­æ ‘ é€†åºå¯¹ CDQåˆ†æ²» ç›¸å…³é¢˜ç›®ï¼š$Luogu3157$ $BZOJ3295$ -ä¸€å¥è¯é¢˜æ„ç»™å‡ºä¸€ä¸ªåºåˆ—é•¿åº¦ä¸º$N$ï¼Œæ¯æ¬¡åˆ é™¤å…¶ä¸­ä¸€ä¸ªå…ƒç´ ï¼Œå…±åˆ é™¤$M$ä¸ªï¼Œè¦æ±‚åœ¨æ¯æ¬¡åˆ é™¤å…ƒç´ å‰æ±‚å…¶å½“å‰é€†åºå¯¹ä¸ªæ•°æ•°æ®èŒƒå›´$N\\leq 100000,M\\leq 50000$ -ä¸»è¦æ€è·¯å…ˆæ±‚å‡ºåˆå§‹é€†åºå¯¹ä¸ªæ•°(ç”¨æ ‘çŠ¶æ•°ç»„æˆ–è€…å½’å¹¶æ’åºéƒ½å¯ä»¥å•Š)å¯¹äºæ¯æ¬¡åˆ é™¤ç¬¬$i$ä¸ªæ•°çš„æ“ä½œï¼Œåˆ©ç”¨å¸¦ä¿®ä¸»å¸­æ ‘æ±‚å‡ºè¯¥æ•°å¯¹é€†åºå¯¹ä¸ªæ•°çš„è´¡çŒ®å…·ä½“å°±æ˜¯æ±‚å‡ºåŒºé—´$[1..i-1]$ä¸­æœªè¢«åˆ é™¤çš„å¤§äº$val[i]$çš„æ•°çš„ä¸ªæ•°åŒç†æ±‚å‡ºåŒºé—´$[i+1,n]$ä¸­å°äº$val[i]$çš„æ•°çš„ä¸ªæ•°ï¼Œå°†è¿™ä¸¤ç§è´¡çŒ®ä»$ans$ä¸­å‡å»å³å¯ç”±äºè¦åŠ¨æ€çš„åˆ æ•°æ¥æ±‚å½“å‰è´¡çŒ®ï¼Œéœ€è¦ä½¿ç”¨å¸¦ä¿®ä¸»å¸­æ ‘ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980#include &lt;cstdio&gt;using namespace std;const int N=100005;int size[N*100],lson[N*100],rson[N*100],root[N];int q1[N],q2[N],l1,l2,n,m,cnt,a[N],pos[N];long long ans,sum[N];inline long long gets(int x)&#123; int res=0; for(int i=x;i&gt;0;i-=i&amp;-i) res+=sum[i]; return res;&#125;void ins(int &amp;u,int k,int l,int r,int val)&#123; if(!u) u=++cnt; size[u]+=val; if(l==r) return; int mid=l+r&gt;&gt;1; if(k&lt;=mid) ins(lson[u],k,l,mid,val); else ins(rson[u],k,mid+1,r,val);&#125;long long askpre(int x,int l,int r)&#123; if(l==r) return 0; int mid=l+r&gt;&gt;1; if(x&lt;=mid)&#123; long long res=0; for(int i=1;i&lt;=l1;i++) res+=size[rson[q1[i]]],q1[i]=lson[q1[i]]; return res+askpre(x,l,mid); &#125;else&#123; for(int i=1;i&lt;=l1;i++) q1[i]=rson[q1[i]]; return askpre(x,mid+1,r); &#125;&#125;long long asksuc(int x,int l,int r)&#123; if(l==r) return 0; int mid=l+r&gt;&gt;1; if(x&lt;=mid)&#123; for(int i=1;i&lt;=l1;i++) q1[i]=lson[q1[i]]; for(int i=1;i&lt;=l2;i++) q2[i]=lson[q2[i]]; return asksuc(x,l,mid); &#125;else&#123; long long res=0; for(int i=1;i&lt;=l1;i++) res+=size[lson[q1[i]]],q1[i]=rson[q1[i]]; for(int i=1;i&lt;=l2;i++) res-=size[lson[q2[i]]],q2[i]=rson[q2[i]]; return res+asksuc(x,mid+1,r); &#125;&#125;inline long long query(int x)&#123; long long res=0; l1=0; for(int i=pos[x]-1;i&gt;0;i-=i&amp;-i) q1[++l1]=root[i]; res+=askpre(x,1,n); //æ±‚åŒºé—´[1..i-1]ä¸­æ¯”å¤§äºxçš„æ•° l1=l2=0; for(int i=n;i&gt;0;i-=i&amp;-i) q1[++l1]=root[i]; for(int i=pos[x];i&gt;0;i-=i&amp;-i) q2[++l2]=root[i]; return res+asksuc(x,1,n); //æ±‚åŒºé—´[i+1..n]ä¸­å°äºxçš„æ•°&#125;int main(int argc, char const *argv[])&#123; scanf(\"%d%d\",&amp;n,&amp;m); for(int i=1;i&lt;=n;i++)&#123; scanf(\"%d\",&amp;a[i]); pos[a[i]]=i; &#125; for(int i=1;i&lt;=n;i++)&#123; ans+=gets(n)-gets(a[i]); for(int j=i;j&lt;=n;j+=j&amp;-j) ins(root[j],a[i],1,n,1); for(int j=a[i];j&lt;=n;j+=j&amp;-j) sum[j]++; &#125; int x; while(m--)&#123; printf(\"%lld\\n\",ans); scanf(\"%d\",&amp;x); ans-=query(x); for(int i=pos[x];i&lt;=n;i+=i&amp;-i) ins(root[i],x,1,n,-1); &#125; return 0;&#125; PS:ä¼¼ä¹è¿™é“é¢˜ç”¨CDQåˆ†æ²»æ›´åŠ æ— è„‘æ–¹ä¾¿??å­¦ä¼šäº†å†è¯´ã€‚ã€‚","tags":[{"name":"ä¸»å¸­æ ‘","slug":"ä¸»å¸­æ ‘","permalink":"http://blog.southe3n.cf/tags/ä¸»å¸­æ ‘/"},{"name":"CDQåˆ†æ²»","slug":"CDQåˆ†æ²»","permalink":"http://blog.southe3n.cf/tags/CDQåˆ†æ²»/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘å¸¦ä¿®ä¸»å¸­æ ‘","date":"2018-06-23T10:13:31.000Z","path":"2018/06/23/xuexibijidaixiuzhuxishu/","text":"æ´›è°·P2617 Dynamic Rankings -å†™åœ¨å‰é¢å¸¦ä¿®ä¸»å¸­æ ‘ä¸»è¦ç”¨äºç»´æŠ¤åŒºé—´ç¬¬$k$å¤§ï¼Œå¹¶ä¸”æ”¯æŒå•ç‚¹ä¿®æ”¹æ˜¯ç”±ä¸»å¸­æ ‘æ”¹è¿›è¿‡æ¥çš„ï¼Œä½†å¹¶ä¸æ˜¯å¾ˆå¤šäººæ‰€è¯´çš„æ‰€è°“çš„æ ‘çŠ¶æ•°ç»„å¥—ä¸»å¸­æ ‘ä¸»å¸­æ ‘çš„æ€æƒ³æ˜¯å¯æŒä¹…åŒ–ï¼Œå°†ä¿¡æ¯è¿›è¡Œç»§æ‰¿è€Œå¸¦ä¿®ä¸»å¸­æ ‘å…¶å®å¹¶æ²¡æœ‰ç”¨åˆ°è¿™ä¸€æ€æƒ³ -ä¸»è¦æ€æƒ³ æˆ‘ä»¬å¯ä»¥å‘ç°è¿™é‡Œçš„ä¿®æ”¹æ˜¯å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢ï¼Œé‚£ä¹ˆè‡ªç„¶è€Œç„¶å¯ä»¥æƒ³åˆ°æ ‘çŠ¶æ•°ç»„ å¸¦ä¿®ä¸»å¸­æ ‘çš„å®è´¨æ˜¯æ ‘çŠ¶æ•°ç»„å¥—æƒå€¼çº¿æ®µæ ‘ æˆ‘ä»¬å¯¹æ ‘çŠ¶æ•°ç»„çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹å»ºç«‹ä¸€æ£µæƒå€¼çº¿æ®µæ ‘ ä¿®æ”¹çš„æ—¶å€™å¯¹æ¯ä¸€ä¸ªåŒ…å«è¯¥ç‚¹çš„çº¿æ®µæ ‘è¿›è¡Œä¿®æ”¹ï¼ŒæŸ¥è¯¢æ—¶ç±»ä¼¼äºæ ‘çŠ¶æ•°ç»„å¯¹å¤šæ£µæƒå€¼çº¿æ®µæ ‘ç›¸åŒä½ç½®ä¸Šçš„ä¿¡æ¯è¿›è¡ŒåŠ å‡å°±å¯ä»¥å¾—åˆ°æ‰€éœ€åŒºé—´çš„ä¿¡æ¯äº† -å®ç°æ–¹æ³•ä¾ç„¶æ˜¯åˆ©ç”¨åŠ¨æ€å¼€ç‚¹çš„æ–¹æ³•ï¼Œåœ¨æŸ¥è¯¢åŒºé—´$[l,r]$æ—¶å¼€ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è®°å½•åŒ…å«$[l..l-1]$å’Œ$[1..r]$ä¿¡æ¯çš„æƒå€¼çº¿æ®µæ ‘æœ‰å“ªäº›åœ¨æŸ¥è¯¢å‘ä¸‹é€’å½’æ—¶æ³¨æ„åŒæ—¶æ›´æ–°ä¸¤ä¸ªæ•°ç»„ä¸­çš„ç»“ç‚¹ä½ç½®ä¿¡æ¯ æ¯æ¬¡æŸ¥è¯¢å’Œä¿®æ”¹éœ€è¦è®¿é—®$\\log N$æ£µæƒå€¼çº¿æ®µæ ‘ è€Œå¯¹äºæ¯ä¸€æ£µæƒå€¼çº¿æ®µæ ‘ï¼Œæ·±åº¦ä¸º$\\log N$,å› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º$O(N\\log^2 N)$ ç”±äºä½¿ç”¨åŠ¨æ€å¼€ç‚¹ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯$O(N\\log^2 N)$ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include &lt;cstdio&gt;using namespace std;const int N=10005;int root[N],size[N&lt;&lt;9],lson[N&lt;&lt;9],rson[N&lt;&lt;9],q1[N],q2[N],a[N];int l1,l2,cnt,n,m;void ins(int &amp;u,int k,int l,int r,int val)&#123; if(!u) u=++cnt; //åŠ¨æ€å¼€ç‚¹ size[u]+=val; if(l==r) return; int mid=l+r&gt;&gt;1; if(k&lt;=mid) ins(lson[u],k,l,mid,val); else ins(rson[u],k,mid+1,r,val);&#125;int query(int l,int r,int k)&#123; if(l==r) return l; int lsize=0,mid=l+r&gt;&gt;1; for(int i=1;i&lt;=l1;i++) lsize-=size[lson[q1[i]]]; for(int i=1;i&lt;=l2;i++) lsize+=size[lson[q2[i]]]; if(k&gt;lsize)&#123; for (int i=1;i&lt;=l1;i++) q1[i]=rson[q1[i]]; for (int i=1;i&lt;=l2;i++) q2[i]=rson[q2[i]]; //å‘ä¸‹é€’å½’çš„åŒæ—¶æ›´æ–°å½“å‰é˜Ÿåˆ—ä¸­çš„ç»“ç‚¹ return query(mid+1,r,k-lsize); &#125; else&#123; for (int i=1;i&lt;=l1;i++) q1[i]=lson[q1[i]]; for (int i=1;i&lt;=l2;i++) q2[i]=lson[q2[i]]; return query(l,mid,k); &#125;&#125;int main(int argc, char const *argv[])&#123; scanf(\"%d%d\",&amp;n,&amp;m); for(int i=1;i&lt;=n;i++)&#123; scanf(\"%d\",&amp;a[i]); for(int j=i;j&lt;=n;j+=j&amp;-j) ins(root[j],a[i],0,1e9,1); &#125; char opt[10];int x,y,z; while(m--)&#123; scanf(\"%s%d%d\",opt,&amp;x,&amp;y); if(opt[0]=='Q')&#123; scanf(\"%d\",&amp;z); l1=l2=0; for(int i=x-1;i&gt;0;i-=i&amp;-i) q1[++l1]=root[i]; for(int i=y;i&gt;0;i-=i&amp;-i) q2[++l2]=root[i]; //è¿ç”¨æ ‘çŠ¶æ•°ç»„çš„æ€æƒ³ï¼Œå®è´¨æ˜¯æ ‘çŠ¶æ•°ç»„å¥—æƒå€¼çº¿æ®µæ ‘ printf(\"%d\\n\",query(0,1e9,z)); &#125;else&#123; for(int i=x;i&lt;=n;i+=i&amp;-i) ins(root[i],a[x],0,1e9,-1),ins(root[i],y,0,1e9,1); a[x]=y; &#125; &#125; return 0;&#125;","tags":[{"name":"ä¸»å¸­æ ‘","slug":"ä¸»å¸­æ ‘","permalink":"http://blog.southe3n.cf/tags/ä¸»å¸­æ ‘/"},{"name":"æ ‘çŠ¶æ•°ç»„","slug":"æ ‘çŠ¶æ•°ç»„","permalink":"http://blog.southe3n.cf/tags/æ ‘çŠ¶æ•°ç»„/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘ä¸»å¸­æ ‘","date":"2018-06-23T02:14:46.000Z","path":"2018/06/23/xuexibijizhuxishu/","text":"æ´›è°·P3834 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘ 1ï¼ˆä¸»å¸­æ ‘ï¼‰-ä¸»è¦æ€æƒ³ä¸»å¸­æ ‘æ¯”è¾ƒç»å…¸çš„åº”ç”¨æ˜¯æ±‚åŒºé—´ç¬¬$k$å¤§å³ç»™å®šä¸€ä¸ªæ•°åˆ—ï¼ŒæŸ¥è¯¢æŸä¸€åŒºé—´ä¸­çš„ç¬¬$k$å¤§æ•° ä¸»å¸­æ ‘çš„æœ¬è´¨æ˜¯å¤šæ£µæƒå€¼çº¿æ®µæ ‘ï¼Œåˆ©ç”¨å‰ç¼€å’Œçš„æ€æƒ³æ¥å®ç° ç”±äºå½¢æ€å®Œå…¨ç›¸åŒçš„çº¿æ®µæ ‘è‹¥ç»´æŠ¤çš„ä¿¡æ¯æ˜¯æ»¡è¶³åŠ å‡æ€§(å³åˆå¹¶ä¿¡æ¯æ—¶å¯ä»¥ç›´æ¥åŠ å‡)çš„ é‚£ä¹ˆè¿™ä¸¤æ£µçº¿æ®µæ ‘ä¹Ÿèƒ½é€šè¿‡ç›´æ¥å°†å¯¹åº”ç»“ç‚¹çš„ä¿¡æ¯ç›¸äº’åŠ å‡æ¥åˆå¹¶æˆ–æ‹†åˆ† è¿™æ ·å°±å¯ä»¥å°†å‰ç¼€å’Œçš„æ€æƒ³åº”ç”¨åˆ°çº¿æ®µæ ‘ä¸Šäº† -å®ç°æ–¹æ³•æˆ‘ä»¬å¯¹æ¯ä¸€ä¸ª$1..i$çš„åŒºé—´å»ºç«‹ä¸€æ£µæƒå€¼çº¿æ®µæ ‘å¯¹äºæ¯ä¸€ä¸ªåŒºé—´$[l,r]$æŸ¥è¯¢ï¼Œä»£è¡¨è¿™ä¸ªåŒºé—´çš„æƒå€¼çº¿æ®µæ ‘å°±æ˜¯çº¿æ®µæ ‘$[r]$-çº¿æ®µæ ‘$[l-1]$å¯¹è¿™ä¸ªçº¿æ®µæ ‘è¿›è¡ŒäºŒåˆ†ç­”æ¡ˆï¼Œåˆ¤æ–­æ’åæ˜¯å¦$=k$,å°±å¯ä»¥å¾—åˆ°ç­”æ¡ˆäº† è‡³äºå…·ä½“çš„æƒå€¼çº¿æ®µæ ‘å®ç°æ–¹æ³•ï¼Œè¿™é‡Œå°±ä¸å†™äº†ã€‚ï¼ˆå…¶å®æ˜¯æˆ‘æ‡’ï¼‰å¦‚æœä¸çŸ¥é“å¯ä»¥å…ˆå»å­¦ä¸€ä¸‹,ä¸»è¦æ˜¯å°†æ™®é€šçº¿æ®µæ ‘ç»´æŠ¤çš„åŒºé—´å˜ä¸ºæƒå€¼åŒºé—´ ç­‰ä¸€è›¤ï¼Œä¼¼ä¹è¿™æ ·å»ºæƒå€¼çº¿æ®µæ ‘çš„ç©ºé—´å¤æ‚åº¦æ˜¯$O(4N^2)$ï¼Ÿï¼Ÿè¿™ä¸æ˜¯é“å®šçˆ†äº†å˜›å¥½ï¼Œè®©æˆ‘ä»¬å†·é™åˆ†æä¸€ä¸‹,ä¼¼ä¹åŒºé—´$[1..i]$å’Œ$[1..i-1]$çš„çº¿æ®µæ ‘åªæœ‰ä¸€æ¡$\\log N$çš„é“¾æ˜¯ä¸åŒçš„ï¼Ÿå› ä¸ºä¸¤ä¸ªåŒºé—´ç›¸æ¯”åªå¤šäº†ä¸€ä¸ªæƒå€¼ä¸º$val[i]$çš„æ•°ï¼Œæ‰€ä»¥åªæœ‰åŒ…å«$val[i]$çš„æƒå€¼åŒºé—´æ˜¯ä¸ä¸€æ ·çš„ æˆ‘ä»¬è¿ç”¨**å¯æŒä¹…åŒ–æ€æƒ³**ï¼Œé€šè¿‡åŠ¨æ€å¼€ç‚¹çš„æ–¹æ³•ï¼Œå¯¹äºå½“å‰åŒºé—´çš„å·¦å³å­©å­, è‹¥æ–°å¢çš„ä¸€ä¸ªæƒå€¼ä¸å±äºå…¶æƒå€¼åŒºé—´ï¼Œåˆ™ç›´æ¥æŒ‡å‘åˆ°ä¸Šä¸€æ£µçº¿æ®µæ ‘çš„ç›¸åŒä½ç½® å¯¹äºéœ€è¦ä¿®æ”¹çš„ä¸€æ¡é“¾ï¼Œç”¨åŠ¨æ€å¼€ç‚¹æ–°å¼€ä¸€æ¡é“¾å°±å¯ä»¥äº† å…·ä½“å½¢æ€ä¼šé•¿æˆè¿™æ ·å­ é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨$O(N\\log N)$çš„æ—¶é—´å†…è§£å†³è¿™ä¸ªé—®é¢˜äº† éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‹¥æ•°æ®çš„å€¼åŸŸå¾ˆå¤§ï¼Œç”±äºä½¿ç”¨çš„æ˜¯æƒå€¼çº¿æ®µæ ‘ï¼Œå¤æ‚åº¦ä¼šå¾ˆé«˜ è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å°†æ•°æ®ç¦»æ•£åŒ–ä¸€ä¸‹ï¼Œå°†å€¼åŸŸé™ä¸º$N$ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int maxa=-2e9,mina=2e9;int root[210000],lson[21000000],rson[21000000],size[21000000];int cnt,n,m,x[210000],y[210000],tot;struct node&#123;int val,id;&#125;a[210000];int cmp(node x,node y)&#123;return x.val&lt;y.val;&#125;void ins(int &amp;u,int pre,int k,int l,int r)&#123; u=++cnt; //åŠ¨æ€å¼€ç‚¹ï¼Œuä½¿ç”¨å®å‚ size[u]=size[pre]+1; lson[u]=lson[pre],rson[u]=rson[pre]; //ç»§æ‰¿ä¸Šä¸€æ—¶åˆ»çš„åŒºé—´ä¿¡æ¯ if(l==r) return; int mid=l+r&gt;&gt;1; if(k&lt;=mid) ins(lson[u],lson[pre],k,l,mid); //åªéœ€è¦ä¿®æ”¹lognçš„åŒºé—´ä¿¡æ¯ else ins(rson[u],rson[pre],k,mid+1,r);&#125;int query(int ul,int ur,int k,int l,int r)&#123; if(l==r) return l; int lsize=size[lson[ur]]-size[lson[ul]],mid=l+r&gt;&gt;1; if(lsize&gt;=k) return query(lson[ul],lson[ur],k,l,mid); else return query(rson[ul],rson[ur],k-lsize,mid+1,r); &#125;int main()&#123; scanf(\"%d%d\",&amp;n,&amp;m); for(int i=1;i&lt;=n;i++) scanf(\"%d\",&amp;a[i].val),a[i].id=i; sort(a+1,a+n+1,cmp); //ç¦»æ•£åŒ–ï¼Œä½¿æƒå€¼çº¿æ®µæ ‘çš„å€¼åŸŸé™åˆ°n for(int i=1;i&lt;=n;i++)&#123; if(a[i].val==a[i-1].val&amp;&amp;a[i].val!=0) x[a[i].id]=tot; else x[a[i].id]=++tot; y[tot]=a[i].val; &#125; for(int i=1;i&lt;=n;i++) ins(root[i],root[i-1],x[i],1,tot); //æ¯æ’å…¥ä¸€ä¸ªæ•°ï¼Œéƒ½åªéœ€è¦è®°å½•ä¸€æ¡lognçš„é“¾ï¼Œå…¶ä½™çš„éƒ½ä¸æ—¶åˆ»i-1çš„çº¿æ®µæ ‘ç›¸åŒï¼Œç›´æ¥ä½¿ç”¨å³å¯ while(m--)&#123; int l,r,k; scanf(\"%d%d%d\",&amp;l,&amp;r,&amp;k); printf(\"%d\\n\",y[query(root[l-1],root[r],k,1,tot)]); //ræ—¶åˆ»çš„çº¿æ®µæ ‘å‡å»l-1æ—¶åˆ»çš„çº¿æ®µæ ‘å³æ˜¯åŒºé—´l~rçš„çº¿æ®µæ ‘ &#125; return 0;&#125;","tags":[{"name":"ä¸»å¸­æ ‘","slug":"ä¸»å¸­æ ‘","permalink":"http://blog.southe3n.cf/tags/ä¸»å¸­æ ‘/"}]},{"title":"[AHOI2009]ä¸­å›½è±¡æ£‹","date":"2018-06-21T11:00:50.000Z","path":"2018/06/21/ahoi2009zhongguoxiangqi/","text":"å…³é”®è¯ï¼šçŠ¶å‹DP,åŠ¨æ€è§„åˆ’ ç›¸å…³é¢˜ç›®ï¼š$Luogu2051$ $BZOJ1801$ Emmmmâ€¦å…¶å®è¿™é“é¢˜è¯´æ˜¯çŠ¶å‹DPæ¯”è¾ƒFakeï¼Œåªæ˜¯ä¸€ä¸ª50åˆ†çš„åšæ³•ï¼Œä½†æ­£è§£å¯ä»¥ä»çŠ¶å‹DPä¼˜åŒ–è¿‡æ¥ -ä¸€å¥è¯é¢˜æ„ç»™å®šä¸€ä¸ªNè¡ŒMåˆ—çš„æ£‹ç›˜ï¼Œæ±‚åœ¨ä¸Šé¢æ”¾ç½®ä¸­å›½è±¡æ£‹ä¸­çš„ç‚®çš„æ–¹æ¡ˆæ•°ï¼Œè¦æ±‚ä»»æ„çš„ä¸€å¯¹ç‚®éƒ½ä¸èƒ½ç›¸äº’æ”»å‡»åˆ°æ–¹æ¡ˆæ•°å¯¹$9999973$å–æ¨¡ï¼Œå¯ä»¥ä¸æ”¾ç‚®ï¼Œç‚®çš„æ•°é‡æ²¡æœ‰é™åˆ¶$N,M \\leq 100$ -ä¸»è¦æ€è·¯åˆ†æä¸€ä¸‹å¯ä»¥å‘ç°ï¼Œç”±äºç‚®çš„æ”»å‡»æ–¹æ³•ï¼Œä»»ä½•ä¸€è¡Œæˆ–ä¸€åˆ—éƒ½æœ€å¤šåªèƒ½æœ‰2ä¸ªç‚® å…ˆè®²50åˆ†çš„åšæ³•å§50åˆ†çš„æ¡ä»¶æ˜¯$N,M$ä¸­æœ‰ä¸€ä¸ªå°äºç­‰äº8é‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘çŠ¶å‹DPäº†ï¼Œç”¨ä¸‰è¿›åˆ¶æ•°è®°å½•æ¯ä¸€åˆ—çš„è±¡æ£‹ä¸ªæ•°çŠ¶æ€å®šä¹‰$F[i][j]$è¡¨ç¤ºæ”¾åˆ°ç¬¬$i$è¡Œæ—¶è±¡æ£‹æ‘†æ”¾çŠ¶æ€ä¸º$j$çš„æ–¹æ¡ˆæ•°è½¬ç§»æ—¶æšä¸¾$i$å’Œ$j$å³å¯æ—¶é—´å¤æ‚åº¦ä¸º$O(3^MNÂ·M)$ è§‚å¯Ÿä¸€å“ˆï¼Œä¼¼ä¹æˆ‘ä»¬å…¶å®å¹¶ä¸éœ€è¦çŸ¥é“æ¯ä¸€åˆ—çš„å…·ä½“çŠ¶æ€ï¼Ÿï¼Ÿï¼æˆ‘ä»¬éœ€è¦çš„åªæ˜¯æœ‰ä¸€ä¸ªæ£‹å­å’Œæ²¡æœ‰æ£‹å­çš„åˆ—æ•°å¯¹ï¼Œæ­£è§£æ¥äº†ç”¨$F[i][j][k]$è®°å½•æ”¾åˆ°ç¬¬$i$è¡Œæ­¤æ—¶æœ‰$j$åˆ—æœ‰ä¸€ä¸ªæ£‹å­ï¼Œ$k$åˆ—æœ‰ä¸¤ä¸ªæ£‹å­è½¬ç§»çš„æ—¶å€™åˆ©ç”¨ç»„åˆæ•°ä¹˜ä¸€ä¸‹å°±å¯ä»¥äº†æ—¶é—´å¤æ‚åº¦ä¸º$O(NM^2)$ å…·ä½“è½¬ç§»æ—¶è€ƒè™‘è¯¥è¡Œæ”¾å‡ ä¸ªæ£‹å­ï¼Œä»¥åŠæ”¾ç½®åœ¨æ²¡æœ‰æ£‹å­çš„åˆ—å’Œæœ‰ä¸€ä¸ªæ£‹å­çš„åˆ—ä¸åŒæƒ…å†µå°±å¯ä»¥äº†ï¼Œå…·ä½“åœ¨ä»£ç ä¸­æ³¨é‡Šäº† ä»£ç 1234567891011121314151617181920212223242526272829303132#include &lt;cstdio&gt;using namespace std;const int mod=9999973;long long f[110][110][110];int n,m;int main(int argc, char const *argv[])&#123; scanf(\"%d%d\",&amp;n,&amp;m); f[0][0][0]=1; for(int i=0;i&lt;n;i++) for(int j=0;j&lt;=m;j++) for(int k=0;k&lt;=m-j;k++)&#123; if(!f[i][j][k]) continue; f[i+1][j][k]=(f[i+1][j][k]+f[i][j][k])%mod; //ä¸æ”¾æ£‹å­ if(j+k&lt;m) f[i+1][j+1][k]=(f[i+1][j+1][k]+f[i][j][k]*(m-j-k))%mod; //æ”¾ä¸€ä¸ªåœ¨æ²¡æœ‰æ£‹å­çš„åˆ—ä¸Š if(j) f[i+1][j-1][k+1]=(f[i+1][j-1][k+1]+f[i][j][k]*j)%mod; //æ”¾ä¸€ä¸ªåœ¨æœ‰ä¸€ä¸ªæ£‹å­çš„åˆ—ä¸Š if(j+k+2&lt;=m) f[i+1][j+2][k]=(f[i+1][j+2][k]+f[i][j][k]*(m-j-k)*(m-j-k-1)/2)%mod; //æ”¾ä¸¤ä¸ªåœ¨æ²¡æœ‰æ£‹å­çš„åˆ—ä¸Š if(j+k&lt;m&amp;&amp;j) f[i+1][j][k+1]=(f[i+1][j][k+1]+f[i][j][k]*(m-j-k)*j)%mod; //æ”¾ä¸¤ä¸ªä¸€ä¸ªåœ¨æ²¡æœ‰æ£‹å­çš„åˆ—ä¸Šï¼Œä¸€ä¸ªåœ¨æœ‰ä¸€ä¸ªæ£‹å­çš„åˆ—ä¸Š if(j&gt;=2) f[i+1][j-2][k+2]=(f[i+1][j-2][k+2]+f[i][j][k]*j*(j-1)/2)%mod; //æ”¾ä¸¤ä¸ªåœ¨æœ‰ä¸€ä¸ªæ£‹å­çš„åˆ—ä¸Š &#125; int ans=0; for(int i=0;i&lt;=m;i++) for(int j=0;j&lt;=m-i;j++) ans=(ans+f[n][i][j])%mod; printf(\"%d\\n\",ans); return 0;&#125;","tags":[{"name":"çŠ¶å‹DP","slug":"çŠ¶å‹DP","permalink":"http://blog.southe3n.cf/tags/çŠ¶å‹DP/"}]},{"title":"CF280C Game on Tree","date":"2018-06-21T05:48:24.000Z","path":"2018/06/21/cf280cgameontree/","text":"å…³é”®è¯ï¼šæ•°å­¦æœŸæœ› ç›¸å…³é¢˜ç›®ï¼š$Luogu$ $Codeforces$ Emmmmâ€¦æ•°å­¦æœŸæœ›æ¸£æ¸£ï¼Œæ¥çœ‹ä¸€æ³¢è®²ç¨¿ï¼Œå°±çœ‹åˆ°ä¸€é“æŒºæœ‰æ„æ€çš„é¢˜ï¼Œäºæ˜¯â€”â€” -ä¸€å¥è¯é¢˜æ„ç»™å®šä¸€ä¸ªæœ‰æ ¹æ ‘ï¼Œåˆå§‹æ‰€æœ‰ç‚¹ä¸ºç™½è‰²ï¼Œæ¯ä¸€æ¬¡æ“ä½œåœ¨ç™½è‰²ç‚¹ä¸­éšæœºé€‰å–ä¸€ä¸ªå°†å…¶å’Œå…¶å­æ ‘å…¨éƒ¨æŸ“æˆé»‘è‰²ï¼Œæ±‚å°†æ•´æ£µæ ‘æŸ“æˆé»‘è‰²çš„æ¬¡æ•°çš„æœŸæœ› -ä¸»è¦æ€è·¯æˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªç‚¹æŸ“é»‘çš„è¿‡ç¨‹å½“æˆä¸€ä¸ªç‹¬ç«‹çš„äº‹ä»¶é‚£ä¹ˆåªæœ‰å½“æˆ‘ä»¬é€‰å–äº†è¿™ä¸ªç‚¹ï¼Œæˆ–è€…è¿™ä¸ªç‚¹çš„ç¥–å…ˆæ—¶ï¼Œè¿™ä¸ªç‚¹æ‰ä¼šè¢«æŸ“é»‘è€Œå°†ä¸€ä¸ªç‚¹æŸ“é»‘çš„æ“ä½œä¸­ï¼Œé€‰å–åˆ°è¿™ä¸ªç‚¹è‡ªèº«çš„æ¦‚ç‡å°±æ˜¯$\\frac{1}{ç¥–å…ˆæ•°+1}$ å³$\\frac{1}{dep[i]}$($dep$ä¸ºæ·±åº¦)ç”±äºæœŸæœ›=$\\sum$æ¦‚ç‡$*$æƒï¼Œæ‰€ä»¥ä¸€ä¸ªç‚¹çš„æ¬¡æ•°æœŸæœ›å°±æ˜¯$\\frac{1}{dep[i]}$æ•´æ£µæ ‘çš„æ¬¡æ•°æœŸæœ›å°±æ˜¯$\\sum_{i=1}^{n}\\frac{1}{dep[i]}$ å¥½ï¼Œé‚£ä¹ˆé—®é¢˜å°±è§£å†³äº†ï¼ˆæˆ‘æ€ä¹ˆè‡ªå·±æƒ³ä¸å‡ºæ¥å•Šã€‚ã€‚ã€‚æ•°å­¦æ¸£æ¸£ï¼‰ ä»£ç 12345678910111213141516171819202122232425#include &lt;cstdio&gt;using namespace std;int to[210000],nxt[2100000],head[110000],dep[110000],n,cnt;inline void add(int u,int v)&#123; to[++cnt]=v; nxt[cnt]=head[u]; head[u]=cnt;&#125;void dfs(int u,int ff)&#123; dep[u]=dep[ff]+1; for(int i=head[u];i;i=nxt[i]) if(to[i]!=ff) dfs(to[i],u);&#125;int main()&#123; scanf(\"%d\",&amp;n); for(int i=1,x,y;i&lt;n;i++) scanf(\"%d%d\",&amp;x,&amp;y),add(x,y),add(y,x); dfs(1,0); double ans=0; for(int i=1;i&lt;=n;i++) ans+=(double)1/dep[i]; printf(\"%.9lf\",ans); return 0;&#125;","tags":[{"name":"æ•°å­¦æœŸæœ›","slug":"æ•°å­¦æœŸæœ›","permalink":"http://blog.southe3n.cf/tags/æ•°å­¦æœŸæœ›/"}]},{"title":"[SDOI2009]å­¦æ ¡é£Ÿå ‚","date":"2018-06-21T02:10:23.000Z","path":"2018/06/21/sdoi2009xuexiaoshitang/","text":"å…³é”®è¯ï¼šçŠ¶å‹DP ç›¸å…³é¢˜ç›®ï¼š$Luogu2157$ $BZOJ1226$ -Nå¥è¯é¢˜æ„ æ„Ÿè§‰è‡ªå·±ä¸å¤ªæ¦‚æ‹¬çš„å‡ºæ¥ã€‚ã€‚ã€‚å°±æŠŠé¢˜é¢ç›´æ¥æ‹‰è¿‡æ¥å§ï¼ˆé€ƒé€ƒé€ƒé€ƒé€ƒ~~ï¼‰ å°F çš„å­¦æ ¡åœ¨åŸå¸‚çš„ä¸€ä¸ªååƒ»è§’è½ï¼Œæ‰€æœ‰å­¦ç”Ÿéƒ½åªå¥½åœ¨å­¦æ ¡åƒé¥­ã€‚å­¦æ ¡æœ‰ä¸€ä¸ªé£Ÿå ‚ï¼Œè™½ç„¶ç®€é™‹ï¼Œä½†é£Ÿå ‚å¤§å¨æ€»èƒ½åšå‡ºè®©åŒå­¦ä»¬æ»¡æ„çš„èœè‚´ã€‚å½“ç„¶ï¼Œä¸åŒçš„äººå£å‘³ä¹Ÿä¸ä¸€å®šç›¸åŒï¼Œä½†æ¯ä¸ªäººçš„å£å‘³éƒ½å¯ä»¥ç”¨ä¸€ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºã€‚ ç”±äºäººæ‰‹ä¸å¤Ÿï¼Œé£Ÿå ‚æ¯æ¬¡åªèƒ½ä¸ºä¸€ä¸ªäººåšèœã€‚åšæ¯é“èœæ‰€éœ€çš„æ—¶é—´æ˜¯å’Œå‰ä¸€é“èœæœ‰å…³çš„ï¼Œè‹¥å‰ä¸€é“èœçš„å¯¹åº”çš„å£å‘³æ˜¯$a$ï¼Œè¿™ä¸€é“ä¸º$b$ï¼Œåˆ™åšè¿™é“èœæ‰€éœ€çš„æ—¶é—´ä¸º(a|b-a&amp;b)ï¼Œè€Œåšç¬¬ä¸€é“èœæ˜¯ä¸éœ€è¦è®¡ç®—æ—¶é—´çš„ã€‚ å­¦ç”Ÿæ•°ç›®ç›¸å¯¹äºè¿™ä¸ªå­¦æ ¡è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œåƒé¥­åšèœå¾€å¾€å°±ä¼šèŠ±å»ä¸å°‘æ—¶é—´ã€‚å› æ­¤ï¼Œå­¦æ ¡é£Ÿå ‚å¶å°”ä¼šä¸æŒ‰ç…§å¤§å®¶çš„æ’é˜Ÿé¡ºåºåšèœï¼Œä»¥ç¼©çŸ­æ€»çš„è¿›é¤æ—¶é—´ã€‚ è™½ç„¶åŒå­¦ä»¬èƒ½å¤Ÿç†è§£å­¦æ ¡é£Ÿå ‚çš„è¿™ç§åšæ³•ï¼Œä¸è¿‡æ¯ä¸ªåŒå­¦è¿˜æ˜¯æœ‰ä¸€å®šå®¹å¿åº¦çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé˜Ÿä¼ä¸­çš„ç¬¬$i$ä¸ªåŒå­¦ï¼Œæœ€å¤šå…è®¸ç´§è·Ÿä»–èº«åçš„$B[i]$ ä¸ªäººå…ˆæ‹¿åˆ°é¥­èœã€‚ä¸€æ—¦åœ¨æ­¤ä¹‹åçš„ä»»æ„åŒå­¦æ¯”å½“å‰åŒå­¦å…ˆæ‹¿åˆ°é¥­ï¼Œå½“å‰åŒå­¦å°†ä¼šååˆ†æ„¤æ€’ã€‚å› æ­¤ï¼Œé£Ÿå ‚åšèœè¿˜å¾—ç…§é¡¾åˆ°åŒå­¦ä»¬çš„æƒ…ç»ªã€‚ ç°åœ¨ï¼Œå°F æƒ³çŸ¥é“åœ¨æ»¡è¶³æ‰€æœ‰äººçš„å®¹å¿åº¦è¿™ä¸€å‰æä¸‹ï¼Œè‡ªå·±çš„å­¦æ ¡é£Ÿå ‚åšå®Œè¿™äº›èœæœ€å°‘éœ€è¦å¤šå°‘æ—¶é—´ã€‚ã€ å…¶ä¸­$1 \\leq N \\leq 1,000ï¼Œ0 \\leq Ti \\leq 1,000ï¼Œ0 \\leq Bi \\leq 7,1 \\leq C \\leq 5$ã€‚ -ä¸»è¦æ€è·¯å…ˆè§‚å¯Ÿä¸€å“ˆæ•°æ®èŒƒå›´ï¼Œæ¬¸ï¼Ÿ$Bi \\leq 7$ï¼Ÿé‚£æ˜¯ä¸æ˜¯å¯ä»¥æŠŠè¿™ä¸ªçŠ¶æ€å‹ç¼©ä¸€æ³¢å•Šï¼Ÿé‚£ä¹ˆæˆ‘ä»¬å®šä¹‰$F[i][j][k]$è¡¨ç¤ºç¬¬$i$ä¸ªäººä»¥å‰éƒ½æ‰“å®Œäº†é¥­ï¼ˆä¸åŒ…æ‹¬$i$ï¼‰,$j$ç”¨çŠ¶å‹çš„æ€æƒ³è®°å½•åœ¨$i$åŠ$i$ä»¥åæ‰“é¥­çš„çŠ¶æ€ï¼Œ$k$è®°å½•è¯¥çŠ¶æ€ä¸‹æœ€åä¸€ä¸ªæ‰“é¥­çš„äººæ˜¯ç¬¬$i+k$ä¸ªäººé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å‘ç°å› ä¸ºäººä»¬æœ€å¤šå…è®¸åé¢ç¬¬$7$ä¸ªäººå…ˆæ‰“é¥­ï¼Œåˆ™$0\\leq j &lt; 2^8$,$-8\\leq k \\leq 7$ çŠ¶æ€çš„è½¬ç§»é€šè¿‡æšä¸¾$h$ä¹Ÿå°±æ˜¯ç°åœ¨è®©ç¬¬$h+i$ä¸ªäººæ‰“é¥­æ¥å®Œæˆï¼Œå¯ä»¥å‘ç°$f[i][jâˆ£(1&lt;&lt;h)][h]=min(f[i][jâˆ£(1&lt;&lt;h)][h],f[i][j][k]+time(i+k,i+h))$ ï¼ˆtime(i+k,i+h)è¡¨ç¤ºç¬¬i+kä¸ªäººåšå®Œé¥­åç¬¬i+hä¸ªäººæ‰€éœ€æ—¶é—´ï¼‰ æ—¶é—´å¤æ‚åº¦è¿‘ä¼¼äº$O(2^8Â·8Â·16N)$?? æˆ‘ä¼¼ä¹ä¸å¤ªä¼šç®—ã€‚ã€‚ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯æšä¸¾$h$æ—¶è¦è®°å½•æ‰€æœ‰æœªæ‰“é¥­çš„äººèƒ½å¿è€çš„æœ€åä¸€ä¸ªäººä¸º$limit$ è‹¥$h>limit$ç›´æ¥$break$ è¿˜æœ‰å½“j&1==1æ—¶(ç¬¬$i$ä¸ªäººå·²ç»æ‰“å®Œé¥­äº†)$f[i+1][j>>1][k-1]$ å¯ä»¥ç›´æ¥ç”±$f[i][j][k]$è½¬ç§» (åŸå› å…¶å®è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œå°±è‡ªå·±æ€è€ƒä¸€ä¸‹å§) ä»£ç 12345678910111213141516171819202122232425262728293031323334353637#include &lt;cstdio&gt;#include&lt;cstring&gt;using namespace std;int T,n,a[1100],b[1100],limit,f[1100][300][20];inline int min(int x,int y)&#123;return x&lt;y?x:y;&#125;int main(int argc, char const *argv[])&#123; scanf(\"%d\",&amp;T); while(T--)&#123; scanf(\"%d\",&amp;n); for(int i=1;i&lt;=n;i++) scanf(\"%d%d\",&amp;a[i],&amp;b[i]); memset(f,0x3f,sizeof f); f[1][0][7]=0; for(int i=1;i&lt;=n;i++)&#123; for(int j=0;j&lt;(1&lt;&lt;8);j++)&#123; for(int k=-8;k&lt;=7;k++) if(f[i][j][k+8]&lt;=1e8)&#123; if(j&amp;1) f[i+1][j&gt;&gt;1][k+7] =min(f[i+1][j&gt;&gt;1][k+7],f[i][j][k+8]); else &#123; limit=1e9; for(int h=0;h&lt;=b[i];h++)&#123; if(j&amp;(1&lt;&lt;h)) continue; if(h&gt;limit) break; limit=min(limit,h+b[h+i]); f[i][j|(1&lt;&lt;h)][h+8]=min(f[i][j|(1&lt;&lt;h)][h+8], f[i][j][k+8]+((i+k)?(a[i+k]^a[i+h]):0)); &#125; &#125; &#125; &#125; &#125; int ans=21e8; for(int i=0;i&lt;=8;i++) ans=min(ans,f[n+1][0][i]); printf(\"%d\\n\",ans); &#125; return 0;&#125;","tags":[{"name":"çŠ¶å‹DP","slug":"çŠ¶å‹DP","permalink":"http://blog.southe3n.cf/tags/çŠ¶å‹DP/"}]},{"title":"yyy loves Maths VII","date":"2018-06-20T12:16:55.000Z","path":"2018/06/20/yyylovesmathsvii/","text":"å…³é”®è¯ï¼šçŠ¶å‹DP ç•¥å¾®å¡å¸¸ ç›¸å…³é¢˜ç›®ï¼š$Luogu2396$ -å†™åœ¨å‰é¢ç®—æ˜¯æˆ‘çŠ¶å‹DPçš„å…¥é—¨é¢˜ä¹‹ä¸€ï¼Ÿä¹‹å‰ä¹Ÿæ²¡æ€ä¹ˆå†™è¿‡çŠ¶å‹DPï¼Œè¯è¯´å¡å¸¸çœŸçš„æ˜¯åŸç½ªå•Šï¼ -Nå¥è¯é¢˜æ„ç»™å®š$n(n\\leq 24)$ä¸ªâ€œå¹¸è¿æ•°å­—â€ï¼Œ$m(m\\leq 2)$ä¸ªâ€œå„è¿æ•°å­—â€æ±‚å‡ºä½¿ç”¨å®Œæ‰€æœ‰å¹¸è¿æ•°å­—çš„åˆæ³•æ–¹æ¡ˆæ•°ï¼Œè¦æ±‚åœ¨ä»»æ„æ—¶åˆ»å·²ä½¿ç”¨çš„å¹¸è¿æ•°å­—çš„å’Œä¸ç­‰äºå„è¿æ•°å­—è¾“å‡ºæ–¹æ¡ˆæ•°å¯¹$1000000007$å–æ¨¡çš„ç»“æœ -è§£å†³æ–¹æ¡ˆæ€è·¯è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„çŠ¶å‹DPçš„æ€æƒ³æ˜¯åˆ©ç”¨äºŒè¿›åˆ¶å°†çŠ¶æ€è¿›è¡Œå‹ç¼©ä¸€èˆ¬æ¥è¯´æ˜¯ç”¨ç¬¬$i$ä½ä¸Šçš„$1$è¡¨ç¤ºç¬¬$i$ä»¶ç‰©å“ï¼ˆä¹‹ç±»çš„ä¸œè¥¿ï¼‰å·²ç»ç”¨åˆ°äº† å¯¹äºè¿™é“é¢˜æˆ‘ä»¬å¯ä»¥æšä¸¾æ¯ä¸€ä¸ªå¹¸è¿æ•°å­—ä½¿ç”¨çš„çŠ¶æ€($1\\leq i\\leq 2^i-1$)å¯¹äºæ¯ä¸€ä¸ªçŠ¶æ€ï¼Œæšä¸¾æ¯ä¸€ä¸ªè¯¥çŠ¶æ€ä¸‹ä½¿ç”¨äº†çš„å¹¸è¿æ•°å­—å½“å‰çŠ¶æ€ä¸‹çš„æ–¹æ¡ˆæ•°å°±å¯ä»¥ä»é™¤å»å…¶ä¸­æŸä¸€ä¸ªå¹¸è¿æ•°å­—çš„çŠ¶æ€çš„æ–¹æ¡ˆæ•°é€’æ¨è¿‡æ¥è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯$O(2^NN)$ ç„¶åå¯èƒ½éœ€è¦ä¸€äº›å°å°çš„å¡å¸¸å§¿åŠ¿ï¼Œç›´æ¥å†™ä¼¼ä¹ä¸å¤ªè¿‡å¾—å»ã€‚ã€‚ã€‚å…·ä½“è§ä»£ç  ä»£ç 12345678910111213141516171819202122232425262728293031#include&lt;cstdio&gt;using namespace std;const int mod=1000000007;int f[20000000],dis[20000000],low[20000000],bit[30];int main(int argc, char const *argv[])&#123; int a[30],b[10],n,m; b[1]=b[2]=-1000;f[0]=1; scanf(\"%d\",&amp;n); for(int i=0;i&lt;n;i++) bit[i+1]=1&lt;&lt;i,low[bit[i+1]]=i+1; for(int i=1;i&lt;=n;i++) scanf(\"%d\",&amp;a[i]); scanf(\"%d\",&amp;m); for(int i=1;i&lt;=m;i++) scanf(\"%d\",&amp;b[i]); for(register int i=1;i&lt;=(1&lt;&lt;n)-1;i++)&#123; //æšä¸¾çŠ¶æ€ï¼Œç¬¬iä½äºŒè¿›åˆ¶ä½ä¸Šçš„1è¡¨ç¤ºä½¿ç”¨ç¬¬iå¼ ç‰Œ int now=i,tmp=now&amp;-now,j=low[tmp]; dis[i]=dis[i^tmp]+a[j]; if(dis[i]==b[1]||dis[i]==b[2]) continue; for(;now;)&#123; //å¯¹æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸Šçš„1ï¼ˆä½¿ç”¨çš„ç‰Œï¼‰ï¼Œä»æ²¡æœ‰è¿™å¼ ç‰Œçš„çŠ¶æ€è¿›è¡Œé€’æ¨ tmp=now&amp;-now; f[i]=f[i]+f[i^tmp]; if(f[i]&gt;=mod) f[i]-=mod; now^=tmp; //ç›¸å½“äºå»é™¤å½“å‰æœ€ä½ä½çš„1 &#125; &#125; printf(\"%d\\n\",f[(1&lt;&lt;n)-1]); return 0;&#125;","tags":[{"name":"çŠ¶å‹DP","slug":"çŠ¶å‹DP","permalink":"http://blog.southe3n.cf/tags/çŠ¶å‹DP/"}]},{"title":"[å›½å®¶é›†è®­é˜Ÿ]Tree II","date":"2018-06-18T05:53:24.000Z","path":"2018/06/18/guojiajixunduitreeii/","text":"å…³é”®è¯ï¼š$LCT$,$Splay$å¤„ç†åŒºé—´é—®é¢˜ ç›¸å…³é¢˜ç›®ï¼š$Luogu1501$ -é¢˜é¢ä¿¡æ¯ä¸€æ£µnä¸ªç‚¹çš„æ ‘ï¼Œæ¯ä¸ªç‚¹çš„åˆå§‹æƒå€¼ä¸º$1$ã€‚å¯¹äºè¿™æ£µæ ‘æœ‰$q$ä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œä¸ºä»¥ä¸‹å››ç§æ“ä½œä¹‹ä¸€ï¼š 1. + $u~v~ c$ï¼šå°†$u$åˆ°$v$çš„è·¯å¾„ä¸Šçš„ç‚¹çš„æƒå€¼éƒ½åŠ ä¸Šè‡ªç„¶æ•°$c$ï¼› 2. - $u1~v1~u2~v2$ï¼šå°†æ ‘ä¸­åŸæœ‰çš„è¾¹$(u1,v1)$åˆ é™¤ï¼ŒåŠ å…¥ä¸€æ¡æ–°è¾¹$(u2,v2)$ï¼Œä¿è¯æ“ä½œå®Œä¹‹åä»ç„¶æ˜¯ä¸€æ£µæ ‘ï¼› 3. * $u~v~c$ï¼šå°†$u$åˆ°$v$çš„è·¯å¾„ä¸Šçš„ç‚¹çš„æƒå€¼éƒ½ä¹˜ä¸Šè‡ªç„¶æ•°$c$ï¼› 4. / $u~ v$ï¼šè¯¢é—®$u$åˆ°$v$çš„è·¯å¾„ä¸Šçš„ç‚¹çš„æƒå€¼å’Œï¼Œæ±‚å‡ºç­”æ¡ˆå¯¹äº$51061$çš„ä½™æ•°ã€‚ -è§£å†³æ–¹æ¡ˆæœ‰æ²¡æœ‰ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰ï¼Ÿå¯ä»¥å€Ÿé‰´çº¿æ®µæ ‘2çš„åšæ³•ï¼Œè®°å½•ä¸¤ä¸ª$lazytag$,åˆ†åˆ«è®°å½•ä¹˜æ³•å’ŒåŠ æ³•ä¿®æ”¹å’Œä¸‹æ–¹æ ‡è®°æ—¶ï¼Œå…ˆåšä¹˜æ³•å†åšåŠ æ³•ï¼Œä¿®æ”¹ä¹˜æ³•æ ‡è®°æ—¶åŒæ—¶å°†åŠ æ³•æ ‡è®°è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹åŠ æ³•æ ‡è®°æ—¶ç›´æ¥ä¿®æ”¹å³å¯é‚£ä¹ˆä¸ºäº†èµ„ç“·åŠ¨æ€åˆ è¾¹åŠ è¾¹çš„æ“ä½œï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°$LCT$æ‰€ä»¥å°†çº¿æ®µæ ‘2ä¸Šçš„æ ‡è®°æ–¹æ³•æ¬åˆ°$LCT$ä¸Šå°±å¯ä»¥äº† æˆ‘ä»¬å¯¹æ¯ä¸ªç‚¹ç»´æŠ¤å…¶å€¼ã€å­æ ‘å’Œã€å­æ ‘å¤§å°ã€lazyå€¼ ç”±äºå¯¹$51061$å–æ¨¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨$unsigned~int$,ä¹Ÿå¯ä»¥æ— è„‘$long~long$ æ€»ä¹‹$int$ä¼šçˆ†æ‰å°±æ˜¯äº†ï¼ˆ~~æˆ‘æ–¯æ³¢è¢«å‘äº†~~ï¼‰ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152#include&lt;cstdio&gt;#include&lt;cstring&gt;#include&lt;memory&gt;#define int unsigned intconst int N=11e4,mod=51061;int n,q;using namespace std;struct LCT&#123; int fa[N],ch[N][2],st[N],lazy1[N],lazy2[N]ï¼› int val[N],top,sum[N],rev[N],size[N]; inline void init()&#123; memset(fa,0,sizeof(fa)); memset(ch,0,sizeof(ch)); memset(lazy2,0,sizeof(lazy2)); memset(sum,0,sizeof(sum)); for(register int i=1;i&lt;=n;i++) lazy1[i]=val[i]=size[i]=sum[i]=1; &#125; inline int isroot(int u)&#123; return ch[fa[u]][0]!=u&amp;&amp;ch[fa[u]][1]!=u; &#125; inline void update(int u)&#123; sum[u]=(sum[ch[u][0]]+sum[ch[u][1]]+val[u])%mod; size[u]=size[ch[u][0]]+size[ch[u][1]]+1; &#125; inline void _mult(int u,int c)&#123; val[u]=val[u]*c%mod; sum[u]=sum[u]*c%mod; lazy1[u]=lazy1[u]*c%mod; lazy2[u]=lazy2[u]*c%mod; &#125; inline void _add(int u,int c)&#123; val[u]=(val[u]+c)%mod; sum[u]=(sum[u]+c*size[u])%mod; lazy2[u]=(lazy2[u]+c)%mod; &#125; inline void pushdown(int u)&#123; //å°†ä¸‰ä¸ªæ ‡è®°ä¸‹æ”¾ï¼Œå…ˆä¸‹æ”¾ä¹˜æ³•æ ‡è®°å†åŠ æ³• if(rev[u])&#123; rev[u]=0; rev[ch[u][1]]^=1; rev[ch[u][0]]^=1; swap(ch[u][1],ch[u][0]); &#125; if(lazy1[u]!=1)&#123; if(ch[u][0]) _mult(ch[u][0],lazy1[u]); if(ch[u][1]) _mult(ch[u][1],lazy1[u]); lazy1[u]=1; &#125; if(lazy2[u])&#123; if(ch[u][0]) _add(ch[u][0],lazy2[u]); if(ch[u][1]) _add(ch[u][1],lazy2[u]); lazy2[u]=0; &#125; &#125; inline void rotate(int u)&#123; int f=fa[u],grandf=fa[f],d=(ch[f][1]==u); if(!isroot(f)) ch[grandf][ch[grandf][1]==f]=u; fa[u]=grandf; ch[f][d]=ch[u][!d],fa[ch[u][!d]]=f; ch[u][!d]=f,fa[f]=u; update(f); &#125; inline void splay(int u)&#123; st[top=1]=u; for(int i=u;!isroot(i);i=fa[i]) st[++top]=fa[i]; while(top) pushdown(st[top]),top--; int f,grandf; while(!isroot(u))&#123; f=fa[u],grandf=fa[f]; if(!isroot(f)) (ch[f][1]==u)==(ch[grandf][1]==f)? rotate(f):rotate(u); rotate(u); &#125; update(u); &#125;// ===========================Splayéƒ¨åˆ†ç»“æŸ================================= inline int access(int u)&#123; int now=0; while(u)&#123; splay(u); ch[u][1]=now; now=u; u=fa[u]; &#125; return now; &#125; inline void makeroot(int u)&#123; access(u);splay(u);rev[u]^=1; &#125; inline void link(int u,int v)&#123; makeroot(u); fa[u]=v; splay(v); &#125; inline void cut(int u,int v)&#123; makeroot(u); access(v); splay(v); fa[u]=ch[v][0]=0; &#125; inline void mul(int u,int v,int c)&#123; makeroot(u);access(v);splay(v); _mult(v,c); &#125; inline void add(int u,int v,int c)&#123; makeroot(u),access(v),splay(v); _add(v,c); &#125; inline int query(int u,int v)&#123; makeroot(u),access(v),splay(v); return sum[v]; &#125;&#125;LCT;signed main()&#123; scanf(\"%d%d\",&amp;n,&amp;q); LCT.init(); //è®°å¾—åˆå§‹åŒ–ã€‚ã€‚ for(int i=1,x,y;i&lt;n;i++) scanf(\"%d%d\",&amp;x,&amp;y),LCT.link(x,y); char s[10]; while(q--)&#123; int a,b,c,d; scanf(\"%s\",s); switch(s[0])&#123; case '+':&#123; scanf(\"%d%d%d\",&amp;a,&amp;b,&amp;c); LCT.add(a,b,c); break; &#125; case '-':&#123; scanf(\"%d%d%d%d\",&amp;a,&amp;b,&amp;c,&amp;d); LCT.cut(a,b); LCT.link(c,d); break; &#125; case '*':&#123; scanf(\"%d%d%d\",&amp;a,&amp;b,&amp;c); LCT.mul(a,b,c); break; &#125; case '/':&#123; scanf(\"%d%d\",&amp;a,&amp;b); printf(\"%d\\n\",LCT.query(a,b)); break; &#125; &#125; &#125; return 0;&#125;","tags":[{"name":"LCT","slug":"LCT","permalink":"http://blog.southe3n.cf/tags/LCT/"},{"name":"å¹³è¡¡æ ‘","slug":"å¹³è¡¡æ ‘","permalink":"http://blog.southe3n.cf/tags/å¹³è¡¡æ ‘/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘æ¬§æ‹‰å‡½æ•°","date":"2018-06-04T05:16:22.000Z","path":"2018/06/04/xuexibijioulahanshu/","text":"æµ…æµ…æµ…ææ¬§æ‹‰å‡½æ•°Ï† æ„Ÿè§‰è‡ªå·±æ•°è®ºçŸ¥è¯†ç›¸å½“åŒ®ä¹å•Šã€‚ã€‚ æœ€è¿‘å¯èƒ½è¦é›†ä¸­è¡¥ä¸€ä¸‹æ•°è®ºå§¿åŠ¿ï¼Ÿ å› ä¸ºè¿˜æ²¡æ€ä¹ˆç”¨è¿‡æ‰€ä»¥å†™çš„ä¼šæ¯”è¾ƒç®€å•è¯·è§è°…ã€‚ã€‚ã€‚ -æ¦‚å¿µåŠå®šä¹‰æ¬§æ‹‰å‡½æ•° $\\phi(n)$ è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªæ•°å°äºç­‰äº$n$å¹¶ä¸$n$äº’è´¨è¿™ä¸ªå‡½æ•°å…·æœ‰ä¸€äº›æ€§è´¨ã€‚ã€‚ã€‚ 1. è‹¥$n$ä¸ºç´ æ•°ï¼Œ$\\phi(n)=n-1$ 2. è‹¥$(a,b)=1$ï¼ˆå³$a,b$äº’è´¨ï¼‰ï¼Œ$\\phi(ab)=\\phi(a)*\\phi(b)$ï¼ˆè¿™ä¸ªæˆ‘ä»¬ä¹‹åå¯ä»¥ç”¨è®¡ç®—é€šå¼æ¥è¯æ˜ï¼‰ 3. æ‰©å±•æ¬§æ‹‰å®šç† a^b\\equiv \\begin{cases} a^{b\\%\\phi(p)}~~~~~~~~~~~~~~~~gcd(a,p)=1\\\\ a^b~~~~~~~~~~~~~~~~~~~~~~~gcd(a,p)\\neq1,b","tags":[{"name":"æ•°è®º","slug":"æ•°è®º","permalink":"http://blog.southe3n.cf/tags/æ•°è®º/"}]},{"title":"HNOI2010-å¼¹é£ç»µç¾Š","date":"2018-06-02T03:36:24.000Z","path":"2018/06/02/hnoi2010danfeimianyang/","text":"å…³é”®è¯ï¼š$LCT$ï¼Œåˆ†å— ç›¸å…³é¢˜ç›®ï¼š$BZOJ2002$ $Luogu3203$ é¢˜é¢ä¿¡æ¯-é¢˜ç›®æè¿°æŸå¤©ï¼Œ$Lostmonkey$å‘æ˜äº†ä¸€ç§è¶…çº§å¼¹åŠ›è£…ç½®ï¼Œä¸ºäº†åœ¨ä»–çš„ç»µç¾Šæœ‹å‹é¢å‰æ˜¾æ‘†ï¼Œä»–é‚€è¯·å°ç»µç¾Šä¸€èµ·ç©ä¸ªæ¸¸æˆã€‚æ¸¸æˆä¸€å¼€å§‹ï¼Œ$Lostmonkey$åœ¨åœ°ä¸Šæ²¿ç€ä¸€æ¡ç›´çº¿æ‘†ä¸Š$n$ä¸ªè£…ç½®ï¼Œæ¯ä¸ªè£…ç½®è®¾å®šåˆå§‹å¼¹åŠ›ç³»æ•°$k_i$ï¼Œå½“ç»µç¾Šè¾¾åˆ°ç¬¬iä¸ªè£…ç½®æ—¶ï¼Œå®ƒä¼šå¾€åå¼¹$k_i$æ­¥ï¼Œè¾¾åˆ°ç¬¬$i+k_i$ä¸ªè£…ç½®ï¼Œè‹¥ä¸å­˜åœ¨ç¬¬$i+k_i$ä¸ªè£…ç½®ï¼Œåˆ™ç»µç¾Šè¢«å¼¹é£ã€‚ç»µç¾Šæƒ³çŸ¥é“å½“å®ƒä»ç¬¬$i$ä¸ªè£…ç½®èµ·æ­¥æ—¶ï¼Œè¢«å¼¹å‡ æ¬¡åä¼šè¢«å¼¹é£ã€‚ä¸ºäº†ä½¿å¾—æ¸¸æˆæ›´æœ‰è¶£ï¼Œ$Lostmonkey$å¯ä»¥ä¿®æ”¹æŸä¸ªå¼¹åŠ›è£…ç½®çš„å¼¹åŠ›ç³»æ•°ï¼Œä»»ä½•æ—¶å€™å¼¹åŠ›ç³»æ•°å‡ä¸ºæ­£æ•´æ•°ã€‚ -è¾“å…¥è¾“å‡ºæ ¼å¼è¾“å…¥æ ¼å¼ï¼šç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°$n$ï¼Œè¡¨ç¤ºåœ°ä¸Šæœ‰$n$ä¸ªè£…ç½®ï¼Œè£…ç½®çš„ç¼–å·ä»$0$åˆ°$n-1$ã€‚æ¥ä¸‹æ¥ä¸€è¡Œæœ‰$n$ä¸ªæ­£æ•´æ•°ï¼Œä¾æ¬¡ä¸ºé‚£$n$ä¸ªè£…ç½®çš„åˆå§‹å¼¹åŠ›ç³»æ•°ã€‚ç¬¬ä¸‰è¡Œæœ‰ä¸€ä¸ªæ­£æ•´æ•°$m$ï¼Œæ¥ä¸‹æ¥$m$è¡Œæ¯è¡Œè‡³å°‘æœ‰ä¸¤ä¸ªæ•°$i$ã€$j$ï¼Œè‹¥$i=1$ï¼Œä½ è¦è¾“å‡ºä»jå‡ºå‘è¢«å¼¹å‡ æ¬¡åè¢«å¼¹é£ï¼Œè‹¥$i=2$åˆ™è¿˜ä¼šå†è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°$k$ï¼Œè¡¨ç¤ºç¬¬$j$ä¸ªå¼¹åŠ›è£…ç½®çš„ç³»æ•°è¢«ä¿®æ”¹æˆ$k$ã€‚ è¾“å‡ºæ ¼å¼ï¼šå¯¹äºæ¯ä¸ª$i=1$çš„æƒ…å†µï¼Œä½ éƒ½è¦è¾“å‡ºä¸€ä¸ªéœ€è¦çš„æ­¥æ•°ï¼Œå ä¸€è¡Œã€‚ -æ•°æ®èŒƒå›´å¯¹äº$100\\%$çš„æ•°æ®$n&lt;=200000$,$m&lt;=100000$ è§£å†³æ–¹æ¡ˆ-å¤§åŠ›åˆ†å—æˆ‘ä»¬é‡‡ç”¨åˆ†å—çš„æ€æƒ³ï¼Œå°†æ•°åˆ—åˆ†ä¸º$\\sqrt{n}$å—å…ˆ$O(N)$é¢„å¤„ç†å‡ºæ¯ä¸€ä¸ªç‚¹éœ€è¦è·³å‡ æ¬¡æ‰èƒ½è·³å‡ºå½“å‰å—ä»¥åŠè·³å‡ºå½“å‰å—åæ‰€å¤„çš„ä½ç½®å¯¹äºæ¯æ¬¡æŸ¥è¯¢æ“ä½œï¼Œé€å—è¿›è¡Œè·³è·ƒå¹¶è®°å½•è·³è·ƒçš„æ¬¡æ•°æ€»å’Œå¯¹äºæ¯æ¬¡ä¿®æ”¹æ“ä½œï¼Œå¯¹è¯¥å—å†…çš„æ‰€æœ‰å…ƒç´ æš´åŠ›ä¿®æ”¹å³å¯ æ—¶é—´å¤æ‚åº¦ï¼š å¯¹äºæŸ¥è¯¢æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºå—çš„ä¸ªæ•°ï¼Œå³$O(\\sqrt{n})$ å¯¹äºä¿®æ”¹æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºå•å—å†…ç‚¹çš„ä¸ªæ•°ï¼Œä¹Ÿæ˜¯$O(\\sqrt{n})$ è¿™æ ·ï¼Œæˆ‘ä»¬å°±åœ¨$O(M\\sqrt{N})$çš„æ—¶é—´å†…è§£å†³äº†é—®é¢˜ ä»£ç å®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041424344#include&lt;cstdio&gt;#include&lt;cmath&gt;#include&lt;ctype.h&gt;using namespace std;inline int read()&#123; int x=0,f=1; char ch; ch=getchar(); while(!isdigit(ch)) &#123;if(ch=='-') f=-1; ch=getchar();&#125; while(isdigit(ch))&#123;x=(x&lt;&lt;3)+(x&lt;&lt;1)+ch-48;ch=getchar();&#125; return x*f;&#125;int a[210000],tail[210000],step[210000],nxt[210000];int n,m;int main()&#123; n=read(); int unit=floor(sqrt(n)); for(register int i=1;i&lt;=n;i++) a[i]=read(); int now=unit; for(register int i=1;i&lt;=n;i++)&#123; if(i&gt;now) now+=unit; tail[i]=now; &#125; //é¢„å¤„ç†å‡ºå— for(register int i=n;i&gt;=1;i--) if(a[i]+i&gt;tail[i]||a[i]+i&gt;n) step[i]=1,nxt[i]=a[i]+i; else step[i]=step[a[i]+i]+1,nxt[i]=nxt[a[i]+i]; //é¢„å¤„ç†å‡ºè·³å‡ºå—æ‰€éœ€æ­¥æ•°å’Œåˆ°è¾¾çš„ç‚¹ scanf(\"%d\",&amp;m); int x,y,z; while(m--)&#123; x=read(),y=read(); y++; if(x==1)&#123; int ans=0; while(y&lt;=n) ans+=step[y],y=nxt[y]; //é€å—è·³è·ƒå¹¶è®°å½•æ­¥æ•° printf(\"%d\\n\",ans); &#125;else&#123; z=read(); a[y]=z; for(register int i=tail[y];i&gt;=tail[y]-unit+1;i--) //åœ¨å—å†…ä»åå¾€å‰ä¿®æ”¹ä¿¡æ¯ if(a[i]+i&gt;tail[i]) step[i]=1,nxt[i]=a[i]+i; else step[i]=step[a[i]+i]+1,nxt[i]=nxt[a[i]+i]; &#125; &#125; return 0;&#125; -LCTè™½ç„¶åˆ†å—èƒ½è§£å†³é—®é¢˜ï¼Œä½†$O(m\\sqrt{n})$çš„æ—¶é—´å¤æ‚åº¦å¹¶ä¸ååˆ†è®©äººæ»¡æ„æœ‰æ²¡æœ‰åŠæ³•æ›´å¿«åœ°è§£å†³é—®é¢˜å‘¢ï¼Ÿæ­£è§£æ˜¯LCTæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç‚¹$n+1$è¡¨ç¤ºç»µç¾Šå·²ç»è¢«å¼¹é£å¯¹äºæ¯ä¸€æ¬¡å¼¹è·³ï¼Œç›¸å½“äºä»ç‚¹$i$åˆ°ç‚¹$i+k[i]$è¿æ¥ä¸€æ¡è¾¹è‹¥è¢«å¼¹é£åˆ™å°†è¯¥ç‚¹ä¸$n+1$ç›¸è¿é‚£ä¹ˆæ¯æ¬¡ä¿®æ”¹æ—¶åªéœ€è¦$Cut$æ—§ç›®æ ‡ç‚¹ï¼Œ$Link$æ–°ç›®æ ‡ç‚¹å³å¯æ¯æ¬¡æŸ¥è¯¢æ—¶å»ºç«‹ä¸€é¢—åªåŒ…å«$x$åˆ°$n+1$çš„è·¯å¾„çš„$Splay$ï¼Œè¯¥$Splay$çš„$size-1$å³ä¸ºç­”æ¡ˆå…·ä½“æ“ä½œï¼šMakeroot(n+1),Access(x),Splay(x),ç­”æ¡ˆä¸ºsize[x]-1 è¿™æ ·ï¼Œæˆ‘ä»¬å°±åœ¨$O(M\\log{N})$çš„æ—¶é—´å†…è§£å†³äº†é—®é¢˜","tags":[{"name":"åˆ†å—","slug":"åˆ†å—","permalink":"http://blog.southe3n.cf/tags/åˆ†å—/"},{"name":"LCT","slug":"LCT","permalink":"http://blog.southe3n.cf/tags/LCT/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘é«˜æ–¯æ¶ˆå…ƒ","date":"2018-06-01T05:03:03.000Z","path":"2018/06/01/xuexibijigaosixiaoyuan/","text":"æ„Ÿæ€§ç†è§£é«˜æ–¯æ¶ˆå…ƒæ¨¡æ¿é¢˜ï¼šæ´›è°· P3389 ã€æ¨¡æ¿ã€‘é«˜æ–¯æ¶ˆå…ƒæ³• -å†™åœ¨å‰é¢æ²¡é”™ï¼ä»Šå¤©åˆæ˜¯BZOJçš„é”™â†’_â†’BZOJ 1013:[JSOI2008]çƒå½¢ç©ºé—´äº§ç”Ÿå™¨ é¢˜ç›®å¤§æ„ï¼šç»™å‡º$n$ç»´ç©ºé—´ä¸Šçƒé¢ä¸Šçš„$n+1$ä¸ªç‚¹çš„åæ ‡ï¼Œæ±‚å‡ºçƒå¿ƒåæ ‡è·ç¦»å…¬å¼ï¼š$dis=\\sqrt{\\sum_{i=1}^n(a_i-b_i)^2}$ ä¸€çœ‹è¿™ä¸æ˜¯é«˜æ–¯æ¶ˆå…ƒæœé¢˜å—ï¼Ÿç„¶è€Œâ€”â€”ä¸ä¼šã€‚ã€‚ã€‚ã€‚èµ¶ç´§æ¥æ„Ÿæ€§ç†è§£ä¸€ä¸‹å§ -æ¦‚å¿µåŠå®šä¹‰ é«˜æ–¯æ¶ˆå…ƒæ³•ç”¨äºæ±‚è§£å¤šå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ æœ¬è´¨æ˜¯åŠ å‡æ¶ˆå…ƒ åˆ©ç”¨è®¡ç®—æœºæ¨¡æ‹Ÿæ‰‹ç®—è§£æ–¹ç¨‹ç»„çš„è¿‡ç¨‹ï¼Œ é€šè¿‡åŠ å‡æ¶ˆå…ƒï¼Œä½¿æŸä¸€é¡¹åŒ–ä¸º$kx=y$çš„å½¢å¼æ±‚å‡º$x$çš„å€¼ï¼Œ å†å°†$x$å›ä»£ï¼Œç»§ç»­æ±‚å…¶ä»–æœªçŸ¥æ•°ï¼Œé‡å¤æ­¤è¿‡ç¨‹$n$æ¬¡å³å¯æ±‚å‡ºå…¨éƒ¨$n$ä¸ªæœªçŸ¥æ•° -ä¸»è¦åšæ³•ä¸å§¿åŠ¿ é¦–å…ˆå°†æ–¹ç¨‹ç»„ä»¥çŸ©é˜µçš„å½¢å¼ä¿å­˜$For Example~~$ \\begin{cases} 3x+y-z=-1\\\\ 2x+y+z=7\\\\ x+4y+3z=18 \\end{cases}\\Leftrightarrow \\left[\\begin{array}{ccc|c} 3 & 1 & -1 & 2\\\\ 2 & 1 & 1 & 7\\\\ 1 & 4 & 3 & 18 \\end{array}\\right]é‚£ä¹ˆæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™å¯ä»¥æ±‚å‡ºæ–¹ç¨‹ç»„çš„è§£å‘¢ï¼Ÿé•¿æˆè¿™æ ·â€”â€” \\left[\\begin{array}{ccc|c} 1 & 0 & 0 & a\\\\ 0 & 1 & 0 & b\\\\ 0 & 0 & 1 & b \\end{array}\\right]æ­¤æ—¶ $(x,y,z)=(a,b,c)$æˆ‘ä»¬æ‰€ä½¿ç”¨çš„æ–¹æ³•æ˜¯ä¸€åˆ—ä¸€åˆ—è¿›è¡Œæ¶ˆå…ƒæ³¨æ„åº”å°†è¯¥åˆ—ç³»æ•°ç»å¯¹å€¼æœ€å¤§çš„ä¸€è¡Œæ”¾åˆ°ä½œä¸ºå‡æ³•å•ä½çš„é‚£ä¸€è¡Œæ¥æé«˜ç²¾åº¦ å…ˆå°†ç¬¬ä¸€åˆ—æ¶ˆä¸º$(1,0,0)$çš„å½¢å¼ä½¿å½“å‰è¡Œçš„è¯¥é¡¹ç³»æ•°å˜ä¸º$1$ \\Rightarrow \\left[\\begin{array}{ccc|c} 1 & \\frac{1}{3} & -\\frac{1}{3} & \\frac{2}{3}\\\\ 2 & 1 & 1 & 7\\\\ 1 & 4 & 3 & 18 \\end{array}\\right] å†ç”¨è¯¥è¡Œå»å¤„ç†å…¶ä»–è¡Œï¼Œæ¶ˆå»è¯¥é¡¹ç³»æ•°$(2)-(1)\\times 2$ä»¥åŠ$(3)-(1)$ \\Rightarrow \\left[\\begin{array}{ccc|cc} 1 & \\frac{1}{3} & -\\frac{1}{3} & \\frac{2}{3} &(1)\\\\ 0 & \\frac{1}{3} & \\frac{5}{3} & \\frac{17}{3} &(2)\\\\ 0 & \\frac{11}{3} & \\frac{10}{3} & \\frac{52}{3}&(3) \\end{array}\\right] å°†ç¬¬ä¸‰è¡Œæ¢åˆ°ç¬¬äºŒè¡Œï¼ˆå› ä¸ºç¬¬ä¸‰è¡Œæ˜¯ç¬¬äºŒé¡¹ç³»æ•°ç»å¯¹å€¼æœ€å¤§çš„ï¼‰ \\Rightarrow \\left[\\begin{array}{ccc|c} 1 & \\frac{1}{3} & -\\frac{1}{3} & \\frac{2}{3}\\\\ 0 & \\frac{11}{3} & \\frac{10}{3} & \\frac{52}{3}\\\\ 0 & \\frac{1}{3} & \\frac{5}{3} & \\frac{17}{3} \\end{array}\\right] åŒæ ·çš„æ–¹æ³•ï¼Œå°†ç¬¬äºŒåˆ—å˜ä¸º$(0,1,0)$,å°†ç¬¬ä¸‰åˆ—å˜ä¸º$(0,0,1)$ \\Rightarrow \\left[\\begin{array}{ccc|c} 1 & 0 & -2 & -5\\\\ 0 & 1 & 5 & 17\\\\ 0 & 0 & -15 & -45 \\end{array}\\right] \\Rightarrow \\left[\\begin{array}{ccc|c} 1 & 0 & 0 & 1\\\\ 0 & 1 & 0 & 2\\\\ 0 & 0 & 1 & 3 \\end{array}\\right] æ±‚è§£å®Œæˆï¼$(x,y,z)=(1,2,3)$ å½“åŸçŸ©é˜µå¯åŒ–ä¸ºå•ä½çŸ©é˜µæ—¶æ–¹ç¨‹ç»„æœ‰å”¯ä¸€è§£ 1.é‚£ä¹ˆä»€ä¹ˆæ—¶å€™æ–¹ç¨‹ç»„æ— è§£å‘¢ï¼Ÿ åœ¨æ¶ˆå…ƒè¿‡ç¨‹ä¸­è‹¥å‡ºç°æŸä¸€è¡Œç³»æ•°å‡ä¸º0ä½†å¸¸æ•°é¡¹ä¸ä¸º0æ—¶ï¼Œæ–¹ç¨‹æ— è§£ 2.é‚£ä»€ä¹ˆæ—¶å€™æ–¹ç¨‹æœ‰æ— é™å¤šè§£å‘¢ï¼Ÿ åœ¨æ¶ˆå…ƒè¿‡ç¨‹ä¸­å‡ºç°æŸä¸€è¡Œç³»æ•°å‡ä¸º0ä¸”å¸¸æ•°é¡¹ä¹Ÿä¸º0æ—¶ï¼Œæ–¹ç¨‹æœ‰æ— é™å¤šè§£ æ¥ä¸‹æ¥å°±æ˜¯ä»£ç å®ç°ï¼ˆè¿™æ˜¯æœ€åŸºæœ¬çš„é«˜æ–¯æ¶ˆå…ƒï¼Œæœ‰æ—¶å€™éœ€è¦å¤„ç†è‡ªç”±å…ƒï¼Œé‚£ä¹ˆå°±è¦å¯¹è‡ªç”±å…ƒè¿›è¡Œæšä¸¾å¹¶åˆ†åˆ«å›ä»£æ±‚è§£ï¼‰ æ—¶é—´å¤æ‚åº¦$O(N^3)$ -ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839#include&lt;cstdio&gt;#include&lt;cmath&gt; #include&lt;algorithm&gt;using namespace std;const double eps=1e-6;int n;double mat[110][110],ans[110];inline void swap(double &amp;a,double &amp;b)&#123;double t=a;a=b,b=t;&#125;inline int Gauss()&#123; for(int i=1;i&lt;=n;i++)&#123; //æšä¸¾ç¬¬iåˆ— int major=i; for(int j=i+1;j&lt;=n;j++) //å¯»æ‰¾è¯¥åˆ—ç»å¯¹å€¼æœ€å¤§çš„ä¸€è¡Œ if(fabs(mat[major][i])&lt;fabs(mat[j][i])) major=j; if(fabs(mat[major][i])&lt;eps) return 0; //è‹¥å­˜åœ¨ä¸€è¡Œæ•°å‡ä¸º0åˆ™æ–¹ç¨‹ç»„æ— è§£ if(major!=i) //è‹¥ç»å¯¹å€¼æœ€å¤§çš„ä¸€è¡Œä¸æ˜¯ç¬¬iè¡Œï¼Œå°†è¯¥è¡Œæ¢åˆ°ç¬¬iè¡Œ swap(mat[major],mat[i]); for(int j=i+1;j&lt;=n+1;j++) mat[i][j]/=mat[i][i]; //å°†ç¬¬iè¡Œçš„ç¬¬ié¡¹ç³»æ•°å˜ä¸º1 mat[i][i]=1; for(int j=1;j&lt;=n;j++)&#123; //æ¶ˆå»å…¶ä»–è¡Œçš„è¯¥é¡¹ç³»æ•° if(i==j) continue; for(int k=i+1;k&lt;=n+1;k++) mat[j][k]-=mat[i][k]*mat[j][i]; mat[j][i]=0; &#125; &#125; //æ­¤æ—¶çŸ©é˜µå³ä¸ºå•ä½çŸ©é˜µ for(int i=1;i&lt;=n;i++) ans[i]=mat[i][n+1]; return 1;&#125;int main()&#123; scanf(\"%d\",&amp;n); for(int i=1;i&lt;=n;i++) for(int j=1;j&lt;=n+1;j++) scanf(\"%lf\",&amp;mat[i][j]); if(!Gauss()) return puts(\"No Solution\"),0; for(int i=1;i&lt;=n;i++) printf(\"%0.2lf\\n\",ans[i]); return 0;&#125; -è§£å†³æ–¹æ¡ˆè®©æˆ‘ä»¬å›åˆ°é‚£é“BZOJé¢˜ è®¾çƒå¿ƒåæ ‡ä¸º$b_1,b_2...b_n$ å±•å¼€è·ç¦»å…¬å¼$r=\\sqrt{\\sum_{i=1}^n(a_i-b_i)^2}$ å¾—$r^2=\\sum_{i=1}^n(a_i^2-2a_ib_i+b_i^2)$ ç§»é¡¹å¾—$\\sum_{i=1}^n(-2a_ib_i)+\\sum_{i=1}^nb_i^2-r^2=\\sum_{i=1}^n(-a_i^2)$ å…¶ä¸­$sum_{i=1}^nb_i^2-r^2$å¯è§†ä¸ºä¸€ä¸ªç³»æ•°ä¸º1çš„å˜é‡ï¼Œå…¶ä½™é¡¹çš„ç³»æ•°ä¸º$-2a_i$ è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªå…³äº$b_i$çš„$n+1$é¡¹æ–¹ç¨‹ç»„ åˆ©ç”¨é«˜æ–¯æ¶ˆå…ƒæ±‚è§£å³å¯ ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;cmath&gt;using namespace std;int n;double pos[20][20],mat[20][20],ans[20];inline void Gauss()&#123; for(int i=1;i&lt;=n;i++)&#123; int major=i; for(int j=i+1;j&lt;=n;j++) if(fabs(mat[major][i])&lt;fabs(mat[j][i])) major=j; if(major!=i) swap(mat[i],mat[major]); for(int j=i+1;j&lt;=n+1;j++) mat[i][j]/=mat[i][i]; mat[i][i]=1; for(int j=1;j&lt;=n;j++)&#123; if(i==j) continue; for(int k=i+1;k&lt;=n+1;k++) mat[j][k]-=mat[i][k]*mat[j][i]; mat[j][i]=0; &#125; &#125; for(int i=1;i&lt;=n;i++) ans[i]=mat[i][n+1];&#125;int main()&#123; scanf(\"%d\",&amp;n); n++; for(int i=1;i&lt;=n;i++) for(int j=1;j&lt;n;j++)&#123; scanf(\"%lf\",&amp;pos[i][j]); mat[i][j]=-2*pos[i][j]; mat[i][n+1]-=pos[i][j]*pos[i][j]; mat[i][n]=1; &#125; Gauss(); for(int i=1;i&lt;=n-1;i++) printf(\"%.3lf \",ans[i]); return 0;&#125; PSï¼šæ‰“$L^AT_EX$å¥½ç´¯å•Šã€‚ã€‚ã€‚ã€‚","tags":[{"name":"æ•°è®º","slug":"æ•°è®º","permalink":"http://blog.southe3n.cf/tags/æ•°è®º/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘BSGSç®—æ³•","date":"2018-05-31T12:51:47.000Z","path":"2018/05/31/xuexibijibsgssuanfa/","text":"æ…Œå¼ æ€è€ƒBSGSç®—æ³•(æ¨¡æ¿é¢˜ POJ2417 Discrete Logging)-å†™åœ¨å‰é¢ï¼ˆå¤§è‡´æ˜¯çæ‰¯ï¼Œèµ¶æ—¶é—´ç›´æ¥è·³å§ï¼‰ ä»Šå¤©åˆæ„‰(ku)å¿«(bi)åœ°åœ¨BZOJå†™é¢˜ï¼Œç¢°è§ä»‹ä¸ªâ€”&gt;BZOJ 2242: [SDOI2011]è®¡ç®—å™¨è¦æ±‚å¯¹äºç»™å®šçš„ $y,z,p$ æ»¡è¶³ä¸‰ç§æ“ä½œ: æ±‚ $y^z \\bmod p$ çš„å€¼ $xy\\equiv z \\pmod p$ $ y^x\\equiv z \\pmod p $å¯¹äºæ“ä½œ 2,3 æ±‚æ»¡è¶³æ¡ä»¶çš„æœ€å°$ x$ æ“ä½œ1,2è‡ªç„¶å¯ä»¥å¿«é€Ÿå¹‚å’Œè´¹é©¬å°å®šç†æ„‰å¿«çš„ç§’æ‰å•¦ï¼Œä½†æ˜¯æ“ä½œ3æ€ä¹ˆåŠå‘¢ï¼Ÿæ±‚åŠ©äº†ä¸€æ³¢æœºæˆ¿å¤§ä½¬$ Zqlwmatt$ï¼ˆ%%%%%ï¼‰,ä¼¼ä¹éœ€è¦ä¸€ä¸ªå«åšBSGSï¼ˆæ‹”å±±ç›–ä¸–ï¼‰ç®—æ³•çš„ä¸œè¥¿ï¼Ÿï¼Ÿï¼Ÿèµ¶ç´§æ¥å­¦ä¹ ä¸€æ³¢~~~~ æˆ‘æ˜¯ä¸ä¼šè¯´å…¶å®æ˜¯å› ä¸ºå¤ªä¹…æ²¡æ›´æ–°äº†å¼ºè¡Œæ›´æ–°ä¸€æ³¢æ‰å†™çš„ -æ¦‚å¿µåŠå®šä¹‰ bsgsï¼ˆbaby step giant stepï¼‰ç®—æ³•ç”¨äºè§£å†³æ±‚æ»¡è¶³ $y^x\\equiv z \\pmod p$ æœ€å°çš„ $x$ å€¼ æ—¶é—´å¤æ‚åº¦ä¸º $O(\\sqrt{p})$ å®è´¨æ˜¯åˆ©ç”¨åˆ†å—çš„æ€æƒ³ï¼Œå°†æšä¸¾$x$çš„å¤æ‚åº¦é™ä½ è¿™ä¸ªç®—æ³•åªé€‚ç”¨äº $p$ ä¸ºç´ æ•° ä¸” $(y,p)$ äº’è´¨çš„æƒ…å†µ -ä¸»è¦æ€æƒ³ä»¤ $m=\\biggl\\lceil\\sqrt{p}\\biggr\\rceil$ ï¼Œå³åˆ†å—çš„å¤§å°æ‰€æ±‚ x=i*m-jåˆ™åŸå¼å°±å¯ä»¥è½¬åŒ–ä¸º y^{i*m-j}\\equiv z \\pmod pç§»é¡¹å¾— y^{i*m} \\equiv z*y^j \\pmod pæˆ‘ä»¬å…ˆæšä¸¾ $j$ (èŒƒå›´ $0$ ~ $m$ ) æ±‚å¾— z*y^j å­˜å…¥ä¸€ä¸ª map ä¸­å†æšä¸¾ $i$ï¼ˆèŒƒå›´ $1$ ~ $m$ ï¼‰ä» $map$ ä¸­æ‰¾å‡ºæœ€å°çš„ $i$ æ»¡è¶³ y^{i*m}\\equiv z*y^j \\pmod p æ­¤æ—¶ $x=i*m-j$ å°±æ˜¯æ»¡è¶³è¦æ±‚çš„æœ€å° $x$ è‹¥åœ¨ $1$ ~ $m$ çš„èŒƒå›´å†…æ— æ³•æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ $x$ åˆ™è¡¨æ˜æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„ $x$ -ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243#include&lt;cstdio&gt;#include&lt;map&gt;#include&lt;cmath&gt; using namespace std;inline long long fastpow(long long x,long long y,int p)&#123; long long res=1; while(y)&#123; if(y&amp;1) res=res*x%p; x=x*x%p; y&gt;&gt;=1; &#125; return res;&#125;long long p,a,b;map&lt;long long,int&gt;mp;int main()&#123; while(scanf(\"%lld%lld%lld\",&amp;p,&amp;a,&amp;b)!=EOF)&#123; mp.clear(); if(a%p==0)&#123; puts(\"no solution\"); continue; &#125; int flg=0,m=(int)sqrt((double)p)+1; long long now,t=fastpow(a,m,p); now=b%p; mp[now]=0; for(int j=1;j&lt;=m;j++)&#123; now=(now*a)%p; mp[now]=j; &#125; now=1; for(int i=1;i&lt;=m;i++)&#123; now=now*t%p; if(mp[now])&#123; flg=1; printf(\"%lld\\n\",((m*i-mp[now])%p+p)%p); break; &#125; &#125; if(!flg) puts(\"no solution\"); &#125; return 0;&#125; -æ‰©å±•BSGSä¼¼ä¹è¿˜æœ‰å¯ä»¥å¤„ç† $p$ ä¸æ˜¯æ•´æ•°çš„æƒ…å†µçš„æ‰©å±•BSGSç®—æ³•??å­¦ä¼šäº†å†æ›´ï¼ˆé€ƒé€ƒé€ƒé€ƒé€ƒï¼‰","tags":[{"name":"åˆ†å—","slug":"åˆ†å—","permalink":"http://blog.southe3n.cf/tags/åˆ†å—/"},{"name":"æ•°è®º","slug":"æ•°è®º","permalink":"http://blog.southe3n.cf/tags/æ•°è®º/"}]},{"title":"ã€å­¦ä¹ è®¡åˆ’ã€‘BZOJ","date":"2018-05-25T11:52:52.000Z","path":"2018/05/25/xuexijihuabzoj/","text":"æ²¡æœ‰æƒé™å·ï¼Œæ€•æ˜¯ã€‚ã€‚èƒ½æŠŠéæƒé™é¢˜åˆ·å®Œå°±ä¸é”™äº†å·²å’•ï¼Œæ‚è„¸ 1192 1000 1002 1968 1008 2038 3289 2463 2456 3751 3680 2330 3436 1854 3211 3212 1051 10501015 2002 1452 3732 1832 1787 2763 1191 2151 2242 1013 2705 2654 1877 1053 2662 1588 15073224 1500 1036 2243 2049 1507 2002 1036 3669 3110 3196 3223 3295 2157 4325 1251 1552 35063038 1699 1636 3282 1180 1146 3276 1984 3110 1901 2738 2527 3524 2223 2527 2588 2683 11763262 1901 1861 1602 3239 1878 3339 3585 2141 3809 3236 3781 1103 3653 2560 2561 1001 18341059 4326 3514 3545 3551 1066 1355 3931 1562 1370 3306 1367 1455 2819 2208 1529 1589 36732286 3252 1922 1179 1654 3040 1086 3611 1041 3172 1212 2594 2565 2563 2564 3932 3207 26311483 2733 4034 3626 4196 2843 4066 2716 2648 1941 2716 2850 2626 3053 3123 3706 2179 21942815 3798 3758 1026 3122 1031 2190 1607 2818 3505 2326 1297 2721 2186 3450 3211 3261 31662741 4103 3439 3289 3744 2982 3782 3757 3052 4129 2639 2599 2152 3697 1758 1095 1468 37843365 4016 3648 2178 1845 1101 2820 2693 4174 2659 1683 1001 3667 3000 3040 3028 3771 36962685 2318 3589 2393 3509 2054 3815 1770 1914 1132 3265 3251 4311 2671 1430 1123 1145 32621005 1007 1012 1014 1027 1029 1038 1042 1043 1057 1069 1076 1085 1208 1415 1426 1441 15021503 1597 1660 1856 1913 1923 1951 2005 2006 2115 2120 2124 2154 2257 2301 2338 2346 24402460 2568 2595 2622 2753 2823 2875 3039 3065 3083 3170 3210 3309 3401 3529 2178 2738 17171692 2251 2432 3451 2049 4069 2296 3119 3257 3802 3136 4259 2770 3901 2679 3511 3283 22264515 4514 4516 4518 4517 2395 3456 4269 4538 4539 4542 4537 4540 4545 4519 4520 4521 45264519 3834 1662 4523 4524 4522 3131 4008 3696 3456 2618 2178 4196 3917 2908 3838 2839 20241249 4038 3894 4327 3209 1026 3329 2458 4513 3007 2780 1061 3265 2215 3498 2344 4421 44514435 4452 4436 4449 4404 3112 4425 4429 4428 4430 4426 4431 4427 4441 4439 4440 4438 36003682 3658 3659 3720 4456 2362 1835 2827 3779 1087 2064 2693 2480 3530 4651 1398 3956 39942126 2125 4662 4664 4665 4666 4669 4668 4524 2759 3637 3639 3224 4712 3832 4476 4475 44773932 4482 4481 4231 2739 2216 4652 4643 4644 4128 2844 3105 4004 3777 3778 3145 3902 34733694 3692 3693 3695 3696 4771 4770 4766 3946 4284 4285 4003 4533 1137 3667 3223 3689 42904816 4818 4817 4830 4861 4860 3667 4327 4878 3884 4286 2917 4813 3588 3589 4282 3197 45183223 4555 1455 1797 4518 2648 1477 2976 4128 4031 3667 1467 1051 1123 4500 3998 2882 10692215 1061 3238 4327","tags":[]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘LinkCutTree","date":"2018-05-18T13:13:21.000Z","path":"2018/05/18/xuexibijilinkcuttree/","text":"æ´›è°· P3690 ã€æ¨¡æ¿ã€‘Link Cut Tree ï¼ˆåŠ¨æ€æ ‘ï¼‰è¿˜æ˜¯é‚£å¥è¯ï¼Œå…ˆæŠŠä»£ç è´´ä¸Šæ¥ï¼Œè¿™ç§å²è¯—çº§å·¨å‘æ€•æ˜¯å¡«ä¸åŠ¨çš„ï¼ˆé€ƒé€ƒé€ƒé€ƒé€ƒï¼‰ç­‰æˆ‘å“ªå¤©ï¼ˆä¸€å¹´åï¼Ÿï¼‰æœ‰ç©ºäº†å†æ¥å¡«å§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102#include&lt;cstdio&gt;using namespace std;const int N=300000;int ch[N][2],sum[N],rev[N],val[N],fa[N],st[N];int n,m,top;inline void swap(int &amp;y,int &amp;x)&#123;int t=x;x=y,y=t;&#125;inline int isroot(int u)&#123; return ch[fa[u]][0]!=u&amp;&amp;ch[fa[u]][1]!=u;&#125;inline void pushdown(int u)&#123; //ä¸‹æ”¾åè½¬æ ‡è®° if(!rev[u]) return; rev[ch[u][0]]^=1; rev[ch[u][1]]^=1; swap(ch[u][0],ch[u][1]); rev[u]=0;&#125;inline void update(int u)&#123; //æ›´æ–°splayå¼‚æˆ–å’Œ sum[u]=sum[ch[u][0]]^sum[ch[u][1]]^val[u];&#125;// ===========================Splayéƒ¨åˆ†===================================== inline void rotate(int u)&#123; int f=fa[u],grandf=fa[f],d=(ch[f][1]==u); if(!isroot(f)) ch[grandf][ch[grandf][1]==f]=u; fa[u]=grandf; ch[f][d]=ch[u][!d],fa[ch[u][!d]]=f; ch[u][!d]=f,fa[f]=u; update(f);&#125;inline void splay(int u)&#123; st[top=1]=u; for(int i=u;!isroot(i);i=fa[i]) st[++top]=fa[i]; while(top) pushdown(st[top]),top--; int f,grandf; while(!isroot(u))&#123; f=fa[u],grandf=fa[f]; if(!isroot(f)) ((ch[grandf][0]==f)==(ch[f][0]==u))?rotate(f):rotate(u); rotate(u); &#125; update(u);//splayçš„è¿‡ç¨‹ä¸­ä¸æ–­å‘splayçš„æ ¹æ›´æ–°ä¿¡æ¯ &#125;//============================LCTéƒ¨åˆ†======================================== inline int access(int u)&#123; //å…ˆå°†å½“å‰ç»“ç‚¹splayåˆ°æ ¹ï¼Œå†åˆ‡æ–­å…¶å³å„¿å­ï¼Œä¸æ–­å‘ä¸Šå¼€è¾Ÿè·¯å¾„ï¼Œç›´åˆ°å½“ä¸”ç»“ç‚¹ä¸ºåŸæ ‘çš„æ ¹ int now=0; while(u) &#123; splay(u); ch[u][1]=now; now=u; u=fa[u]; &#125; return now;&#125;inline void makeroot(int u)&#123; //ä½¿uç‚¹æˆä¸ºåŸæ ‘çš„æ ¹ï¼Œå…ˆä¸æ ¹è¿å‡ºè·¯å¾„ï¼Œå†å°†æ•´æ£µsplayç¿»è½¬å³å¯ access(u),splay(u),rev[u]^=1;&#125;inline int findroot(int u)&#123; //ç”±äºæ ¹èŠ‚ç‚¹ä¸€å®šæ¯”uç‚¹æ·±åº¦ä½ï¼Œå°†u splayåˆ°æ ¹ï¼Œå†ä¸æ–­å‘å·¦å„¿å­å¯»æ‰¾å³å¯ access(u),splay(u); int now=u; while(ch[now][0]) now=ch[now][0]; return now;&#125;inline void link(int u,int v)&#123; //è¿æ¥ä¸¤æ£µæ ‘ï¼ˆæ³¨æ„ä¸æ˜¯æŒ‡splayæ ‘ï¼ï¼ï¼ï¼‰ if(findroot(u)==findroot(v)) return; makeroot(u); fa[u]=v;//åªéœ€è¦æ ‡è®°çˆ¶ç»“ç‚¹ï¼Œå„¿å­ç»“ç‚¹ä¸éœ€è¦æ ‡è®° splay(v);&#125;inline void cut(int u,int v)&#123; makeroot(u); access(v); splay(v); if (fa[u]!=v&amp;&amp;!ch[u][1]) return;//åˆ¤æ–­æ˜¯å¦æœ‰è¾¹æ¡ä»¶è®°ç‰¢ã€‚ã€‚ ch[v][0]=(fa[u]=0);&#125;inline void change(int u,int x)&#123; splay(u); sum[u]^=val[u]^x; val[u]=x;&#125;inline int query(int u,int v)&#123; //è¦æŸ¥è¯¢ä¸€æ¡é“¾ä¸Šçš„ä¿¡æ¯ï¼Œå…ˆæŠŠè¿™æ¡é“¾æ„å»ºæˆä¸€æ£µsplayï¼Œå†æŸ¥è¯¢å…¶æ ¹ç»“ç‚¹çš„ä¿¡æ¯å°±å¯ä»¥äº† makeroot(u);access(v);splay(v); return sum[v];&#125;int main() &#123; scanf(\"%d%d\",&amp;n,&amp;m); for(int i=1; i&lt;=n; i++) scanf(\"%d\",&amp;val[i]); int opt,x,y; while(m--) &#123; scanf(\"%d%d%d\",&amp;opt,&amp;x,&amp;y); if(opt==0) printf(\"%d\\n\",query(x,y)); if(opt==1) link(x,y); if(opt==2) cut(x,y); if(opt==3) change(x,y); &#125; return 0;&#125;","tags":[{"name":"LCT","slug":"LCT","permalink":"http://blog.southe3n.cf/tags/LCT/"},{"name":"é«˜çº§æ•°æ®ç»“æ„","slug":"é«˜çº§æ•°æ®ç»“æ„","permalink":"http://blog.southe3n.cf/tags/é«˜çº§æ•°æ®ç»“æ„/"}]},{"title":"[ZJOI2013]Kå¤§æ•°æŸ¥è¯¢","date":"2018-05-09T11:05:17.000Z","path":"2018/05/09/zjoi2013kdashuchaxun/","text":"æ´›è°· P3332 [ZJOI2013]Kå¤§æ•°æŸ¥è¯¢BZOJ 3110åˆšåˆšåœ¨å®‰åˆ©ä¸‹ï¼Œåšäº†é“æ ‘å¥—æ ‘çš„è¿‘ä¼¼æ¨¡æ¿é¢˜å§è¿™æ˜¯ä¸€é“ æƒå€¼çº¿æ®µæ ‘ å¥— åŒºé—´çº¿æ®µæ ‘ çš„é¢˜ï¼Œè¦æ±‚åŠ¨æ€ä¿®æ”¹åŒºé—´ï¼ŒåŠ¨æ€æŸ¥è¯¢åŒºé—´ç¬¬ $k$ å¤§æ•°è‹¥å¤–å±‚åŒºé—´ä¸º$ï¼ˆl,rï¼‰$ï¼Œå†…å±‚ä¸º$ï¼ˆa,bï¼‰$ï¼Œåˆ™è¡¨ç¤ºåœ¨$ï¼ˆa,bï¼‰$åŒºé—´å†…ï¼Œæƒå€¼åœ¨$ï¼ˆl,rï¼‰$ä¸­çš„æ•°æœ‰å¤šå°‘ä¸ªã€‚ æ„Ÿè°¢lycçš„å€¾æƒ…è®²è§£ æ—¶é—´å¤æ‚åº¦ï¼š$O(N \\log^2 N)$123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include&lt;cstdio&gt;using namespace std;inline long long max(long long x,long long y)&#123;return x&gt;y?x:y;&#125;inline long long min(long long x,long long y)&#123;return x&lt;y?x:y;&#125;const int N=100000&lt;&lt;7;int a,x,y,z,n,m;int lazy[N],lson[N],rson[N],root[410000],cnt;long long sum[N];void add(int &amp;u,int l,int r)&#123; if(!u) u=++cnt; if(x&lt;=l&amp;&amp;y&gt;=r)&#123; sum[u]+=r-l+1; lazy[u]++; return; &#125; int mid=l+r&gt;&gt;1; if(x&lt;=mid) add(lson[u],l,mid); if(y&gt;mid) add(rson[u],mid+1,r); sum[u]=sum[lson[u]]+sum[rson[u]]+lazy[u]*(r-l+1);&#125;void ins(int u,int l,int r)&#123; add(root[u],1,n); if(l==r) return; int mid=l+r&gt;&gt;1; if(z&lt;=mid) ins(u&lt;&lt;1,l,mid); else ins(u&lt;&lt;1|1,mid+1,r);&#125;long long ask(int u,int l,int r)&#123; if(x&lt;=l&amp;&amp;y&gt;=r) return sum[u]; int mid=l+r&gt;&gt;1; long long res=0; if(x&lt;=mid) res+=ask(lson[u],l,mid); if(y&gt;mid) res+=ask(rson[u],mid+1,r); res+=lazy[u]*(min(y,r)-max(x,l)+1); return res;&#125;int query(int u,int l,int r)&#123; if(l==r) return l; int mid=l+r&gt;&gt;1; long long rsize=ask(root[u&lt;&lt;1|1],1,n); //æŸ¥è¯¢æ—¶åˆ¤æ–­å³å­åŒºé—´æœ‰å¤šå°‘ä¸ªæ•°ï¼Œè‹¥å¤§äºæ‰€æ±‚æ’ååˆ™ æ’å-=rsizeå¹¶ç»§ç»­åœ¨å·¦å­åŒºé—´ä¸­æŸ¥è¯¢ //å¦åˆ™åœ¨å³å­åŒºé—´ä¸­æŸ¥è¯¢ if(z&gt;rsize)&#123; z-=rsize; return query(u&lt;&lt;1,l,mid); &#125;else return query(u&lt;&lt;1|1,mid+1,r);&#125;int main()&#123; scanf(\"%d%d\",&amp;n,&amp;m); while(m--)&#123; scanf(\"%d%d%d%d\",&amp;a,&amp;x,&amp;y,&amp;z); if(a==1) ins(1,-50000,50000); else printf(\"%d\\n\",query(1,-50000,50000)); &#125; return 0;&#125;","tags":[{"name":"çº¿æ®µæ ‘","slug":"çº¿æ®µæ ‘","permalink":"http://blog.southe3n.cf/tags/çº¿æ®µæ ‘/"},{"name":"æ ‘å¥—æ ‘","slug":"æ ‘å¥—æ ‘","permalink":"http://blog.southe3n.cf/tags/æ ‘å¥—æ ‘/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘æ ‘çŠ¶æ•°ç»„","date":"2018-05-08T09:55:55.000Z","path":"2018/05/08/xuexibijishuzhuangshuzu/","text":"-æ¦‚å¿µä¸å®šä¹‰ æ ‘çŠ¶æ•°ç»„(Binary Indexed Tree(B.I.T), Fenwick Tree)æ˜¯ä¸€ä¸ªæŸ¥è¯¢å’Œä¿®æ”¹å¤æ‚åº¦éƒ½ä¸ºlog(n)çš„æ•°æ®ç»“æ„ã€‚ä¸»è¦ç”¨äºæŸ¥è¯¢ä»»æ„ä¸¤ä½ä¹‹é—´çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œä½†æ˜¯æ¯æ¬¡åªèƒ½ä¿®æ”¹ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼›ç»è¿‡ç®€å•ä¿®æ”¹å¯ä»¥åœ¨log(n)çš„å¤æ‚åº¦ä¸‹è¿›è¡ŒèŒƒå›´ä¿®æ”¹ï¼Œä½†æ˜¯è¿™æ—¶åªèƒ½æŸ¥è¯¢å…¶ä¸­ä¸€ä¸ªå…ƒç´ çš„å€¼(å¦‚æœåŠ å…¥å¤šä¸ªè¾…åŠ©æ•°ç»„åˆ™å¯ä»¥å®ç°åŒºé—´ä¿®æ”¹ä¸åŒºé—´æŸ¥è¯¢)ã€‚ ç”±å›¾ä¾‹å¯çŸ¥ï¼Œè®¾içš„äºŒè¿›åˆ¶æœ€é«˜ä½ä¸ºç¬¬ k ä½ï¼Œc[i]è®°å½•çš„æ˜¯ a[i-2k+1] åˆ° a[i] çš„å’Œè€Œè¿™ä¸ª 2k å¯ä»¥é€šè¿‡ i&amp;-i å¿«é€Ÿæ±‚å‡º -å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢123456789101112131415161718192021222324252627#include&lt;bits/stdc++.h&gt;using namespace std;int a,c[500010]= &#123;0&#125;,n,m,f,x,y;inline int lowbit(int x) &#123;return x&amp;-x;&#125;int getsum(int k) &#123; //æŸ¥è¯¢1..kçš„å’Œ int sum=0; for(int i=k; i&gt;0; i-=lowbit(i)) sum+=c[i]; return sum;&#125;void add(int k,int x) &#123; //å°†ç¬¬kä¸ªæ•°å¢åŠ x for(int i=k; i&lt;=n; i+=lowbit(i)) c[i]+=x;&#125;int main() &#123; scanf(\"%d%d\",&amp;n,&amp;m); for(int i=1; i&lt;=n; i++) &#123; scanf(\"%d\",&amp;a); add(i,a); &#125; for(int i=1; i&lt;=m; i++) &#123; scanf(\"%d%d%d\",&amp;f,&amp;x,&amp;y); if(f==1) add(x,y); else printf(\"%d\\n\",getsum(y)-getsum(x-1)); //æ±‚ç¬¬X-YåŒºé—´å†…æ•°çš„å’Œ &#125; return 0;&#125; -åŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢123456789101112131415161718192021222324252627282930313233343536373839#include&lt;bits/stdc++.h&gt;inline int lowbit(int x) &#123;return x&amp;-x;&#125;using namespace std;long long c[500010];//ä¸åŸç‰ˆä¸åŒï¼Œè¿™é‡Œçš„C[i]è®°å½•çš„æ˜¯A[i]-A[i-1]ï¼ˆA:åŸæ•°ç»„ï¼‰int n,m,q;void add(int k,long long x) &#123; for(int i=k; i&lt;=n; i+=lowbit(i)) c[i]+=x;&#125;long long getsum(int k) &#123; long long sum=0; for(int i=k; i&gt;0; i-=lowbit(i)) sum+=c[i]; return sum;&#125;int main() &#123; scanf(\"%d%d\",&amp;n,&amp;m); long long last=0,now; for (int i=1; i&lt;=n; i++) &#123; scanf(\"%lld\",&amp;now); add(i,now-last); //å·®åˆ†æ•°ç»„ last=now; &#125; for(int i=1; i&lt;=m; i++) &#123; scanf(\"%d\",&amp;q); if (q==1) &#123; int x,y; long long k; scanf(\"%d%d%lld\",&amp;x,&amp;y,&amp;k); add(x,k); //åŒºé—´ä¿®æ”¹æ—¶ï¼Œc[x]åŠ ä¸Škï¼Œc[y+1]å‡kå³å¯ add(y+1,-k); &#125; else &#123; int x; scanf(\"%d\",&amp;x); printf(\"%lld\\n\",getsum(x)); //a[i]=c[1]+c[2]+c[3]+...+c[i] &#125; &#125; return 0;&#125; -åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢123456789101112131415161718192021222324252627282930313233#include&lt;cstdio&gt;#define ll long longusing namespace std;ll n,m,c1[100005],c2[100005];inline void add(int x,int y)&#123; ll add1=y,add2=x*y; for (int i=x;i&lt;=n;i+=i&amp;-i) c1[i]+=add1,c2[i]+=add2;&#125;inline ll query(int x)&#123; ll sum1=0,sum2=0; for (int i=x;i&gt;0;i-=i&amp;-i) sum1+=c1[i],sum2+=c2[i]; return sum1*(x+1)-sum2;&#125;int main() &#123; scanf(\"%lld%lld\",&amp;n,&amp;m); long long x; for(int i=1; i&lt;=n; i++) scanf(\"%lld\",&amp;x),add(i,x),add(i+1,-x); for(int i=1; i&lt;=m; i++) &#123; int t,x,y,z; scanf(\"%d\",&amp;t); if(t==1) &#123; scanf(\"%d%d%d\",&amp;x,&amp;y,&amp;z); add(x,z),add(y+1,-z); &#125; else &#123; scanf(\"%d%d\",&amp;x,&amp;y); printf(\"%lld\\n\",query(y)-query(x-1)); &#125; &#125; return 0;&#125;","tags":[{"name":"é«˜çº§æ•°æ®ç»“æ„","slug":"é«˜çº§æ•°æ®ç»“æ„","permalink":"http://blog.southe3n.cf/tags/é«˜çº§æ•°æ®ç»“æ„/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘æ ‘é“¾å‰–åˆ†","date":"2018-05-08T02:34:07.000Z","path":"2018/05/08/xuexibijishulianpoufen/","text":"ç›®å‰å…ˆæŠŠä»£ç è´´ä¸Šæ¥ä»¥åæœ‰æ—¶é—´å†æ›´ï¼Ÿï¼Ÿï¼Ÿï¼ˆé€ƒé€ƒé€ƒé€ƒé€ƒï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132#include&lt;cstdio&gt; using namespace std;int val[110000],dep[110000],fa[110000],size[110000],son[110000],id[110000],top[110000],newval[110000],dfn;int head[110000],to[210000],nxt[210000],cnt;int n,m,s,p;struct segtree&#123; //çº¿æ®µæ ‘ int lazy[410000],sum[410000],l[410000],r[410000]; inline void build(int k,int ll,int rr)&#123; l[k]=ll,r[k]=rr,lazy[k]=0; if(ll==rr)&#123; sum[k]=newval[ll]; if(sum[k]&gt;=p) sum[k]%=p; return; &#125; int mid=ll+rr&gt;&gt;1; build(k&lt;&lt;1,ll,mid); build(k&lt;&lt;1|1,mid+1,rr); sum[k]=sum[k&lt;&lt;1]+sum[k&lt;&lt;1|1]; if(sum[k]&gt;=p) sum[k]%=p; &#125; inline void pushdown(int k)&#123; if(!lazy[k]) return; sum[k&lt;&lt;1]+=lazy[k]*(r[k&lt;&lt;1]-l[k&lt;&lt;1]+1); sum[k&lt;&lt;1|1]+=lazy[k]*(r[k&lt;&lt;1|1]-l[k&lt;&lt;1|1]+1); if(sum[k&lt;&lt;1]&gt;=p) sum[k&lt;&lt;1]%=p; if(sum[k&lt;&lt;1|1]&gt;=p) sum[k&lt;&lt;1|1]%=p; lazy[k&lt;&lt;1]=(lazy[k&lt;&lt;1]+lazy[k])%p; lazy[k&lt;&lt;1|1]=(lazy[k&lt;&lt;1|1]+lazy[k])%p; lazy[k]=0; &#125; inline int query(int k,int x,int y)&#123; if(l[k]==x&amp;&amp;r[k]==y) return sum[k]; pushdown(k); int mid=l[k]+r[k]&gt;&gt;1; if(x&gt;mid) return query(k&lt;&lt;1|1,x,y); else if(y&gt;mid) return (query(k&lt;&lt;1,x,mid)+query(k&lt;&lt;1|1,mid+1,y))%p; else return query(k&lt;&lt;1,x,y); &#125; inline void update(int k,int x,int y,int val)&#123; if(l[k]&gt;=x&amp;&amp;r[k]&lt;=y)&#123; lazy[k]+=val; if(lazy[k]&gt;=p) lazy[k]%=p; sum[k]=sum[k]+val*(r[k]-l[k]+1); if(sum[k]&gt;=p) sum[k]%=p; return; &#125; pushdown(k); int mid=l[k]+r[k]&gt;&gt;1; if(x&gt;mid) update(k&lt;&lt;1|1,x,y,val); else if(y&gt;mid) update(k&lt;&lt;1,x,mid,val),update(k&lt;&lt;1|1,mid+1,y,val); else update(k&lt;&lt;1,x,y,val); sum[k]=sum[k&lt;&lt;1]+sum[k&lt;&lt;1|1]; if(sum[k]&gt;=p) sum[k]%=p; &#125;&#125;sgt;inline void add(int u,int v)&#123; to[++cnt]=v,nxt[cnt]=head[u],head[u]=cnt;&#125;void dfs1(int u,int ff)&#123; dep[u]=dep[ff]+1; size[u]=1; fa[u]=ff; for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(v==ff) continue; dfs1(v,u); size[u]+=size[v]; if(!son[u]||size[v]&gt;size[son[u]]) son[u]=v; &#125;&#125;void dfs2(int u,int topp)&#123; top[u]=topp; id[u]=++dfn; newval[dfn]=val[u]; if(son[u]) dfs2(son[u],topp); for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(v!=fa[u]&amp;&amp;v!=son[u]) dfs2(v,v); &#125;&#125;inline void pathchange(int x,int y,int val)&#123;//è·¯å¾„ä¿®æ”¹ while(top[x]!=top[y]) if(dep[top[x]]&gt;=dep[top[y]]) sgt.update(1,id[top[x]],id[x],val),x=fa[top[x]]; else sgt.update(1,id[top[y]],id[y],val),y=fa[top[y]]; if(dep[x]&lt;=dep[y]) sgt.update(1,id[x],id[y],val); else sgt.update(1,id[y],id[x],val);&#125;inline int pathquery(int x,int y)&#123; //è·¯å¾„æŸ¥è¯¢ int res=0; while(top[x]!=top[y])&#123; if(dep[top[x]]&gt;=dep[top[y]]) res+=sgt.query(1,id[top[x]],id[x]),x=fa[top[x]]; else res+=sgt.query(1,id[top[y]],id[y]),y=fa[top[y]]; if(res&gt;=p) res%=p; &#125; if(dep[x]&lt;=dep[y]) res+=sgt.query(1,id[x],id[y]); else res+=sgt.query(1,id[y],id[x]); if(res&gt;=p) res%=p; return res;&#125;inline void treechange(int u,int val)&#123; //å­æ ‘ä¿®æ”¹ sgt.update(1,id[u],id[u]+size[u]-1,val);&#125;inline int treequery(int u)&#123; //å­æ ‘æŸ¥è¯¢ return sgt.query(1,id[u],id[u]+size[u]-1);&#125;int main()&#123; scanf(\"%d%d%d%d\",&amp;n,&amp;m,&amp;s,&amp;p); for(int i=1;i&lt;=n;i++) scanf(\"%d\",&amp;val[i]); for(int i=1,x,y;i&lt;n;i++) scanf(\"%d%d\",&amp;x,&amp;y),add(x,y),add(y,x); dfs1(s,s); dfs2(s,s); //ä¸¤æ¬¡dfså°†æ ‘è¿›è¡Œè½»é‡é“¾å‰–åˆ† sgt.build(1,1,n); int type,x,y,z; while(m--)&#123; scanf(\"%d\",&amp;type); if(type==1) scanf(\"%d%d%d\",&amp;x,&amp;y,&amp;z),pathchange(x,y,z); if(type==2) scanf(\"%d%d\",&amp;x,&amp;y),printf(\"%d\\n\",pathquery(x,y)); if(type==3) scanf(\"%d%d\",&amp;x,&amp;y),treechange(x,y); if(type==4) scanf(\"%d\",&amp;x),printf(\"%d\\n\",treequery(x)); &#125; return 0;&#125;","tags":[{"name":"æ ‘å‰–","slug":"æ ‘å‰–","permalink":"http://blog.southe3n.cf/tags/æ ‘å‰–/"},{"name":"çº¿æ®µæ ‘","slug":"çº¿æ®µæ ‘","permalink":"http://blog.southe3n.cf/tags/çº¿æ®µæ ‘/"},{"name":"é«˜çº§æ•°æ®ç»“æ„","slug":"é«˜çº§æ•°æ®ç»“æ„","permalink":"http://blog.southe3n.cf/tags/é«˜çº§æ•°æ®ç»“æ„/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘å¯å¹¶å †ï¼ˆå·¦åæ ‘ï¼‰","date":"2018-05-06T10:54:39.000Z","path":"2018/05/06/xuexibijikebingduizuopianshu/","text":"æ´›è°· P3377 ã€æ¨¡æ¿ã€‘å·¦åæ ‘ï¼ˆå¯å¹¶å †ï¼‰-æ¦‚å¿µåŠå®šä¹‰äºŒå‰å †æ˜¯ä¸€ç§å®¹å™¨ï¼Œæ”¯æŒO(logn)åˆ é™¤ã€æ’å…¥ï¼ŒO(1)æŸ¥è¯¢æœ€å°å€¼çš„æ“ä½œï¼Œå¯è°“åˆ‡é¢˜å¿…å¤‡çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦è¿›è¡Œå †çš„åˆå¹¶æ“ä½œæ—¶ï¼Œæˆ‘ä»¬ä¼šæƒŠå–œåœ°å‘ç°ï¼Œéœ€è¦O(n)çš„æ—¶é—´ï¼Œè¿™æ˜¯æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªå«å¯å¹¶å †çš„ä¸œè¥¿äº†~~å¸¸ç”¨çš„å¯å¹¶å †æœ‰ä¸‰ç§â€”â€”â€”â€”å·¦åæ ‘ï¼ŒäºŒé¡¹å †ï¼Œæ–æ³¢é‚£å¥‘å †ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»æœ€ç®€å•æ˜“å†™çš„å·¦åæ ‘ å·¦åæ ‘æ˜¯ä¸€æ£µäºŒå‰æ ‘ï¼Œæ¯ä¸ªç»“ç‚¹å…·æœ‰keyå€¼å’Œdistå€¼ã€‚keyå€¼æ»¡è¶³å †çš„æ€§è´¨ã€‚distå€¼å®šä¹‰å¦‚ä¸‹ï¼šè‹¥ç»“ç‚¹ u çš„å·¦å­æ ‘æˆ–å³å­æ ‘ä¸ºç©ºï¼Œåˆ™ u ä¸ºå¤–ç»“ç‚¹ï¼ŒèŠ‚ç‚¹içš„distå€¼æ˜¯èŠ‚ç‚¹iåˆ°å®ƒçš„åä»£ä¸­æœ€è¿‘çš„å¤–èŠ‚ç‚¹æ‰€ç»è¿‡çš„è¾¹æ•°ã€‚å¤–ç»“ç‚¹çš„distä¸º0ï¼Œè€Œç©ºèŠ‚ç‚¹çš„distä¸º-1ã€‚ å·¦åæ ‘æ»¡è¶³ä¸¤æ¡åŸºæœ¬æ€§è´¨ï¼š å †çš„æ€§è´¨ï¼Œå³çˆ¶ç»“ç‚¹keyå€¼å°äºå…¶å­ç»“ç‚¹keyå€¼ ç»“ç‚¹çš„å·¦å­ç»“ç‚¹çš„distä¸å°äºå³å­ç»“ç‚¹çš„distï¼ˆå³å·¦åæ€§è´¨ï¼‰ã€‚å³dist(left(i))â‰¥dist(right(i))ã€‚è¿™æ¡æ€§è´¨æ˜¯ä¸ºäº†ä½¿æˆ‘ä»¬å¯ä»¥ä»¥æ›´å°çš„ä»£ä»·åœ¨å †çš„å…¶å®ƒä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼ˆæ’å…¥èŠ‚ç‚¹ã€åˆ é™¤æœ€å°èŠ‚ç‚¹ï¼‰è¿›è¡Œåç»´æŒå †æ€§è´¨ã€‚åœ¨åé¢æˆ‘ä»¬å°±ä¼šçœ‹åˆ°å®ƒçš„ä½œç”¨ã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„è¡ç”Ÿæ€§è´¨ï¼šç»“ç‚¹çš„distç­‰äºå®ƒçš„å³å­ç»“ç‚¹çš„è·ç¦»åŠ 1ã€‚ -Mergeæ“ä½œå·¦åæ ‘æœ€ä¸»è¦çš„æ“ä½œå°±æ˜¯åˆå¹¶ä¸¤ä¸ªå †ï¼Œä¸‹é¢æ˜¯åˆå¹¶æ“ä½œçš„ä¸»è¦è¿‡ç¨‹ã€‚ã€‚ã€‚ åœ¨åˆå¹¶æ“ä½œä¸­ï¼Œæœ€ç®€å•çš„æƒ…å†µæ˜¯å…¶ä¸­ä¸€æ£µæ ‘ä¸ºç©ºã€‚è¿™æ—¶æˆ‘ä»¬åªé¡»è¦è¿”å›å¦ä¸€æ£µæ ‘ã€‚ è‹¥Aå’ŒBéƒ½éç©ºï¼Œæˆ‘ä»¬å‡è®¾Açš„æ ¹èŠ‚ç‚¹å°äºç­‰äºBçš„æ ¹èŠ‚ç‚¹ï¼ˆå¦åˆ™äº¤æ¢A,Bï¼‰ï¼ŒæŠŠAçš„æ ¹èŠ‚ç‚¹ä½œä¸ºæ–°æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œç„¶ååˆå¹¶Açš„å³å­æ ‘right(A) å’ŒBï¼ˆå³é€’å½’è°ƒç”¨merge(right(A) , B )ï¼‰ã€‚ right(A)å’ŒBåˆå¹¶åï¼Œright(A) çš„distå¯èƒ½ä¼šå˜å¤§ï¼Œè‹¥right(A)çš„dist å¤§äºleft(A) çš„distï¼Œå·¦åæ ‘çš„æ€§è´¨2å°±ä¼šè¢«ç ´åï¼Œæˆ‘ä»¬å°±éœ€è¦äº¤æ¢left(A) å’Œright(A)ã€‚ æœ€åï¼Œç”±äºright(A) çš„è·ç¦»å¯èƒ½å‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬å¿…é¡»æ›´æ–°Açš„è·ç¦»ï¼š dist(A) â† dist(right(A)) + 1 å…¶ä»–çš„æ“ä½œå‡å¯é€šè¿‡è°ƒç”¨mergeæ¥å®Œæˆ -ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#include&lt;cstdio&gt;#include&lt;ctype.h&gt;using namespace std;inline int read()&#123; int x=0,f=1; char ch; ch=getchar(); while(!isdigit(ch)) &#123;if(ch=='-') f=-1; ch=getchar();&#125; while(isdigit(ch))&#123;x=(x&lt;&lt;3)+(x&lt;&lt;1)+ch-48;ch=getchar();&#125; return x*f;&#125;int fa[110000],dist[110000],val[110000],l[110000],r[110000];int n,m;int getf(int x)&#123; while(fa[x]) x=fa[x]; //æ³¨æ„å¹¶æŸ¥é›†ä¸è¦è·¯å¾„å‹ç¼© return x;&#125; inline void swap(int &amp;x,int &amp;y)&#123;int t=x;x=y,y=t;&#125; int merge(int x,int y)&#123; if(x==0||y==0) return x+y; //å½“å·¦/å³å­æ ‘ä¸ºç©ºæ—¶ï¼Œè¿”å›å¦ä¸€å­æ ‘å³å¯ if(val[x]==val[y]?x&gt;y:val[x]&gt;val[y]) swap(x,y);//å°†æ ¹è¾ƒå°çš„æ”¾åœ¨å·¦è¾¹ï¼Œä½œä¸ºæ–°çš„å­æ ‘çš„æ ¹ r[x]=merge(r[x],y); //å³è¾¹çš„å­æ ‘å°†æ”¾åœ¨å·¦è¾¹å­æ ‘çš„å³å­æ ‘ä¸­ï¼Œæ‰€ä»¥é€’å½’è°ƒç”¨ï¼Œå°†å·¦è¾¹å­æ ‘çš„å³å­æ ‘ä¸å³è¾¹å­æ ‘åˆå¹¶ fa[r[x]]=x; //æ›´æ–°çˆ¶èŠ‚ç‚¹ if(dist[r[x]]&gt;dist[l[x]]) swap(l[x],r[x]); //è‹¥æ­¤æ—¶æ–°å­æ ‘çš„å·¦å­æ ‘distæ¯”å³å­æ ‘å°ï¼Œåˆ™å°†å³å­æ ‘ä¸å·¦å­æ ‘è°ƒæ¢ dist[x]=dist[r[x]]+1; //æ ¹æ®å·¦åæ ‘çš„æ€§è´¨ï¼ŒèŠ‚ç‚¹çš„distå€¼æ˜¯å®ƒå³å­æ ‘dist+1 return x; &#125;inline void pop(int x)&#123; val[x]=-1; //åˆ é™¤åvalæ ‡è®°ä¸º-1 fa[l[x]]=fa[r[x]]=0; merge(l[x],r[x]);&#125;int main()&#123; n=read(),m=read(); dist[0]=-1; //ç©ºç»“ç‚¹distå€¼ä¸º-1ï¼ˆå¾ˆé‡è¦ï¼ï¼ï¼ï¼‰ for(int i=1;i&lt;=n;i++) val[i]=read(); int type,x,y; while(m--)&#123; type=read(); if(type==1)&#123; x=read(),y=read(); if(val[x]==-1||val[y]==-1) continue; int fx=getf(x),fy=getf(y); if(fx==fy) continue; merge(fx,fy); &#125;else&#123; x=read(); if(val[x]==-1) puts(\"-1\"); else&#123; int fx=getf(x); printf(\"%d\\n\",val[fx]); pop(fx); &#125; &#125; &#125; return 0;&#125;","tags":[{"name":"é«˜çº§æ•°æ®ç»“æ„","slug":"é«˜çº§æ•°æ®ç»“æ„","permalink":"http://blog.southe3n.cf/tags/é«˜çº§æ•°æ®ç»“æ„/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘ç½‘ç»œæœ€å¤§æµ","date":"2018-05-02T02:19:15.000Z","path":"2018/05/02/xuexibijiwangluozuidaliu/","text":"æ´›è°· P3376 ã€æ¨¡æ¿ã€‘ç½‘ç»œæœ€å¤§æµ-æ¦‚å¿µåŠå®šä¹‰ è®¾å›¾G(V,E)ä¸ºä¸€ä¸ªæœ‰å‘å¸¦æƒå›¾ï¼ŒæŒ‡å®šä¸¤ä¸ªé¡¶ç‚¹åˆ†åˆ«ä¸ºæºç‚¹å’Œæ±‡ç‚¹ï¼ˆså’Œtï¼‰ï¼Œè¾¹æƒå³ä¸ºæ¯æ¡è¾¹çš„å®¹é‡ï¼Œç§°ä¸ºå®¹é‡ç½‘ç»œã€‚æ±‚ä½¿ s -&gt; t æµé‡æœ€å¤§çš„æ–¹æ¡ˆï¼Œå¹¶æ»¡è¶³f(u,v) &lt;= c(u,v) ï¼ˆfè¡¨ç¤ºè¾¹(u,v)å®é™…æµé‡ï¼Œcè¡¨ç¤ºè¾¹ï¼ˆu,v)å®¹é‡ï¼‰ï¼Œs,t å¤–æ¯ä¸ªç‚¹çš„æµå‡ºæµé‡å’Œæµå…¥æµé‡ç›¸ç­‰ å¦‚ä¸‹å›¾å³ä¸ºä¸€ä¸ªå®¹é‡ç½‘ç»œä¸å…¶æœ€å¤§æµæ–¹æ¡ˆï¼Œï¼ˆx,yï¼‰ è¡¨ç¤ºè¾¹å®¹é‡ä¸º xï¼Œå®é™…æµé‡ä¸º yã€‚ -ã€Dinic ç®—æ³•ã€‘æ—¶é—´å¤æ‚åº¦: ä¸Šç•Œ$O(V^2E)$ï¼Œå®é™…ä½¿ç”¨ä¸­ä¸€èˆ¬æ›´å¿«ç©ºé—´å¤æ‚åº¦: $O(V+E)$ä¸»è¦æ€æƒ³ï¼š è¾“å…¥é›¶æµå›¾ï¼Œå»ºç«‹æ®‹é‡ç½‘ç»œã€‚ ç”¨ BFS å°†æ®‹é‡ç½‘ç»œåˆ†å±‚ï¼Œå…¶ä¸­æºç‚¹ä¸ºç¬¬ 1 å±‚ã€‚ ç”¨ DFS åœ¨åˆ†å±‚å›¾ä¸­å¯»æ‰¾å¢å¹¿è·¯ï¼Œç¡®ä¿è·¯å¾„ä¸Šçš„ç‚¹çš„å±‚æ¬¡é€’å¢ã€‚ è‹¥å­˜åœ¨å¢å¹¿è·¯ï¼Œåˆ™åœ¨ DFS å›æº¯æ—¶ç”¨å¢æµæ›´æ–°æ®‹é‡ç½‘ç»œï¼Œé€€å‡ºåå°†å…¶è®¡å…¥æ€»æµé‡ã€‚ é‡å¤è¿‡ç¨‹2~4ï¼Œç›´åˆ°åœ¨BFSä¸­æ— æ³•åœ¨æ®‹é‡ç½‘ç»œä¸­ä»æºç‚¹åˆ°è¾¾æ±‡ç‚¹ï¼Œåˆ™è¯´æ˜å·²ç»æ²¡æœ‰å¢å¹¿è·¯ã€‚è¾“å‡ºæ€»æµé‡ï¼Œå³ä¸ºæœ€å¤§æµã€‚ ä¼˜åŒ–ï¼šå½“å‰å¼§ä¼˜åŒ–123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960#include&lt;cstdio&gt;#include&lt;queue&gt;#include&lt;cstring&gt;#define ll long longusing namespace std;ll cur[11000],to[210000],w[210000],nxt[210000],head[11000],dep[11000];ll n,m,s,t,cnt,maxflow;inline ll min(int x,int y) &#123;return x&lt;y?x:y;&#125;inline void add(int u,int v,int c) &#123; to[++cnt]=v,w[cnt]=c,nxt[cnt]=head[u],head[u]=cnt; to[++cnt]=u,w[cnt]=0,nxt[cnt]=head[v],head[v]=cnt; //å»ºåå‘è¾¹ï¼Œåˆå§‹æµä¸º0&#125;queue&lt;ll&gt; q;inline ll bfs() &#123; //åœ¨æ®‹é‡ç½‘ç»œä¸Šæ„é€ åˆ†å±‚å›¾ memset(dep,0,sizeof dep); while(q.size()) q.pop();//æ¸…ç©ºé˜Ÿåˆ— q.push(s); dep[s]=1; //å°†æºç‚¹å…¥é˜Ÿ while(q.size()) &#123; int u=q.front(); q.pop(); for(int i=head[u]; i; i=nxt[i]) if(w[i]&amp;&amp;!dep[to[i]]) &#123; q.push(to[i]); dep[to[i]]=dep[u]+1; if(to[i]==t) return 1; //åˆ°æ±‡ç‚¹ç›´æ¥é€€å‡º &#125; &#125; return 0; //åœ¨å½“å‰æ®‹é‡ç½‘ç»œä¸‹ï¼Œæ— æ³•ä»æºç‚¹åˆ°è¾¾æ±‡ç‚¹äº†&#125;inline ll dinic(int u,int flow) &#123;//åœ¨å½“å‰åˆ†å±‚å›¾ä¸Šå¢å¹¿ if(u==t) return flow; int k,rest=flow; for(int i=cur[u]; i&amp;&amp;rest; i=nxt[i])&#123; cur[u]=i; //å½“å‰å¼§ä¼˜åŒ– if(w[i]&amp;&amp;dep[to[i]]==dep[u]+1) &#123; k=dinic(to[i],min(rest,w[i])); if(!k) dep[to[i]]=0; //è‹¥å½“å‰èŠ‚ç‚¹æ— æ³•ç»§ç»­å¢å¹¿ï¼Œå°†å…¶ä»åˆ†å±‚å›¾ä¸­åˆ å» w[i]-=k; //åœ¨å½“å‰è¾¹å‡å»æµ w[i^1]+=k; //åœ¨åå‘è¾¹åŠ ä¸Šæµ rest-=k; //æ®‹ä½™å®¹é‡å‡å»æµ &#125; &#125; cur[u]=head[u]; //æ³¨æ„åœ¨å½“å‰ç‚¹è·‘å®Œåå°†å…¶å½“å‰å¼§æ ‡è®°é‡ç½® return flow-rest;&#125;int main() &#123; scanf(\"%lld%lld%lld%lld\",&amp;n,&amp;m,&amp;s,&amp;t); cnt=1; //cntä»¥1å¼€å§‹ï¼Œä½¿è¾¹çš„åºå·ä»2å¼€å§‹ï¼Œæ–¹ä¾¿ä¹‹åçš„^è¿ç®—æ‰¾åå‘è¾¹åºå· for(int i=1,x,y,z; i&lt;=m; i++) scanf(\"%d%d%d\",&amp;x,&amp;y,&amp;z),add(x,y,z); int flow=0; for(int i=1;i&lt;=n;i++) cur[i]=head[i]; while(bfs()) //è¿è¡Œåˆ°æ— æ³•åœ¨æ®‹é‡ç½‘ç»œä¸Šä»æºç‚¹åˆ°æ±‡ç‚¹ä¸ºæ­¢ while(flow=dinic(s,2e9)) maxflow+=flow; printf(\"%lld\",maxflow); return 0;&#125; -ã€SAPç®—æ³•ã€‘æ—¶é—´å¤æ‚åº¦ï¼šä¸Šç•Œ$O(V^2E)$ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ¯”$Dinic$å¿« ä¸»è¦æ€æƒ³ï¼š $Dinic$ä¸­æ¯æ¬¡æ±‚åˆ†å±‚å›¾éƒ½è¦è¿›è¡Œä¸€æ¬¡bfsï¼Œæ•ˆç‡æ¯”è¾ƒä½ä¸‹ï¼Œå› ä¸ºæ¯ä¸€æ¬¡å±‚æ¬¡å›¾çš„æ”¹åŠ¨å¹¶ä¸æ˜¯éå¸¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ç›´æ¥åœ¨dfså¢å¹¿çš„æ—¶å€™ä¿®æ”¹åˆ†å±‚å›¾æ¥ä¼˜åŒ–æ±‚åˆ†å±‚å›¾çš„è¿‡ç¨‹ã€‚ æ„Ÿè°¢zyhå·¨çˆ·æä¾›çš„æ¨¡æ¿å’Œlycå·¨é­”çš„è®²è§£ï¼(ç•¥ç•¥ç•¥ç•¥ç•¥~ï¼‰ ä¼˜åŒ–ï¼š è‹¥æ·±åº¦æ ‡å·å‡ºç°äº†æ–­å±‚ï¼Œé‚£ä¹ˆæ˜¾ç„¶æ— æ³•ç»§ç»­å¢å¹¿ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªcountæ•°ç»„è®°å½•æ¯ä¸ªå±‚æ¬¡çš„ç»“ç‚¹æœ‰å¤šå°‘ä¸ªï¼Œå¦‚æœå½“å‰ä¿®æ”¹äº†æœ€åä¸€ä¸ªæŸä¸ªå±‚æ¬¡çš„ç»“ç‚¹çš„æ·±åº¦æ ‡å·ï¼Œé‚£ä¹ˆå°±å‡ºç°äº†æ–­å±‚ï¼Œå¯ä»¥ç»“æŸè¿è¡Œäº†ã€‚ å½“å‰å¼§ä¼˜åŒ–ï¼šå¢å¹¿è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªç‚¹çš„æ·±åº¦æ ‡å·æ²¡æœ‰ä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆå®ƒå·²ç»éå†è¿‡çš„è¾¹ä¸éœ€è¦å†éå†ä¸€æ¬¡ï¼Œç”¨curæ•°ç»„è®°å½•éå†åˆ°å“ªæ¡è¾¹ï¼Œä¸‹ä¸€æ¬¡ä»è¿™æ¡è¾¹å¼€å§‹éå†ã€‚ ç»è¿‡æ¯ä¸ªç‚¹åç›´æ¥å°†å…¶æ·±åº¦æ ‡å·+1å³å¯æ›´æ–°åˆ†å±‚å›¾ã€‚ åŒDinicä¸­ï¼Œå¦‚æœå®é™…æµé‡å·²ç»è¾¾åˆ°æ®‹ä½™å®¹é‡äº†ç›´æ¥é€€å‡ºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include&lt;cstdio&gt;#include&lt;cstring&gt;#define ll long longusing namespace std;ll n,m,s,t,cnt,ans;ll head[11000],nxt[210000],to[210000],w[210000],dep[11000],cur[11000],count[11000];inline ll min(ll x,ll y)&#123;return x&lt;y?x:y;&#125;inline void add(ll u,ll v,ll c)&#123; to[++cnt]=v; nxt[cnt]=head[u]; w[cnt]=c; head[u]=cnt;&#125;ll dfs(ll u,ll maxflow)&#123; if (u==t) return maxflow; ll flow=0; //è®°å½•å®é™…æµé‡ for (int i=cur[u];i;i=nxt[i])&#123; cur[u]=i; //å½“å‰å¼§ä¼˜åŒ– if (w[i]&amp;&amp;dep[to[i]]+1==dep[u])&#123; //åªæœ‰åœ¨åˆ†å±‚å›¾ä¸­å¤„äºç‚¹uä¸‹ä¸€å±‚çš„ç‚¹æ‰ä¼šå»å°è¯•å¢å¹¿ ll now=dfs(to[i],min(w[i],maxflow-flow)); //è¿›è¡Œå¢å¹¿ flow+=now; w[i]-=now; w[i^1]+=now; if (maxflow==flow) return flow; //è‹¥å®é™…æµå·²ç»åˆ°è¾¾å½“å‰ç‚¹çš„æœ€å¤§æµï¼Œè¯´æ˜æµé‡ä¸ä¼šå†å¢å¤§ï¼Œç›´æ¥é€€å‡º &#125; &#125; cur[u]=head[u]; //è·‘å®Œè¯¥ç‚¹åå°†å…¶å½“å‰å¼§æ ‡è®°é‡ç½® if (--count[dep[u]]==0) dep[s]=n; //å°†è¯¥æ·±åº¦çš„ç‚¹çš„æ•°é‡-1ï¼Œè‹¥åˆ†å±‚å›¾ä¸­å‡ºç°æ–­å±‚ï¼Œåˆ™æ ‡è®°é€€å‡º count[++dep[u]]++; //å°†è¯¥ç‚¹æ·±åº¦+1å¹¶æ›´æ–°æ·±åº¦è®¡æ•° return flow;&#125;int main()&#123; scanf(\"%lld%lld%lld%lld\",&amp;n,&amp;m,&amp;s,&amp;t); cnt=1; memset(dep,0,sizeof(dep)); count[0]=n; //åˆå§‹åŒ–æ·±åº¦å€¼ï¼Œå°†æ·±åº¦ä¸º0çš„ç‚¹çš„æ•°é‡è®°ä¸ºn for(ll i=1,x,y,z;i&lt;=m;i++)&#123; scanf(\"%lld%lld%lld\",&amp;x,&amp;y,&amp;z); add(x,y,z); add(y,x,0); //å»ºç«‹åå‘å›¾ &#125; while(dep[s]&lt;n) //ç›´åˆ°è·å¾—é€€å‡ºæ ‡è®° ans+=dfs(s,2e9); printf(\"%lld\",ans); return 0;&#125; -äºŒåˆ†å›¾æœ€å¤§åŒ¹é…ç”¨æœ€å¤§æµç®—æ³•è§£å†³ä¸»è¦æ€æƒ³ï¼š åœ¨åŸäºŒåˆ†å›¾ä¸­å¢åŠ ä¸€ä¸ªæºç‚¹så’Œä¸€ä¸ªæ±‡ç‚¹t æºç‚¹så‘é›†åˆXæ¯ä¸ªç‚¹è¿ä¸€æ¡æœ‰å‘è¾¹ï¼Œé›†åˆYæ¯ä¸ªç‚¹å‘æ±‡ç‚¹tè¿ä¸€æ¡æœ‰å‘è¾¹ å°†åŸå›¾çš„æ¯æ¡è¾¹æ”¹ä¸ºä»é›†åˆXå‘é›†åˆYçš„æœ‰å‘è¾¹ èµ‹æ¯æ¡è¾¹çš„å®¹é‡ä¸º1 æ±‚æºç‚¹åˆ°æ±‡ç‚¹çš„æœ€å¤§æµå³ä¸ºæœ€å¤§åŒ¹é… ä¼˜ç‚¹ï¼šå®Œäº†ï¼Œä¸çŸ¥é“ï¼Œæ— è„‘ä¸€ç‚¹ï¼Ÿ","tags":[{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"http://blog.southe3n.cf/tags/å›¾è®º/"},{"name":"ç½‘ç»œæµ","slug":"ç½‘ç»œæµ","permalink":"http://blog.southe3n.cf/tags/ç½‘ç»œæµ/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘äºŒåˆ†å›¾æœ€å¤§åŒ¹é…(åŒˆç‰™åˆ©ç®—æ³•)","date":"2018-05-01T11:52:54.000Z","path":"2018/05/01/xuexibijierfentuzuidapipeixiongyalisuanfa/","text":"æ´›è°· P3386 ã€æ¨¡æ¿ã€‘äºŒåˆ†å›¾åŒ¹é…åŒˆç‰™åˆ©ç®—æ³•$O(nm)$-äºŒåˆ†å›¾æ¦‚å¿µä¸å®šä¹‰ äºŒåˆ†å›¾æ˜¯å›¾è®ºä¸­çš„ä¸€ç§ç‰¹æ®Šæ¨¡å‹ã€‚è®¾G=(V,E)æ˜¯ä¸€ä¸ªæ— å‘å›¾ï¼Œå¦‚æœé¡¶ç‚¹é›†Vå¯åˆ†å‰²ä¸ºä¸¤ä¸ªäº’ä¸ç›¸äº¤çš„å­é›†(A,B)ï¼Œå¹¶ä¸”å›¾ä¸­çš„æ¯æ¡è¾¹ï¼ˆiï¼Œjï¼‰æ‰€å…³è”çš„ä¸¤ä¸ªé¡¶ç‚¹iå’Œjåˆ†åˆ«å±äºè¿™ä¸¤ä¸ªä¸åŒçš„é¡¶ç‚¹é›†(i in A,j in B)ï¼Œåˆ™ç§°å›¾Gä¸ºä¸€ä¸ªäºŒåˆ†å›¾æ— å‘å›¾Gä¸ºäºŒåˆ†å›¾çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ï¼ŒGè‡³å°‘æœ‰ä¸¤ä¸ªé¡¶ç‚¹ï¼Œä¸”å…¶æ‰€æœ‰å›è·¯çš„é•¿åº¦å‡ä¸ºå¶æ•°ã€‚ äºŒåˆ†å›¾åŒ¹é…ï¼šç»™å®šä¸€ä¸ªäºŒåˆ†å›¾Gï¼Œåœ¨Gçš„ä¸€ä¸ªå­å›¾Mä¸­ï¼ŒMçš„è¾¹é›†{E}ä¸­çš„ä»»æ„ä¸¤æ¡è¾¹éƒ½ä¸ä¾é™„äºåŒä¸€ä¸ªé¡¶ç‚¹ï¼Œåˆ™ç§°Mæ˜¯ä¸€ä¸ªåŒ¹é…ã€‚å¦‚ä¸‹å›¾çš„æ¯ä¸€ä¸ªçº¢çº¿éƒ½æ˜¯äºŒåˆ†å›¾çš„ä¸€ä¸ªåŒ¹é…ï¼š (ä»¥ä¸Šå†…å®¹å‡æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ï¼ˆç•¥ç•¥ç•¥ç•¥ç•¥ç•¥ï¼‰) -ç®—æ³•æ€æƒ³ ç”±å¢å¹¿è·¯çš„æ€§è´¨ï¼Œå¢å¹¿è·¯ä¸­çš„åŒ¹é…è¾¹æ€»æ˜¯æ¯”æœªåŒ¹é…è¾¹å¤šä¸€æ¡ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æ”¾å¼ƒä¸€æ¡å¢å¹¿è·¯ä¸­çš„åŒ¹é…è¾¹ï¼Œé€‰å–æœªåŒ¹é…è¾¹ä½œä¸ºåŒ¹é…è¾¹ï¼Œåˆ™åŒ¹é…çš„æ•°é‡å°±ä¼šå¢åŠ ã€‚åŒˆç‰™åˆ©ç®—æ³•å°±æ˜¯åœ¨ä¸æ–­å¯»æ‰¾å¢å¹¿è·¯ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¢å¹¿è·¯ï¼Œå°±è¯´æ˜è¾¾åˆ°äº†æœ€å¤§åŒ¹é…ã€‚ç‰¢è®°ï¼š match[i]æ•°ç»„è®°å½•çš„æ˜¯å³å­é›†ä¸­ç‚¹içš„åœ¨å·¦å­é›†ä¸­çš„åŒ¹é…ç‚¹ã€‚ -ä»£ç 1234567891011121314151617181920212223242526272829#include&lt;cstdio&gt;#include&lt;cstring&gt;using namespace std;int n,m,e,to[1100000],nxt[1100000],head[1100],cnt=0,match[1100],vis[1100];inline void add(int u,int v)&#123;to[++cnt]=v,nxt[cnt]=head[u],head[u]=cnt;&#125;inline int augmentable(int u)&#123; //å¢å¹¿ for(int i=head[u];i;i=nxt[i])&#123; //æšä¸¾å³å­é›†çš„æ¯ä¸ªä¸æ”¹ç‚¹æœ‰è¾¹çš„ç‚¹ if(vis[to[i]]) continue; //è‹¥è¯¥ç‚¹å·²ç»è¢«å¢å¹¿è¿‡ï¼Œåˆ™è·³è¿‡ vis[to[i]]=1; if(!match[to[i]]||augmentable(match[to[i]])) return match[to[i]]=u; //è‹¥è¯¥å³å­é›†ç‚¹æœªè¢«åŒ¹é…æˆ–è€…è¯¥ç‚¹åŒ¹é…çš„å·¦å­é›†ç‚¹æœ‰å…¶ä»–çš„ç‚¹å¯ä»¥åŒ¹é…ï¼Œåˆ™å°†è¯¥å³å­é›†ç‚¹ä¸ç‚¹uåŒ¹é… &#125; return 0;&#125;int main()&#123; scanf(\"%d%d%d\",&amp;n,&amp;m,&amp;e); for(int i=1,x,y;i&lt;=e;i++)&#123; scanf(\"%d%d\",&amp;x,&amp;y); if(y&lt;=m) add(x,y); &#125; int ans=0; for(int i=1;i&lt;=n;i++)&#123; å¯¹å·¦å­é›†çš„æ¯ä¸ªç‚¹æšä¸¾å…¶æ˜¯å¦å¯ä»¥è¿›è¡Œå¢å¹¿ memset(vis,0,sizeof vis); if(augmentable(i)) ans++; &#125; printf(\"%d\",ans); return 0;&#125;","tags":[{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"http://blog.southe3n.cf/tags/å›¾è®º/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘ä¹˜æ³•é€†å…ƒ","date":"2018-05-01T10:20:27.000Z","path":"2018/05/01/xuexibijichengfaniyuan/","text":"æ´›è°· P3811 ã€æ¨¡æ¿ã€‘ä¹˜æ³•é€†å…ƒ-æ¦‚å¿µåŠå®šä¹‰ è‹¥ $ aâˆ—xâ‰¡1 \\pmod b $ ï¼Œä¸” a ä¸ b äº’è´¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å®šä¹‰: x ä¸º a çš„é€†å…ƒï¼Œè®°ä¸º $ a^{-1} $,æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ç§° x ä¸º a çš„å€’æ•°ï¼Œ $ \\frac{a}{b} \\bmod p = a \\times b^{-1} \\bmod p $ å¸¸ç”¨çš„æ±‚è§£æ–¹æ³•æœ‰ä¸¤ç§ã€‚ â‘ åº”ç”¨è´¹é©¬(Fermat)å°å®šç† â‘¡æ‰©å±•æ¬§å‡ é‡Œå¾—(Î•Ï…ÎºÎ»ÎµÎ¹Î´Î·Ï‚) -è´¹é©¬å°å®šç† ç”±è´¹é©¬å°å®šç†çŸ¥ï¼Œè‹¥pä¸ºç´ æ•°ä¸”a,päº’è´¨ï¼Œ$ a^{p-1}â‰¡1 \\pmod p $ åˆ™: $ a \\times xâ‰¡1 \\pmod p $ $ a \\times xâ‰¡a^{p-1} \\pmod p $ $ xâ‰¡a^{p-2} \\pmod p $ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨å¿«é€Ÿå¹‚æ¥ç®—å‡º $ a^{p-2} \\pmod p $ çš„å€¼ï¼Œè¿™ä¸ªæ•°å°±æ˜¯å®ƒçš„é€†å…ƒäº† ä»£ç $ O(\\log p) $12345678910ll fastpow(ll a,ll power,ll mod)&#123; a%=mod; ll ans=1,now=a; while(power)&#123; if(power&amp;1) ans=ans*now%mod; now=now*now%mod; power&gt;&gt;=1; &#125; return ans;&#125; -æ‹“å±•æ¬§å‡ é‡Œå¾—å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ•ˆç‡æ¯”å¿«é€Ÿå¹‚é«˜(å°¤å…¶å¯¹äº p æ¯”è¾ƒå¤§çš„æ—¶å€™)ã€‚è¿™ä¸ªå°±æ˜¯åˆ©ç”¨æ‹“æ¬§æ±‚è§£ çº¿æ€§åŒä½™æ–¹ç¨‹ $ a \\times xâ‰¡1 \\pmod p $æˆ‘ä»¬å°±å¯ä»¥è½¬åŒ–ä¸º $ a \\times x + b \\times y = 1 $æ±‚è§£è¿™ä¸ªæ–¹ç¨‹çš„è§£ã€‚ ä»£ç $ O(\\log N) $12345678910111213141516ll exgcd(ll a,ll b,ll &amp;x,ll &amp;y)&#123; if(!b)&#123; x=1,y=0; return a; &#125; ll gcd=exgcd(b,a%b,x,y); ll tmp=x; x=y; y=tmp-a/b*y; return gcd;&#125;ll inv(ll a,ll mod)&#123; //æ‰©æ¬§æ±‚æ³• ll x,y,d=exgcd(a,mod,x,y); if(d==1) return (x%mod+mod)%mod; //è‹¥aå’Œmodäº’è´¨ï¼Œå°†xè°ƒæ•´ä¸º1~mod-1ä¹‹é—´å³æ˜¯é€†å…ƒ return -1; //è‹¥ä¸äº’è´¨ï¼Œåˆ™ä¸å­˜åœ¨é€†å…ƒ &#125; -çº¿æ€§æ±‚æ³•æ±‚1~nå¯¹äºmod pçš„é€†å…ƒ $ i^{-1} $å³ä¸ºiçš„é€†å…ƒä»£ç $ O(N) $1234inv[1]=1;for(int i=2;i&lt;=n;i++) inv[i] = - (p / i) * inv[p % i], inv[i] = (inv[i] % p + p) % p; //å°†invå€¼è°ƒæ•´ä¸º0~p-1","tags":[{"name":"æ•°è®º","slug":"æ•°è®º","permalink":"http://blog.southe3n.cf/tags/æ•°è®º/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘æœ€è¿‘å…¬å…±ç¥–å…ˆ(LCA)","date":"2018-05-01T07:30:06.000Z","path":"2018/05/01/xuexibijizuijingonggongzuxianlca/","text":"æ´›è°· P3379 ã€æ¨¡æ¿ã€‘æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCAï¼‰-æ¦‚å¿µåŠå®šä¹‰ æœ€è¿‘å…¬å…±ç¥–å…ˆç®€ç§°LCAï¼ˆLowest Common Ancestorï¼‰ï¼Œæ‰€è°“LCAï¼Œæ˜¯å½“ç»™å®šä¸€ä¸ªæœ‰æ ¹æ ‘Tæ—¶ï¼Œå¯¹äºä»»æ„ä¸¤ä¸ªç»“ç‚¹uã€vï¼Œæ‰¾åˆ°ä¸€ä¸ªç¦»æ ¹æœ€è¿œçš„ç»“ç‚¹xï¼Œä½¿å¾—xåŒæ—¶æ˜¯uå’Œvçš„ç¥–å…ˆï¼Œx ä¾¿æ˜¯uã€vçš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚ -ç¦»çº¿ç®—æ³•Tarjanåˆ©ç”¨å¹¶æŸ¥é›†ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°LCAé—®é¢˜çš„O(n+q)ç®—æ³•(q:è¯¢é—®æ¬¡æ•°)ã€‚Tarjanç®—æ³•åŸºäºDFSï¼Œå¯¹äºç¬¬ä¸€æ¬¡æœç´¢åˆ°çš„ç»“ç‚¹ï¼Œå…ˆåˆ›å»ºç”±è¿™ä¸ªç»“ç‚¹æ„æˆçš„é›†åˆï¼Œå†å¯¹è¯¥ç»“ç‚¹çš„æ¯ä¸€ä¸ªå­æ ‘è¿›è¡Œæœç´¢ï¼Œå¯¹äºæœç´¢å®Œçš„å­æ ‘ï¼Œä¿è¯å­æ ‘å†…çš„LCAè¯¢é—®éƒ½å·²è§£å†³ã€‚å…¶ä»–çš„LCAè¯¢é—®çš„ç»“æœå¿…ç„¶åœ¨è¿™ä¸ªå­æ ‘ä¹‹å¤–ï¼Œè¿™æ—¶æŠŠå­æ ‘æ‰€å½¢æˆçš„é›†åˆä¸è¯¥ç»“ç‚¹çš„é›†åˆåˆå¹¶ï¼Œå¹¶å°†å½“å‰ç»“ç‚¹è®¾ä¸ºè¿™ä¸ªé›†åˆçš„ç¥–å…ˆã€‚é‡å¤æœç´¢å­æ ‘çš„è¿‡ç¨‹ï¼Œç›´åˆ°å½“å‰ç»“ç‚¹çš„æ‰€æœ‰å­æ ‘æœç´¢å®Œ,å°†å½“å‰ç»“ç‚¹ä¹Ÿè®¾ä¸ºå·²è¢«æœç´¢è¿‡çš„ï¼ŒæŸ¥è¯¢æ‰€æœ‰å’Œè¯¥ç»“ç‚¹æœ‰è¯¢é—®å…³ç³»çš„ç»“ç‚¹ vï¼Œè‹¥ v å·²è¢«æœç´¢è¿‡ï¼Œç”±äºè¿›è¡Œçš„æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œæ‰€ä»¥è¿™ä¸ªæœ€è¿‘å…¬å…±ç¥–å…ˆçš„åŒ…å« v çš„å­æ ‘ä¸€å®šå·²ç»æœç´¢è¿‡äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæœ€è¿‘å…¬å…±ç¥–å…ˆä¸€å®šæ˜¯ v æ‰€åœ¨é›†åˆçš„ç¥–å…ˆã€‚ tarjanéƒ¨åˆ†ä¼ªä»£ç 123456789101112Tarjan(u)//margeå’Œfindä¸ºå¹¶æŸ¥é›†åˆå¹¶å’ŒæŸ¥æ‰¾æ“ä½œ&#123; for each(u,v)&#123; //è®¿é—®æ‰€æœ‰uå­èŠ‚ç‚¹v Tarjan(v); //ç»§ç»­å¾€ä¸‹éå† marge(u,v); //åˆå¹¶våˆ°uä¸Š æ ‡è®°vè¢«è®¿é—®è¿‡; &#125; for each(u,e)&#123; //è®¿é—®æ‰€æœ‰å’Œuæœ‰è¯¢é—®å…³ç³»çš„e å¦‚æœeè¢«è®¿é—®è¿‡ï¼š u,eçš„æœ€è¿‘å…¬å…±ç¥–å…ˆä¸ºfind(e); &#125;&#125; ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include&lt;cstdio&gt;using namespace std;int n,m,s,fa[510000];struct node &#123; int to,next,no;&#125; e[1110000],q[1100000];int cnt=0,cntq=0,head[510000],headq[510000],ans[510000];bool vis[510000]=&#123;0&#125;;int getf(int x) &#123; return fa[x] == x ? x : fa[x] = getf(fa[x]);&#125;inline void add(int u,int v) &#123; e[++cnt].to=v; e[cnt].next=head[u]; head[u]=cnt;&#125;inline void add_q(int u,int v,int i) &#123; q[++cntq].to=v; q[cntq].next=headq[u]; q[cntq].no=i; headq[u]=cntq;&#125;void tarjan(int u,int f)&#123; vis[u]=1; for(int i=headq[u];i;i=q[i].next) if(vis[q[i].to]) ans[q[i].no]=getf(q[i].to); for(int i=head[u];i;i=e[i].next) if(!vis[e[i].to]) tarjan(e[i].to,u); fa[u]=f;&#125;int main() &#123; scanf(\"%d%d%d\",&amp;n,&amp;m,&amp;s); for(int i=1,x,y; i&lt;n; i++) &#123; scanf(\"%d%d\",&amp;x,&amp;y); add(x,y),add(y,x); &#125; for(int i=1,x,y; i&lt;=m; i++) &#123;//è¯»å…¥æŸ¥è¯¢å…³ç³»å¹¶æ·»åŠ è‡³é‚»æ¥è¡¨ä¸­ scanf(\"%d%d\",&amp;x,&amp;y); add_q(x,y,i),add_q(y,x,i); &#125; for(int i=1;i&lt;=n;i++) fa[i]=i; tarjan(s,s); for(int i=1; i&lt;=m; i++) printf(\"%d\\n\",ans[i]); return 0;&#125; -åœ¨çº¿ç®—æ³• å€å¢æ—¶é—´å¤æ‚åº¦O(nlogn)ä¸»è¦æ€æƒ³ï¼šæ¯æ¬¡å°†å‘ä¸Šè·³è·ƒçš„å±‚æ•°æŠ˜åŠï¼Œä»¥è¾¾åˆ°æ±‚ç¦»æ ¹æœ€è¿œçš„å…¬å…±ç¥–å…ˆçš„ç›®çš„ï¼ŒæŸ¥æ‰¾æœ€è¿‘å…¬å…±ç¥–å…ˆæ—¶ï¼Œå…ˆä½¿ä¸¤ç»“ç‚¹æ·±åº¦ç›¸åŒï¼Œå†æšä¸¾è·³è·ƒå±‚æ•°ï¼Œåˆ¤æ–­è·³è·ƒåæ˜¯å¦å¤„äºåŒä¸€ç»“ç‚¹ï¼Œè‹¥æ˜¯ï¼Œåˆ™è¯´æ˜è‹¥è·³è¯¥å±‚æ•°å°±ä¼šè·³è¿‡æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œå°†è·³è·ƒå±‚æ•°æŠ˜åŠåç»§ç»­å°è¯•ï¼Œç›´åˆ°ä¸¤ç»“ç‚¹åˆ†å¤„äºåŒä¸€ç»“ç‚¹çš„å·¦å³å„¿å­ï¼Œåˆ™è¯¥ç»“ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ é¢„å¤„ç†ï¼šé€šè¿‡dfséå†ï¼Œæ ‡è®°æ¯ä¸ªèŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„æ·±åº¦deep[u]ï¼ŒDPæ±‚å‡ºæ ‘ä¸Šæ¯ä¸ªèŠ‚ç‚¹uçš„ç¬¬1&lt;&lt;å±‚ç¥–å…ˆf[u][i] 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#include&lt;cstdio&gt;#include&lt;memory&gt;using namespace std;int n,m,s;int cnt=0,head[510000],deep[510000],f[510000][20],to[1100000],nxt[1100000];inline void add(int u,int v) &#123; to[++cnt]=v; nxt[cnt]=head[u]; head[u]=cnt;&#125;void lca_pre()&#123; //é¢„å¤„ç†å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å‘ä¸Šç¬¬1&lt;&lt;iå±‚çš„ç¥–å…ˆ for(int i=1;i&lt;=18;i++) for(int j=1;j&lt;=n;j++) f[j][i]=f[f[j][i-1]][i-1]; //å…ˆå‘ä¸Šè·³1&lt;&lt;(i-1)å±‚ï¼Œå†å‘ä¸Šè·³åˆ°1&lt;&lt;iå±‚ &#125;void dfs(int u)&#123; //æ ‡è®°æ·±åº¦ï¼Œå¹¶å°†å‘ä¸Šè·³ä¸€å±‚è®¾ä¸ºå…¶çˆ¶èŠ‚ç‚¹ for(int i=head[u];i;i=nxt[i]) if(!deep[to[i]])&#123; deep[to[i]]=deep[u]+1; f[to[i]][0]=u; dfs(to[i]); &#125;&#125;int lca(int u,int v)&#123; if(deep[u]&lt;deep[v]) swap(u,v);//ä¿è¯uæ¯”væ·±åº¦å¤§ for(int i=17;i&gt;=0;i--) if(deep[f[u][i]]&gt;=deep[v]) u=f[u][i]; //å°†ä¸¤ç‚¹è·³è‡³åŒä¸€æ·±åº¦ if(u==v) return v; //è‹¥æ­¤æ—¶ä¸¤ç‚¹å·²ç›¸åŒï¼Œè¯´æ˜væ˜¯uçš„ç¥–å…ˆ for(int i=17;i&gt;=0;i--) if(f[u][i]!=f[v][i]) u=f[u][i],v=f[v][i]; //ä¸¤èŠ‚ç‚¹ä¸€èµ·å‘ä¸Šè·³ï¼Œç›´åˆ°å¤„äºä»–ä»¬å…¬å…±ç¥–å…ˆçš„å·¦å³å„¿å­ä¸Š return f[u][0]; //è¿”å›ä¸¤èŠ‚ç‚¹çš„ä¸Šä¸€å±‚ &#125;int main() &#123; scanf(\"%d%d%d\",&amp;n,&amp;m,&amp;s); for(int i=1,x,y; i&lt;n; i++) &#123; scanf(\"%d%d\",&amp;x,&amp;y); add(x,y),add(y,x); &#125; deep[s]=1; dfs(s); lca_pre(); for(int i=1,x,y; i&lt;=m; i++) &#123; scanf(\"%d%d\",&amp;x,&amp;y); printf(\"%d\\n\",lca(x,y)); &#125; return 0;&#125; -åœ¨çº¿ç®—æ³• æ ‘å‰–æ—¶é—´å¤æ‚åº¦O(2n+mlogn)ï¼Œä¸”å¸¸æ•°è¾ƒå°ï¼Œä¼¼ä¹æ¯”å€å¢å¿«å¥½å¤š ä¸»è¦æ€æƒ³ï¼šä¸¤æ¬¡dfsè¿›è¡Œé¢„å¤„ç†ï¼Œå°†æ ‘åˆ†ä¸ºè‹¥å¹²æ¡ä¸ç›¸äº¤çš„è½»é‡é“¾ï¼Œæ¯æ¬¡æ±‚LCAï¼ˆx,yï¼‰æ—¶åˆ¤æ–­ä¸¤ç‚¹æ˜¯å¦åœ¨åŒä¸€é“¾ä¸Šè‹¥æ˜¯åˆ™æˆ‘ä»¬åªè¦æ‰¾åˆ°è¿™ä¸¤ç‚¹ä¸­æ·±åº¦è¾ƒå°çš„ç‚¹è¾“å‡ºå¦‚æœä¸¤ç‚¹ä¸åœ¨åŒä¸€æ¡é“¾ä¸Šé‚£å°±æ‰¾åˆ°æ·±åº¦è¾ƒå¤§çš„ç‚¹ä»¤å®ƒç­‰äºå®ƒæ‰€åœ¨çš„é‡é“¾é“¾ç«¯çš„çˆ¶èŠ‚ç‚¹å³ä¸ºx=f[top[x]]ç›´åˆ°ä¸¤ç‚¹åˆ°è¾¾åŒä¸€æ¡é“¾ä¸Šï¼Œè¾“å‡ºä¸¤ç‚¹ä¸­æ·±åº¦è¾ƒå°çš„ç‚¹ å„æ•°ç»„æ„ä¹‰ï¼š size[u] ä¿å­˜ä»¥uä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹ä¸ªæ•° top[u] ä¿å­˜å½“å‰èŠ‚ç‚¹æ‰€åœ¨é“¾çš„é¡¶ç«¯èŠ‚ç‚¹ï¼ˆè½»å„¿å­çš„ top ä¸ºä»–è‡ªå·±ï¼‰ son[u] ä¿å­˜é‡å„¿å­ï¼ˆé‡å„¿å­ï¼šå¯¹äºæ¯ä¸ªç»“ç‚¹ uï¼Œå…¶é‡å„¿å­ä¸ºå…¶å­ç»“ç‚¹ä¸­ size å€¼æœ€å¤§çš„ç»“ç‚¹ï¼Œå…¶ä½™å­ç»“ç‚¹ä¸ºè½»å„¿å­ï¼‰ dep[u] ä¿å­˜ç»“ç‚¹uçš„æ·±åº¦å€¼ fa[u] ä¿å­˜ç»“ç‚¹uçš„çˆ¶äº²èŠ‚ç‚¹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354#include&lt;ctype.h&gt;#include&lt;cstdio&gt;using namespace std;inline int read()&#123; int x=0,f=1; char ch; ch=getchar(); while(!isdigit(ch)) &#123;if(ch=='-') f=-1; ch=getchar();&#125; while(isdigit(ch))&#123;x=(x&lt;&lt;3)+(x&lt;&lt;1)+ch-48;ch=getchar();&#125; return x*f;&#125;int to[1100000],nxt[1100000],head[510000],cnt;int n,m,s,dep[500005],size[500005],son[500005],top[500005],fa[500005];inline void add(int u,int v)&#123; to[++cnt]=v,nxt[cnt]=head[u],head[u]=cnt;&#125;void dfs1(int u,int ff)&#123; //ç¬¬ä¸€æ¬¡dfsæ±‚å‡ºå„ç‚¹dep,fa,size,son dep[u]=dep[ff]+1; fa[u]=ff; size[u]=1; for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(v==ff) continue; dfs1(v,u); size[u]+=size[v]; if(!son[u]||size[v]&gt;size[son[u]]) son[u]=v; &#125;&#125;void dfs2(int u,int topp)&#123; //ç¬¬äºŒæ¬¡dfsæ±‚å‡ºå„ç‚¹top top[u]=topp; if(son[u]) dfs2(son[u],topp); for(int i=head[u];i;i=nxt[i])&#123; int v=to[i]; if(v!=son[u]&amp;&amp;v!=fa[u]) dfs2(v,v); &#125;&#125;inline int lca(int x,int y)&#123; //æ±‚LCAæ—¶ï¼Œä¸æ–­å°†topè¾ƒæ·±çš„ç‚¹è·³è‡³å…¶ top çš„çˆ¶èŠ‚ç‚¹ï¼Œç›´åˆ°ä¸¤ä¸ªç»“ç‚¹åœ¨åŒä¸€æ¡é‡é“¾ä¸Š while(top[x]!=top[y]) if(dep[top[x]]&gt;=dep[top[y]]) x=fa[top[x]]; else y=fa[top[y]]; return dep[x]&lt;dep[y]?x:y;&#125;int main()&#123; scanf(\"%d%d%d\",&amp;n,&amp;m,&amp;s); for(int i=1,x,y;i&lt;n;i++) x=read(),y=read(),add(x,y),add(y,x); dfs1(s,s); dfs2(s,s); int a,b; while(m--)&#123; a=read(),b=read(); printf(\"%d\\n\",lca(a,b)); &#125; return 0;&#125;","tags":[{"name":"LCAï¼Œæ ‘å‰–","slug":"LCAï¼Œæ ‘å‰–","permalink":"http://blog.southe3n.cf/tags/LCAï¼Œæ ‘å‰–/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘éæ—‹Treap","date":"2018-05-01T05:53:05.000Z","path":"2018/05/01/xuexibijifeixuantreap/","text":"æ´›è°· P3369 ã€æ¨¡æ¿ã€‘æ™®é€šå¹³è¡¡æ ‘ï¼ˆTreap/SBTï¼‰-æ¦‚å¿µä¸å®šä¹‰ Treap=Tree+Heap Treapæ˜¯ä¸€é¢—åŒæ—¶æ‹¥æœ‰äºŒå‰æœç´¢æ ‘å’Œå †æ€§è´¨çš„ä¸€é¢—äºŒå‰æ ‘ Treapæœ‰ä¸¤ä¸ªå…³é”®å­—ï¼Œåœ¨è¿™é‡Œå®šä¹‰ä¸ºï¼š 1.keyï¼Œæ»¡è¶³äºŒå‰æœç´¢æ ‘æ€§è´¨ï¼Œå³ä¸­åºéå†æŒ‰ç…§keyå€¼æœ‰åº 2.heapï¼Œæ»¡è¶³å°æ ¹å †æ€§è´¨ ä¸ºäº†æ»¡è¶³æœŸæœ›ï¼Œheapå€¼æ˜¯ä¸€ä¸ªéšæœºçš„æƒå€¼ï¼Œç”¨æ¥ä¿è¯æ ‘é«˜æœŸæœ›ä¸ºlogn å‰©ä¸‹çš„keyå€¼åˆ™æ˜¯ç”¨æ¥ç»´æŠ¤æˆ‘ä»¬æƒ³è¦ç»´æŠ¤çš„ä¸€ä¸ªæƒå€¼ï¼Œæ­¤ä¸ºä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„åŸºæœ¬è¦ç´  ç®€å•æ¥è¯´ï¼Œé€šè¿‡åŠ å…¥ä¸€ä¸ªéšæœºç”Ÿæˆçš„å€¼ï¼Œå¹¶åœ¨å»ºæ ‘è¿‡ç¨‹ä¸­ä¿è¯è¯¥å€¼æ»¡è¶³å †ï¼ˆå°æ ¹å †ï¼‰çš„å½¢å¼ï¼Œä½¿å¾—äºŒå‰æœç´¢æ ‘çš„æ·±åº¦è¿‘ä¼¼äºlogNæ¥åŠ å¿«å„ç§æ“ä½œçš„é€Ÿåº¦èµ„ç“·çš„æ“ä½œï¼š æ’å…¥xxæ•° åˆ é™¤xxæ•°(è‹¥æœ‰å¤šä¸ªç›¸åŒçš„æ•°ï¼Œåªåˆ é™¤ä¸€ä¸ª) æŸ¥è¯¢xxæ•°çš„æ’å(æ’åå®šä¹‰ä¸ºæ¯”å½“å‰æ•°å°çš„æ•°çš„ä¸ªæ•°+1ã€‚è‹¥æœ‰å¤šä¸ªç›¸åŒçš„æ•°ï¼Œè¾“å‡ºæœ€å°çš„æ’å) æŸ¥è¯¢æ’åä¸ºxxçš„æ•° æ±‚xxçš„å‰é©±(å‰é©±å®šä¹‰ä¸ºå°äºxxï¼Œä¸”æœ€å¤§çš„æ•°) æ±‚xxçš„åç»§(åç»§å®šä¹‰ä¸ºå¤§äºxxï¼Œä¸”æœ€å°çš„æ•°) -å®ç°æ–¹æ³•ä¸ºä¿è¯å †çš„æ€§è´¨ï¼Œéœ€è¦åœ¨å»ºæ ‘æ—¶å¯¹æ ‘è¿›è¡Œæ—‹è½¬æˆ–åˆ‡å‰²ä¸ºä»£æ›¿åŸæ¥çš„æ—‹è½¬æ“ä½œï¼Œæˆ‘ä»¬å¼•å…¥ä¸¤ä¸ªç¥å¥‡çš„å‡½æ•°æ¥ä¿æŒæ ‘çš„å¹³è¡¡ï¼š split(u, k)ï¼Œå°†ä»¥ u ä¸ºæ ¹èŠ‚ç‚¹çš„ Treap åœ¨ç¬¬ k ä¸ªå…ƒç´ ååˆ†è£‚ï¼Œå¹¶è¿”å›åˆ†è£‚å‡ºæ¥çš„ä¸¤ä¸ªæ ¹ã€‚ merge(u, v)ï¼Œå°†å…ƒç´ ç›¸å¯¹æœ‰åºçš„ä¸¤æ£µ Treap åˆå¹¶ä¸ºä¸€æ£µï¼Œç»´æŠ¤å †æ€§è´¨ï¼Œå¹¶è¿”å›åˆå¹¶åçš„æ ¹ã€‚ æ¯ä¸€ä¸ªsplitå’Œmergeéƒ½æ˜¯O(logn)å¤æ‚åº¦ å¯¹äºå„æ“ä½œï¼š æ’å…¥ï¼šinsert = split + merge + merge â‡’ O(logn) åˆ é™¤ï¼šerase = split + split + merge â‡’ O(logn) æ•°-&gt;æ’å/æ’å-&gt;æ•°ï¼šé€šè¿‡äºŒå‰æ’åºæ ‘çš„æ€§è´¨è¿›è¡ŒæŸ¥æ‰¾ å‰é©±ï¼šå°†æ‰€æœ‰æ¯”xå°çš„æ•°åˆ‡ä¸‹ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€å¤§çš„æ•°åï¼Œå†åˆå¹¶ åç»§ï¼šå°†æ‰€æœ‰æ¯”xå°çš„æ•°ä»¥åŠxåˆ‡ä¸‹ï¼Œåœ¨å‰©ä¸‹çš„æ ‘ä¸­æ‰¾å‡ºæœ€å°çš„æ•°åï¼Œå†åˆå¹¶ è¿™æ ·å°±èƒ½å¤Ÿå®Œç¾åœ°å¤„ç†åæ¬¡é—®é¢˜äº†ï¼Œè™½ç„¶å¸¸æ•°è¾ƒä¼ ç»Ÿ Treap ç•¥å¤§ã€‚è€Œåˆ©ç”¨ split å’Œ merge æ“ä½œï¼Œå¯ä»¥ O(logn) å°†åŒºé—´åˆ†ç¦»å‡ºæ¥ï¼Œè¿›è¡ŒåŒºé—´å¤„ç†ã€‚ Any interval = split + split + merge + merge â‡’ O(logn) éæ—‹ Treap è¿˜å¯ä»¥è¿›è¡Œå¯æŒä¹…åŒ–æ“ä½œï¼ˆEmmmmâ€¦.ä¸ä¼šï¼ˆé€ƒé€ƒé€ƒï¼‰ï¼‰ã€‚ -ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104#include&lt;cstdio&gt;#include&lt;cstdlib&gt;using namespace std;struct Tnode &#123; int l,r,num,size,heap;&#125; t[100100];struct xx &#123; int l,r;&#125;;int n,type,x,cnt=0,Root;void update(int u) &#123; //æ›´æ–°ä»¥uä¸ºæ ¹çš„å­æ ‘çš„size t[u].size=t[t[u].l].size+t[t[u].r].size+1;&#125;xx split(int u,int k) &#123; //ä»ä»¥uä¸ºæ ¹çš„å­æ ‘ä¸Šå‰²ä¸‹kä¸ªç‚¹ xx result= &#123;0,0&#125;; //è®°å½•åˆ‡å‰²åå·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹å’Œå³å­æ ‘çš„æ ¹èŠ‚ç‚¹ if(!u) return result; int lsize=t[t[u].l].size+1; if(k&gt;=lsize) &#123; //è‹¥éœ€è¦åˆ‡ä¸‹çš„ç‚¹æ¯”æ•´ä¸ªå·¦å­æ ‘å¤šï¼Œä»å³å­æ ‘ç»§ç»­å‰² result=split(t[u].r,k-lsize); t[u].r=result.l; result.l=u; &#125; else &#123; result=split(t[u].l,k); t[u].l=result.r; result.r=u; &#125; update(u); //æ›´æ–°ä»¥uä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘çš„size return result; //è¿”å›å·¦å³å­æ ‘æ ¹èŠ‚ç‚¹&#125;int merge(int l,int r) &#123; //å°†ä¸¤æ£µTREAPåˆå¹¶ï¼ˆä¸¥æ ¼æŒ‰ç…§heapå€¼å¤§å°åˆå¹¶ï¼ˆå°æ ¹å †ï¼‰ï¼‰è¿”å›æ ¹èŠ‚ç‚¹ if(!l) return r; //è‹¥å·¦å­æ ‘ä¸ºç©ºï¼Œè¿”å›å³å­æ ‘ if(!r) return l; if(t[l].heap&lt;t[r].heap) &#123; //è‹¥å·¦å­æ ‘heapæ¯”å³å­æ ‘å°ï¼Œå°†å³å­æ ‘æ¥åœ¨å·¦å­æ ‘çš„å³å„¿å­ä¸­ t[l].r=merge(t[l].r,r); update(l); return l; &#125; else &#123; //å¦åˆ™å°†å·¦å­æ ‘æ¥åœ¨å³å­æ ‘å·¦å„¿å­ä¸­ t[r].l=merge(l,t[r].l); update(r); return r; &#125;&#125;int rank(int x) &#123; //æ ¹æ®æ•°å€¼æŸ¥æœ‰å¤šå°‘ä¸ªæ•°ä¸¥æ ¼æ¯”xå° int now=Root,result=0; while(now) &#123; if(x&gt;t[now].num) &#123; result+=t[t[now].l].size+1; now=t[now].r; &#125; else now=t[now].l; &#125; return result;&#125; int No_k(int u,int x)&#123; //åœ¨ä»¥uä¸ºæ ¹èŠ‚ç‚¹çš„æ ‘ä¸­ï¼Œæ‰¾ç¬¬xå°çš„æ•° int now=u; while(1)&#123; int num=t[t[now].l].size+1; if(x==num) return t[now].num; if(x&lt;num) now=t[now].l; else x-=num,now=t[now].r; &#125; &#125;void insert(int x) &#123; //æ’å…¥ä¸€ä¸ªæ•°å€¼ä¸ºxçš„æ•° t[++cnt].num=x; t[cnt].heap=rand(); //éšæœºç”Ÿæˆheapå€¼ï¼Œä½¿æ ‘ä¿æŒç›¸å¯¹å¹³è¡¡ t[cnt].size=1; xx p=split(Root,rank(x)); //æŸ¥æ‰¾xåœ¨æ ‘ä¸­çš„rankï¼Œå°†æ¯”xå°çš„æ•°ä»æ ‘ä¸­åˆ‡ä¸‹ Root=merge(merge(p.l,cnt),p.r); //å…ˆå°†xä¸å·¦å­æ ‘åˆå¹¶ï¼Œå†å°†å·¦å­æ ‘å’Œå³å­æ ‘åˆå¹¶ï¼Œå¹¶æ›´æ–°æ ¹èŠ‚ç‚¹Root &#125;void del(int x)&#123; xx p1=split(Root,rank(x)); xx p2=split(p1.r,1); Root=merge(p1.l,p2.r); &#125; int pre(int x)&#123; //æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ¯”xå°çš„æ•° xx p=split(Root,rank(x)); //å°†æ‰€æœ‰æ¯”xå°çš„æ•°ï¼ˆä¸åŒ…æ‹¬xï¼‰åˆ‡ä¸‹ int result=No_k(p.l,t[p.l].size); //æ‰¾åˆ°åˆ‡ä¸‹çš„æ ‘ä¸­æœ€å¤§çš„ Root=merge(p.l,p.r); //å°†ä¸¤å­æ ‘é‡æ–°åˆå¹¶ return result; &#125;int suc(int x)&#123; //æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ¯”xå¤§çš„æ•° xx p=split(Root,rank(x+1)); //å°†æ‰€æœ‰æ¯”xå°çš„æ•°ï¼ˆåŒ…æ‹¬xï¼‰åˆ‡ä¸‹ int result=No_k(p.r,1); //æŸ¥æ‰¾å‰©ä¸‹çš„æ•°ä¸­æœ€å°çš„ Root=merge(p.l,p.r); return result;&#125; int main() &#123; scanf(\"%d\",&amp;n); for(int i=1; i&lt;=n; i++) &#123; scanf(\"%d%d\",&amp;type,&amp;x); if(type==1) insert(x); if(type==2) del(x); if(type==3) printf(\"%d\\n\",rank(x)+1); //rankæ˜¯æ¯”xå°çš„æ•°çš„ä¸ªæ•°ï¼Œä¸åŒ…æ‹¬xï¼Œæ‰€ä»¥è¦+1 if(type==4) printf(\"%d\\n\",No_k(Root,x)); if(type==5) printf(\"%d\\n\",pre(x)); if(type==6) printf(\"%d\\n\",suc(x)); &#125; return 0;&#125;","tags":[{"name":"å¹³è¡¡æ ‘","slug":"å¹³è¡¡æ ‘","permalink":"http://blog.southe3n.cf/tags/å¹³è¡¡æ ‘/"},{"name":"é«˜çº§æ•°æ®ç»“æ„","slug":"é«˜çº§æ•°æ®ç»“æ„","permalink":"http://blog.southe3n.cf/tags/é«˜çº§æ•°æ®ç»“æ„/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘çº¿æ®µæ ‘","date":"2018-05-01T04:43:38.000Z","path":"2018/05/01/xuexibijixianduanshu/","text":"æ´›è°· P3373 ã€æ¨¡æ¿ã€‘çº¿æ®µæ ‘ 2-æ¦‚å¿µåŠå®šä¹‰çº¿æ®µæ ‘æ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ï¼Œä¸åŒºé—´æ ‘ç›¸ä¼¼ï¼Œå®ƒå°†ä¸€ä¸ªåŒºé—´åˆ’åˆ†æˆä¸€äº›å•å…ƒåŒºé—´ï¼Œæ¯ä¸ªå•å…ƒåŒºé—´å¯¹åº”çº¿æ®µæ ‘ä¸­çš„ä¸€ä¸ªå¶ç»“ç‚¹ã€‚å¯¹äºçº¿æ®µæ ‘ä¸­çš„æ¯ä¸€ä¸ªéå¶å­èŠ‚ç‚¹[a,b]ï¼Œå®ƒçš„å·¦å„¿å­è¡¨ç¤ºçš„åŒºé—´ä¸º[a,(a+b)/2]ï¼Œå³å„¿å­è¡¨ç¤ºçš„åŒºé—´ä¸º[(a+b)/2+1,b]ã€‚å› æ­¤çº¿æ®µæ ‘æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œæœ€åçš„å­èŠ‚ç‚¹æ•°ç›®ä¸ºNï¼Œå³æ•´ä¸ªçº¿æ®µåŒºé—´çš„é•¿åº¦ã€‚ æ”¯æŒçš„æ“ä½œï¼š 1.å°†æŸåŒºé—´æ¯ä¸€ä¸ªæ•°ä¹˜ä¸Šx 2.å°†æŸåŒºé—´æ¯ä¸€ä¸ªæ•°åŠ ä¸Šx 3.æ±‚å‡ºæŸåŒºé—´æ¯ä¸€ä¸ªæ•°çš„å’Œ åŒºé—´ä¿®æ”¹ï¼šä¸æ–­å‘ä¸‹å±‚å¯»æ‰¾å®Œå…¨åŒ…å«åœ¨éœ€ä¿®æ”¹åŒºé—´ä¸­çš„åŒºé—´ï¼Œå¹¶åœ¨ä¿®æ”¹åå°†å€¼å‘ä¸Šä¼ é€’åŒºé—´æŸ¥è¯¢ï¼šä¸ä¿®æ”¹åŒç†ï¼Œè‡ªé¡¶å‘ä¸‹å¯»æ‰¾ï¼Œè‡ªåº•å‘ä¸Šä¼ é€’æ•°æ®å¹¶å¤„ç†ï¼ˆæ±‚å’Œ/æ±‚GCD/æ±‚æœ€å¤§å€¼â€¦) å¯ä»¥ç”¨çº¿æ®µæ ‘è§£å†³çš„é—®é¢˜å¿…é¡»æ»¡è¶³åŒºé—´åŠ æ³•ï¼Œä¾‹å¦‚æ±‚åŒºé—´GCD=gcd(å·¦åŒºé—´GCDï¼Œå³åŒºé—´GCDï¼‰ï¼ŒåŒºé—´å’Œï¼ŒåŒºé—´æœ€å¤§å€¼â€¦ -é‡è¦ä¼˜åŒ–-lazytagæˆ‘ä»¬ä¼šå‘ç°ï¼Œå¦‚æœæ¯æ¬¡ä¿®æ”¹/æŸ¥è¯¢éƒ½ä»åº•å±‚å‘ä¸Šå±‚é€å±‚ä¿®æ”¹/æŸ¥è¯¢ï¼Œæ•ˆç‡å°†ä¼šéå¸¸ä½ä¸‹ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦å¼•å…¥ä¸€ä¸ªå«lazytagçš„éªšä¸œè¥¿ã€‚åŸç†ï¼šåªè®¡ç®—å‡ºç¡®å®éœ€è¦è®¿é—®çš„åŒºé—´çš„çœŸå®å€¼ï¼Œå…¶ä»–çš„ä¿å­˜åœ¨lazytagé‡Œé¢ï¼Œè¿™æ ·å¯ä»¥åšåˆ°è¿‘ä¼¼O(NlogN)ã€‚æ¯å½“å½“å‰åŒºé—´çš„ä¸€è‡´æ€§å°†ä¼šé­åˆ°ç ´åï¼ˆå½“å‰åŒºé—´ä¸å®Œå…¨åŒ…å«åœ¨åŒºé—´ä¿®æ”¹/æŸ¥è¯¢çš„åŒºé—´ï¼Œéœ€è¦è¿›å…¥ä¸‹ä¸€å±‚ï¼‰æ—¶ï¼Œå°†lazytagä¸‹æ”¾åˆ°ä¸‹ä¸€å±‚ï¼Œéœ€è¦åŒæ—¶ä¿®æ”¹å­åŒºé—´çš„sumå’Œlazyã€‚é¢å¯¹éœ€è¦åŒæ—¶æ”¯æŒåŒºé—´ä¹˜å’ŒåŒºé—´åŠ çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸¤ä¸ªlazytagåˆ†åˆ«è®°å½•ä¹˜æ³•å’ŒåŠ æ³•ã€‚éœ€è¦é‡‡ç”¨ä¹˜æ³•ä¼˜å…ˆçš„ç­–ç•¥ï¼Œå³è§„å®šå¥½t[root2].sum=(t[root2].sumt[root].mul_tag+t[root].add_tag(æœ¬åŒºé—´é•¿åº¦))%pï¼Œæ”¹å˜addçš„æ•°å€¼å°±åªæ”¹å˜add_tagï¼Œæ”¹å˜mulçš„æ—¶å€™æŠŠadd_tagä¹Ÿå¯¹åº”çš„ä¹˜ä¸€ä¸‹å°±å¯ä»¥äº† -ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111#include&lt;cstdio&gt;typedef long long ll;using namespace std;ll n,m,p,a[101000];struct segtree &#123; struct &#123; ll sum,lazy1,lazy2; //lazy1ä¹˜æ³•tagï¼Œlazy2åŠ æ³•tag int l,r; &#125; t[10001000]; inline void build(int k,int l,int r) &#123; //å»ºæ ‘ t[k].l=l,t[k].r=r,t[k].lazy1=1,t[k].lazy2=0; if(l==r) &#123; t[k].sum=a[l]%p; return; &#125; int mid=(l+r)&gt;&gt;1; build(k&lt;&lt;1,l,mid); build((k&lt;&lt;1)+1,mid+1,r); t[k].sum=(t[k&lt;&lt;1].sum+t[(k&lt;&lt;1)+1].sum)%p; //å°†å­æ®µå’Œä¸Šä¼  &#125; inline void pushdown(int k) &#123; //å°†lazyå€¼ä¸‹æ”¾ï¼Œå…ˆä¸‹æ”¾ä¹˜æ³•ï¼Œå†ä¸‹æ”¾åŠ æ³• int k1=k&lt;&lt;1; if(t[k].lazy1!=1) &#123; t[k1].lazy2=t[k1].lazy2*t[k].lazy1%p; t[k1+1].lazy2=t[k1+1].lazy2*t[k].lazy1%p; t[k1].lazy1=t[k1].lazy1*t[k].lazy1%p; t[k1+1].lazy1=t[k1+1].lazy1*t[k].lazy1%p; t[k1].sum=t[k1].sum*t[k].lazy1%p; t[k1+1].sum=t[k1+1].sum*t[k].lazy1%p; t[k].lazy1=1; &#125; if(t[k].lazy2) &#123; t[k1].lazy2=(t[k1].lazy2+t[k].lazy2)%p; t[k1+1].lazy2=(t[k1+1].lazy2+t[k].lazy2)%p; t[k1].sum=(t[k1].sum+t[k].lazy2*(t[k1].r-t[k1].l+1))%p; t[k1+1].sum=(t[k1+1].sum+t[k].lazy2*(t[k1+1].r-t[k1+1].l+1))%p; t[k].lazy2=0; &#125; &#125; ll query(int k,int x,int y) &#123; //xï¼Œyæ ‡è®°éœ€è¦ä¿®æ”¹çš„åŒºé—´ï¼Œkä¸ºå½“å‰åŒºé—´åºå· if(t[k].l==x&amp;&amp;t[k].r==y)//æŸ¥æ‰¾çš„åŒºé—´ä¸å½“å‰åŒºé—´å®Œå…¨é‡åˆï¼Œç›´æ¥è¿”å›å½“å‰åŒºé—´çš„å’Œ return t[k].sum; pushdown(k); //å°†lazyå€¼ä¸‹æ”¾ int mid=(t[k].l+t[k].r)&gt;&gt;1; if(x&gt;mid) return query((k&lt;&lt;1)+1,x,y);//è‹¥éœ€ä¿®æ”¹åŒºé—´å®Œå…¨åœ¨å³å­æ®µ else if(y&gt;mid) return (query(k&lt;&lt;1,x,mid)+query((k&lt;&lt;1)+1,mid+1,y))%p;//éœ€ä¿®æ”¹åŒºé—´åŒæ—¶åœ¨å·¦å³å­æ®µ else return query(k&lt;&lt;1,x,y); //éœ€ä¿®æ”¹åŒºé—´å®Œå…¨åœ¨å·¦å­æ®µ &#125; void update1(int k,int x,int y,int val) &#123; //åŒºé—´ä¹˜ if(t[k].l&gt;=x&amp;&amp;t[k].r&lt;=y) &#123;//è‹¥å½“å‰çº¿æ®µåŒ…å«åœ¨éœ€ä¿®æ”¹çº¿æ®µä¸­ï¼Œç›´æ¥ä¿®æ”¹ t[k].lazy1=t[k].lazy1*val%p; t[k].lazy2=t[k].lazy2*val%p; t[k].sum=t[k].sum*val%p; return; &#125; pushdown(k); //å°†lazyå€¼ä¸‹æ”¾ int mid=(t[k].l+t[k].r)&gt;&gt;1; if(x&gt;mid) update1((k&lt;&lt;1)+1,x,y,val); else if(y&gt;mid) &#123; update1(k&lt;&lt;1,x,mid,val); update1((k&lt;&lt;1)+1,mid+1,y,val); &#125; else update1(k&lt;&lt;1,x,y,val); t[k].sum=(t[k&lt;&lt;1].sum+t[k&lt;&lt;1|1].sum)%p;//å°†å·¦å³å­æ®µå’Œä¸Šä¼  &#125; void update2(int k,int x,int y,int val) &#123; //åŒºé—´åŠ  if(t[k].l&gt;=x&amp;&amp;t[k].r&lt;=y) &#123;//è‹¥å½“å‰çº¿æ®µåŒ…å«åœ¨éœ€ä¿®æ”¹çº¿æ®µä¸­ï¼Œç›´æ¥ä¿®æ”¹ t[k].lazy2=(t[k].lazy2+val)%p; t[k].sum=(t[k].sum+val*(t[k].r-t[k].l+1))%p; return; &#125; pushdown(k); //å°†lazyå€¼ä¸‹æ”¾ int mid=(t[k].l+t[k].r)&gt;&gt;1; if(x&gt;mid) update2((k&lt;&lt;1)+1,x,y,val); else if(y&gt;mid) &#123; update2(k&lt;&lt;1,x,mid,val); update2((k&lt;&lt;1)+1,mid+1,y,val); &#125; else update2(k&lt;&lt;1,x,y,val); t[k].sum=(t[k&lt;&lt;1].sum+t[k&lt;&lt;1|1].sum)%p;//å°†å·¦å³å­æ®µå’Œä¸Šä¼  &#125;&#125; sgt;int main() &#123; scanf(\"%lld%lld%lld\",&amp;n,&amp;m,&amp;p); for(int i=1; i&lt;=n; i++) scanf(\"%lld\",&amp;a[i]); sgt.build(1,1,n); while(m--) &#123; int type; scanf(\"%d\",&amp;type); if(type==1) &#123; ll x,y,k; scanf(\"%lld%lld%lld\",&amp;x,&amp;y,&amp;k); sgt.update1(1,x,y,k); &#125; if(type==2) &#123; ll x,y,k; scanf(\"%lld%lld%lld\",&amp;x,&amp;y,&amp;k); sgt.update2(1,x,y,k); &#125; if(type==3) &#123; ll x,y; scanf(\"%lld%lld\",&amp;x,&amp;y); printf(\"%lld\\n\",sgt.query(1,x,y)); &#125; &#125; return 0;&#125;","tags":[{"name":"çº¿æ®µæ ‘","slug":"çº¿æ®µæ ‘","permalink":"http://blog.southe3n.cf/tags/çº¿æ®µæ ‘/"},{"name":"é«˜çº§æ•°æ®ç»“æ„","slug":"é«˜çº§æ•°æ®ç»“æ„","permalink":"http://blog.southe3n.cf/tags/é«˜çº§æ•°æ®ç»“æ„/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘SPFA","date":"2018-05-01T02:08:12.000Z","path":"2018/05/01/xuexibijispfa/","text":"æ´›è°· P3371 ã€æ¨¡æ¿ã€‘å•æºæœ€çŸ­è·¯å¾„ä¸»è¦æ€æƒ³ï¼šè®¾ç«‹ä¸€ä¸ªé˜Ÿåˆ—qä¿å­˜å¾…ä¼˜åŒ–çš„ç»“ç‚¹ï¼Œæ¯æ¬¡å–å‡ºé˜Ÿé¦–ç»“ç‚¹uï¼Œå¹¶ä¸”ç”¨uç‚¹å½“å‰çš„diså€¼å¯¹æ‰€æœ‰uçš„è¾¹æŒ‡å‘çš„ç‚¹vè¿›è¡Œæ¾å¼›æ“ä½œï¼Œå¦‚æœvç‚¹çš„diså€¼è¢«æ¾é©°ï¼Œä¸”vç‚¹ä¸åœ¨å½“å‰çš„é˜Ÿåˆ—ä¸­ï¼Œå°±å°†vç‚¹å…¥é˜Ÿã€‚ä¸æ–­ä»é˜Ÿåˆ—ä¸­å–å‡ºç»“ç‚¹è¿›è¡Œæ¾å¼›æ“ä½œï¼Œç›´è‡³é˜Ÿåˆ—ç©ºä¸ºæ­¢ã€‚æ¾å¼›æ“ä½œï¼šâ€œä¸‰è§’å½¢ä¸¤è¾¹ä¹‹å’Œå¤§äºç¬¬ä¸‰è¾¹â€ã€‚æ˜¯åˆ¤å®šæ˜¯å¦dis[j]&gt;dis[i]+w[i,j]ï¼Œè‹¥æˆç«‹ï¼Œåˆ™æ¾é©°æˆåŠŸï¼Œå°†dis[j]èµ‹ä¸ºdis[i]+w[i,j]12345678910111213141516171819202122232425262728293031323334353637#include&lt;cstdio&gt;#include&lt;cstring&gt;using namespace std;int n,m,s,dis[10010],q[100010],head[10100],cnt,to[510000],nxt[510000],w[510000],vis[10010];void addedge(int a,int b,int c) &#123; to[++cnt]=b, nxt[cnt]=head[a]; w[cnt]=c; head[a]=cnt;&#125;void SPFA(int s) &#123; int l=0,r=1; memset(dis,0x7f,sizeof(dis)); dis[s]=0; //åˆå§‹åŒ– memset(vis,0,sizeof(vis)); vis[s]=1; //æ ‡è®°æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­ q[r]=s; //å°†èµ·ç‚¹å…¥é˜Ÿ while(l&lt;r) &#123; int u=q[++l];vis[u]=0; //é˜Ÿå¤´å‡ºé˜Ÿ for(int i=head[u]; i; i=nxt[i]) //éå†æ‰€æœ‰ä¸å½“å‰ç‚¹çš„è¾¹æŒ‡å‘çš„ç‚¹æ˜¯å¦å¯ä»¥æ¾é©° if(dis[u]+w[i]&lt;dis[to[i]]) &#123; dis[to[i]]=dis[u]+w[i]; if(!vis[to[i]]) q[++r]=to[i],vis[to[i]]=1; //è‹¥è¯¥ç‚¹ä¸åœ¨é˜Ÿåˆ—ä¸­ï¼Œå°†è¯¥ç‚¹å…¥é˜Ÿ &#125; &#125;&#125;int main() &#123; scanf(\"%d%d%d\",&amp;n,&amp;m,&amp;s); for(int i=1,a,b,c; i&lt;=m; i++) &#123; scanf(\"%d%d%d\",&amp;a,&amp;b,&amp;c); addedge(a,b,c); &#125; SPFA(s); for(int i=1; i&lt;=n; i++) if(dis[i]&lt;2e9)printf(\"%d \",dis[i]); else printf(\"2147483647 \");&#125;","tags":[{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"http://blog.southe3n.cf/tags/å›¾è®º/"},{"name":"æœ€çŸ­è·¯","slug":"æœ€çŸ­è·¯","permalink":"http://blog.southe3n.cf/tags/æœ€çŸ­è·¯/"}]},{"title":"ã€å­¦ä¹ ç¬”è®°ã€‘ACè‡ªåŠ¨æœº","date":"2018-05-01T01:00:00.000Z","path":"2018/05/01/xuexibijiaczidongji/","text":"Aho-Corasick AutomatonAC è‡ªåŠ¨æœºå¯ä»¥ç†è§£ä¸º Trie + KMPï¼Œå³ç”¨å¤šä¸ªæ¨¡å¼ä¸²å»ºç«‹ Trieï¼Œç„¶åç”¨ BFS æ±‚å‡ºå¤±é…æŒ‡é’ˆ failã€‚å¯ä»¥è§£å†³å¤šä¸ªæ¨¡å¼ä¸²åœ¨ä¸€ä¸ªæ–‡æœ¬ä¸²ä¸­æ˜¯å¦å‡ºç°çš„é—®é¢˜ã€‚å¦‚ä¸‹å›¾ï¼Œé»‘è¾¹ä¸º Trie æ ‘è¾¹ï¼Œçº¢è¾¹å’Œè“è¾¹ä¸º fail æŒ‡é’ˆã€‚å»ºç«‹Trie-&gt;BFSå»ºç«‹FailæŒ‡é’ˆ-&gt;æ–‡æœ¬ä¸²è¿›è¡ŒåŒ¹é…FailæŒ‡é’ˆçš„å»ºç«‹ï¼šåˆå§‹å°†æ ¹çš„å­èŠ‚ç‚¹failæŒ‡å‘æ ¹å¹¶åŠ å…¥bfsé˜Ÿåˆ—ï¼Œåç»­æ¯ä¸ªèŠ‚ç‚¹çš„failéƒ½æŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹çš„failçš„ç›¸åŒå­—æ¯çš„å­èŠ‚ç‚¹å½“æŸä¸€å­—æ¯ä¸å­˜åœ¨æ—¶ï¼Œå°†å…¶ä½ç½®ä¸Šçš„failæŒ‡é’ˆæŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹çš„failçš„è¯¥å­—æ¯çš„å­èŠ‚ç‚¹ æ´›è°· P3808 ã€æ¨¡æ¿ã€‘ACè‡ªåŠ¨æœºï¼ˆç®€å•ç‰ˆï¼‰è¦æ±‚ï¼šç»™å®š n ä¸ªæ¨¡å¼ä¸²å’Œ 1 ä¸ªæ–‡æœ¬ä¸²ï¼Œæ±‚æœ‰å¤šå°‘ä¸ªæ¨¡å¼ä¸²åœ¨æ–‡æœ¬ä¸²é‡Œå‡ºç°è¿‡ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include&lt;cstdio&gt;#include&lt;queue&gt;#include&lt;cstring&gt;using namespace std;const int MAXLEN = 1000002;int n;char p[MAXLEN];struct Aho_Corasick_Automaton&#123; int trie[MAXLEN][26],cnt[MAXLEN],fail[MAXLEN],cntt; queue&lt;int&gt; q; inline void insert(char *s)&#123; int len=strlen(s),now=0; for(register int i=0;i&lt;len;i++)&#123; int id=s[i]-'a'; if(!trie[now][id]) trie[now][id]=++cntt; now=trie[now][id]; &#125; cnt[now]++; &#125; //å»ºç«‹ Trie inline void getfail()&#123; for(register int i=0;i&lt;26;i++) if(trie[0][i]) fail[trie[0][i]]=0,q.push(trie[0][i]); //å°†æ ¹çš„å­ç»“ç‚¹failæŒ‡å‘æ ¹ while(!q.empty())&#123; int u=q.front();q.pop(); for(register int i=0;i&lt;26;i++) if(trie[u][i]) fail[trie[u][i]]=trie[fail[u]][i],q.push(trie[u][i]); // å­ç»“ç‚¹çš„failæŒ‡å‘å½“å‰ç»“ç‚¹çš„failçš„å½“å‰ä½å­—æ¯ç›¸åŒçš„å­ç»“ç‚¹ else trie[u][i] = trie[fail[u]][i]; //è‹¥åç»­æ— æ‰€å¯»æ‰¾å­—æ¯ï¼Œåˆ™å°†å…¶æŒ‡å‘å½“å‰ç»“ç‚¹çš„failçš„æ‰€å¯»æ‰¾å­—æ¯çš„å­ç»“ç‚¹ &#125; &#125; inline int query(char *s)&#123; int len=strlen(s),now=0,res=0; for(register int i=0;i&lt;len;i++)&#123; now=trie[now][s[i]-'a']; for(register int u=now;u&amp;&amp;cnt[u]!=-1;u=fail[u]) res+=cnt[u],cnt[u]=-1; //æ¯ä¸ªæ¨¡å¼ä¸²ä»…ç»Ÿè®¡ä¸€æ¬¡ &#125; return res; &#125;&#125;AC;int main()&#123; scanf(\"%d\",&amp;n); for(register int i=1;i&lt;=n;i++) scanf(\"%s\",p),AC.insert(p); AC.getfail(); scanf(\"%s\",p), printf(\"%d\\n\",AC.query(p)); return 0;&#125; æ´›è°· P3796 ã€æ¨¡æ¿ã€‘ACè‡ªåŠ¨æœºï¼ˆåŠ å¼ºç‰ˆ)ä¸ç®€å•ç‰ˆä¸åŒçš„æ˜¯ï¼Œéœ€è¦æ‰¾å‡ºå‡ºç°æ¬¡æ•°æœ€å¤šçš„æ¨¡å¼ä¸²åªéœ€åœ¨åŒ¹é…åä¸å°†æ¨¡å¼ä¸²ç»“å°¾æŒ‡é’ˆèµ‹-1å³å¯å¯¹æ¯ä¸ªæ¨¡å¼ä¸²å‡ºç°æ¬¡æ•°è¿›è¡Œè®¡æ•°ï¼Œæœ€åæ‰¾å‡ºæœ€å¤§æ¬¡æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263#include&lt;cstdio&gt;#include&lt;queue&gt;#include&lt;cstring&gt;using namespace std;const int MAXLEN = 1000002;int n,ans[200];char p[MAXLEN],s[200][80];struct Aho_Corasick_Automaton&#123; int trie[MAXLEN][26],num[MAXLEN],fail[MAXLEN],cntt; queue&lt;int&gt; q; inline void clean()&#123; //åˆå§‹åŒ– memset(trie,0,sizeof trie); memset(num,0,sizeof num); memset(fail,0,sizeof fail); cntt=0; while(!q.empty()) q.pop(); &#125; inline void insert(char *s,int x)&#123; //å»ºç«‹ Trie int len=strlen(s),now=0; for(register int i=0;i&lt;len;i++)&#123; int id=s[i]-'a'; if(!trie[now][id]) trie[now][id]=++cntt; now=trie[now][id]; &#125; num[now]=x; &#125; inline void getfail()&#123; for(register int i=0;i&lt;26;i++) if(trie[0][i]) fail[trie[0][i]]=0,q.push(trie[0][i]); //å°†æ ¹çš„å­ç»“ç‚¹failæŒ‡å‘æ ¹ while(!q.empty())&#123; int u=q.front();q.pop(); for(register int i=0;i&lt;26;i++) if(trie[u][i]) fail[trie[u][i]]=trie[fail[u]][i],q.push(trie[u][i]); // å­ç»“ç‚¹çš„failæŒ‡å‘å½“å‰ç»“ç‚¹çš„failçš„å½“å‰ä½å­—æ¯ç›¸åŒçš„å­ç»“ç‚¹ else trie[u][i] = trie[fail[u]][i]; //è‹¥åç»­æ— æ‰€å¯»æ‰¾å­—æ¯ï¼Œåˆ™å°†å…¶æŒ‡å‘å½“å‰ç»“ç‚¹çš„failçš„æ‰€å¯»æ‰¾å­—æ¯çš„å­ç»“ç‚¹ &#125; &#125; inline void query(char *s)&#123; int len=strlen(s),now=0; for(register int i=0;i&lt;len;i++)&#123; now=trie[now][s[i]-'a']; for(register int u=now;u;u=fail[u]) ans[num[u]]++; //ä¸ç®€å•ç‰ˆä¸åŒçš„æ˜¯ï¼Œç›¸åŒå­—ç¬¦ä¸²è¦é‡å¤è®¡æ•° &#125; &#125;&#125;AC;int main()&#123; scanf(\"%d\",&amp;n); while(n)&#123; memset(ans,0,sizeof ans); AC.clean(); for(register int i=1;i&lt;=n;i++) scanf(\"%s\",s[i]),AC.insert(s[i],i); AC.getfail(); scanf(\"%s\",p); AC.query(p); int anss=0; for(int i=1;i&lt;=n;i++) anss=max(anss,ans[i]); //æ‰¾å‡ºå‡ºç°æœ€å¤šçš„æ¨¡å¼ä¸²çš„æ¬¡æ•° printf(\"%d\\n\",anss); for(int i=1;i&lt;=n;i++) if(ans[i]==anss) printf(\"%s\\n\",s[i]); scanf(\"%d\",&amp;n); &#125; return 0;&#125;","tags":[{"name":"Trieæ ‘","slug":"Trieæ ‘","permalink":"http://blog.southe3n.cf/tags/Trieæ ‘/"},{"name":"å­—ç¬¦ä¸²","slug":"å­—ç¬¦ä¸²","permalink":"http://blog.southe3n.cf/tags/å­—ç¬¦ä¸²/"}]}]